(self.modernJsonp=self.modernJsonp||[]).push([["39477"],{391849:function(e,a,t){t.d(a,{hA:()=>L,tX:()=>w,ZP:()=>C,p:()=>P});var n=t(391995);let o=Object.freeze({DAILY:1,WEEKLY:2,BIWEEKLY:3,MONTHLY:4}),l=Object.freeze({ONE_WEEK:"7D",ONE_MONTH:"30D",THREE_MONTH:"90D",SIX_MONTH:"180D",ONE_YEAR:"365D",TWO_YEAR:"730D"}),i=new n.Ry(10),r=new n.H3([i]),s=new n.H3([r]),d=new n.H3([s]),_=new n.H3([d]),u=Object.freeze({AGE_18_24:"18-24",AGE_21_24:"21-24",AGE_18_20:"18-20",AGE_25_34:"25-34",AGE_35_44:"35-44",AGE_45_49:"45-49",AGE_50_54:"50-54",AGE_55_64:"55-64",AGE_65_PLUS:"65+"}),p={[u.AGE_18_20]:2,[u.AGE_21_24]:3,[u.AGE_25_34]:4,[u.AGE_35_44]:5,[u.AGE_45_49]:6,[u.AGE_50_54]:7,[u.AGE_55_64]:8,[u.AGE_65_PLUS]:9,AGE_UNSUPORTED:10},c=l.ONE_MONTH,E={[l.ONE_WEEK]:o.DAILY,[l.ONE_MONTH]:o.DAILY,[l.THREE_MONTH]:o.WEEKLY,[l.SIX_MONTH]:o.WEEKLY,[l.ONE_YEAR]:o.WEEKLY},S=Object.freeze({DETAIL:"/detail/",HOME:"/"}),g={[l.ONE_WEEK]:1,[l.ONE_MONTH]:2,[l.THREE_MONTH]:3,[l.SIX_MONTH]:4,[l.ONE_YEAR]:5},m={[l.ONE_WEEK]:7,[l.ONE_MONTH]:30,[l.THREE_MONTH]:90,[l.SIX_MONTH]:180,[l.ONE_YEAR]:365,[l.TWO_YEAR]:730},T={MALE:"male",FEMALE:"female",UNSPECIFIED:"unspecified"},h={...T,UNSPECIFIED:"unknown"},O={[T.MALE]:0,[T.FEMALE]:1,[T.UNSPECIFIED]:2},b={TOP_TRENDS_INTERNAL:"1",GROWING_TRENDS_INTERNAL:"2",BREAKOUT_TRENDS_INTERNAL:"3",SEASONAL_TRENDS_INTERNAL:"4",TOP_MONTHLY_TRENDS:"1",TOP_YEARLY_TRENDS:"2",GROWING_TRENDS:"3",SEASONAL_TRENDS:"4"},I=Object.freeze({[b.TOP_TRENDS_INTERNAL]:"Top Trends",[b.GROWING_TRENDS_INTERNAL]:"Growing Trends",[b.BREAKOUT_TRENDS_INTERNAL]:"Breakout Trends"}),v={[b.TOP_MONTHLY_TRENDS]:"Top Monthly Trends",[b.TOP_YEARLY_TRENDS]:"Top Yearly Trends",[b.GROWING_TRENDS]:"Growing Trends",[b.SEASONAL_TRENDS]:"Seasonal Trends"};Object.freeze({L1:1,L2:2,L3:3}),Object.freeze({ONE_MONTH:2,THREE_MONTHS:3,SIX_MONTHS:4,ONE_YEAR:5}),Object.freeze({HIGH_VOLUME:1,GROWTH:2});let y=Object.freeze({HIGH_VOLUME:"HIGH_VOLUME",GROWTH:"GROWTH"});Object.freeze({NC_ENGAGEMENT_PLUS_ACTIVE_FOLLOWERS_90d:1});let w=`https://trends.pinterest.com${S.DETAIL}`,N=Object.freeze([l.ONE_MONTH,l.ONE_YEAR,l.THREE_MONTH,l.ONE_MONTH]),L="https://i.pinimg.com/originals/3d/2f/41/3d2f41008f24a1839f25021cf78e908d.png",P=444,C={PAGES:S,TOAST_DURATION:3e3,Z_INDEX_TRENDS_HEADER:i,Z_INDEX_TRENDS_FEEDBACK_BUTTON:r,Z_INDEX_TRENDS_AUTOCOMPLETE_BOX:s,Z_INDEX_TRENDS_SEARCH_FORM:d,Z_INDEX_TRENDS_TOOLTIP:_,DEPRECATED_GESTALT_COLORS_HEX_VALUES:{red:"var(--base-color-red-300)",white:"#FFF",lightGray:"#EFEFEF",gray:"#8E8E8E",darkGray:"#333",green:"#0FA573",pine:"#0A6955",olive:"#364A4C",blue:"#4A90E2",navy:"#004B91",midnight:"#133A5E",purple:"#B469EB",orchid:"#8046A5",eggplant:"#5B2677",maroon:"#6E0F3C",watermelon:"#F13535",orange:"#E3780C"},MOBILE_MAX_WIDTH:576,FEEDBACK_CHAR_LIMIT:3e3,DEFAULT_CARD_WIDTH:357,DEFAULT_CARD_HEIGHT_RATIO:.65,FIVE_CARD_WIDTH:204,FIVE_CARD_HEIGHT_RATIO:.74,FIVE_LEFT_IMAGE_WIDTH_RATIO:.65,SMALL_CARD_WIDTH:220,DEFAULT_DAYS:"360",CARD_PADDING:10,FIVE_CARD_PADDING:24,PAGE_PADDING:160,MOBILE_HEIGHT:280,DESKTOP_HEIGHT:340,DESKTOP_PREDICTION_CHART_HEIGHT:480,DESKTOP_MOMENT_PREDICTION_CHART_HEIGHT:440,MOBILE_WIDTH:360,DESKTOP_WIDTH:900,CARD_WIDTH_PLUS_PADDING:377,AGE_21_PLUS:"21+",DEFAULT_COUNTRY:"US",TOP_TRENDS_PARAMETER:"topTrendsParameter",DEFAULT_DESIRED_CARD_PER_ROW:3,EXTERNAL_DESIRED_CARD_PER_ROW:5,DATE_FILTER_FORMAT:"MM/DD/YY",ALL:"all",TRENDS_CAMPAIGN_PLANNER:"TRENDS_CAMPAIGN_PLANNER",TRENDS:"TRENDS",PICK:"pick",PLUS_ICON:"+",MINUS_ICON:"-",FILTERABLE_TABLE_ROWS_PER_PAGE:Object.freeze({FIFTY:"50",ONE_HUNDRED:"100",TWO_HUNDRED_FIFTY:"250"}),DEBOUNCE_MILISECONDS:300,FILTER_SECTION:{FILTER_BAR_WIDTH:270,FILTER_BAR_MIN_HEIGHT:432,DATE_RANGE_WIDTH:178,DATE_PICKER_WIDTH:166,EXTERNAL_FILTER_BAR_WIDTH:225},DEFAULT_NUM_TOP_TRENDS:250,DEFAULT_EXTERNAL_NUM_TOP_TRENDS:50,GENDER:T,GENDER_MP:h,GENDER_TO_THRIFT_CONST:O,AGE_BUCKETS:u,AGE_TO_THRIFT_CONST:p,THRIFT_TO_AGE_CONST:{2:"18-20",3:"21-24",4:"25-34",5:"35-44",6:"45-49",7:"50-54",8:"55-64",9:"65+"},THRIFT_TO_GENDER_CONST:{0:"male",1:"female",2:"unknown"},LOOK_BACK_WINDOW:l,LOOK_BACK_WINDOW_DEFAULT:c,LOOK_BACK_WINDOW_TO_THRIFT_CONST:g,LOOK_BACK_WINDOW_TO_AGGREGATION_CONST:E,LOOK_BACK_WINDOW_TO_DAYS:m,TRENDS_TYPES:b,TRENDS_INTERNAL_TYPES_VALUES_TO_LABELS:I,TRENDS_EXTERNAL_TYPES_VALUES_TO_LABELS:v,URL_PARAM_BOOLEAN_VALUES:{TRUE:"true",FALSE:"false"},SEASONALITY_SCORE_THRESHOLD:.825,SEASONALITY_SCORE_OLD_THRESHOLD:.75,SEASONALITY_SCORE_THRESHOLD_CUTOVER_DATE:"2024-04-08",SORT_ORDER:Object.freeze({DESC:"desc",ASC:"asc"}),FILTER_TYPES:Object.freeze({OPPORTUNITY:"OPPORTUNITY",CAMPAIGN:"CAMPAIGN"}),SORT_BY:Object.freeze({TREND_RANK:"TREND_RANK",TOTAL_SEARCH:"TOTAL_SEARCH",WEEKLY_CHANGE:"WEEKLY_CHANGE",MONTHLY_CHANGE:"MONTHLY_CHANGE",YEARLY_CHANGE:"YEARLY_CHANGE"}),URL_JOIN_SIGN:"|",CONCATENATED_STRING_SEPARATOR:", ",CSV_SEPARATOR:",",TERM_ALL:"all",DEBOUNCE_AUDIENCE_SIZE:1e3,MAX_ADD_TERMS:50,L1_SECTIONS:{ALL:{value:"all",label:"All categories"},FOOD_AND_DRINK:{value:"foodanddrink",label:"Food and drinks",id:"918530398158"},BEAUTY:{value:"beauty",label:"Beauty",id:"935541271955"},HOME_DECOR:{value:"homedecor",label:"Home decor",id:"935249274030"},FASHION:{value:"fashion",label:"Fashion",id:"948967005229"},TRAVEL:{value:"travel",label:"Travel",id:"908182459161"},ART:{value:"art",label:"Art",id:"961238559656"},QUOTES:{value:"quotes",label:"Quotes",id:"948192800438"},ENTERTAINMENT:{value:"entertainment",label:"Entertainment",id:"953061268473"},DIY_AND_CRAFTS:{value:"diyandcrafts",label:"DIY and crafts",id:"934876475639"},HEALTH:{value:"health",label:"Health",id:"898620064290"},WEDDINGS:{value:"weddings",label:"Wedding",id:"903260720461"},EVENT_PLANNING:{value:"eventplanning",label:"Event planning",id:"941870572865"},LAWN_AND_GARDEN:{value:"lawnandgarden",label:"Gardening",id:"909983286710"},ANIMALS:{value:"animals",label:"Animals",id:"925056443165"},PARENTING:{value:"parenting",label:"Parenting",id:"920236059316"},EDUCATION:{value:"education",label:"Education",id:"922134410098"},VEHICLES:{value:"vehicles",label:"Vehicles",id:"918093243960"},DESIGN:{value:"design",label:"Design",id:"902065567321"},SPORTS:{value:"sports",label:"Sport",id:"919812032692"},ELECTRONICS:{value:"electronics",label:"Electronics",id:"960887632144"},FINANCE:{value:"finance",label:"Finance",id:"913207199297"},ARCHITECTURE:{value:"architecture",label:"Architecture",id:"918105274631"}},BASE_BANNER_HEIGHT:627,COUNT_TYPES:{COUNT:"count",NORMALIZED_COUNT:"normalizedCount"},EXTERNAL_LOOKBACK_WINDOW_MAPPED_TREND_TYPES:N,FEEDBACK_SLACK_CHANNEL:"slack://channel?team=T024LJUGB&id=CKBF9A6EL",MAX_TERMS:4,COUNTRY_FULL_NAMES:{US:"the United States",CA:"Canada",GB:"the United Kingdom",IN:"India",AU:"Australia"},CONCATENATED_INTERESTS_PARAM_KEY:"concatenatedInterests",FILTER_INTEREST_IDS_PARAM_KEY:"filterInterestIds",FILTER_AGE_IDS_PARAM_KEY:"filterAgeIds",FILTER_GENDERS_PARAM_KEY:"filterGenders",EXPORT_TYPES:{DISCOVER:"discover",DETAILS:"details",CAMPAIGN:"campaignPlan"},EXPORT_NA:"N/A",EXPORT_ALL:"All",EXPORT_NONE:"None",ENGLISH_LANGUAGE_CODE:"en",KEYWORD_SPLIT_CHARACTER:`
`,COUNTRY_PREFIX_POSTAL_CODE_SEPARATOR:":",EXPORT_MESSAGE_HEADER:"Export in progress",DEPRECATED_COLOR_VALUES:["blue","green","purple","orange","red","maroon","orchid","navy","pine","watermelon"],EXPORT_MESSAGE:"This should only take a few seconds. Don't go back.",POPULAR_PINS_MAXIMUM_IMAGES:9,MAXIMUM_TERM_IMAGES_BULK_SIZE:250,TERM_IMAGE_MEMCACHE_KEY_PREFIX:"timg:",EXTRA_TERM_IMAGES:80,DESIRED_PIN_IMAGE_SIZE:"236x",PIN_IMAGE_URL_PREFIX:"https://i.pinimg.com/",PIN_IMAGE_URL_SUFFIX:".jpg",PIN_IMAGE_DEFAULT_CACHE_TIME_S:86400,DOUBLE_ROW_CARD_WIDTH:170,TOP_TRENDS_CAROUSEL_TERMS:9,TRENDS_FOR_PINS_MODULE_BREAK_WIDTH:1380,TRENDS_SEARCHBAR_HEIGHT:193,TOP_TRENDS_CAROUSEL_EXTENDED_TERMS:30,TOP_TRENDS_UNAUTH_CAROUSEL_TERMS:25,TOP_TRENDS_DOUBLE_ROW_MAX_TERMS:6,DETAILS_PAGE_SEARCH_OVERTIME_SUBTITLE_WIDTH:750,PT_IMAGE_SIZE:"236x",FILTERED_TABLE_IMAGE_SIZE:"30x30",TOP_TREND_CAROUSEL_IMAGE_SIZE:"236x",MOMENT_IMAGE_CARD_SIZE:"70x70",PERSONALIZED_TREND_TYPES:y,PREDICTION_SUPPORTED_COUNTRIES:["US"],MOMENT_PREDICTION_LOOKBACK_DAYS:730,MILLISECONDS_PER_DAY:864e5}},712392:function(e,a,t){t.d(a,{y1:()=>o});var n=t(667294);t(325476),(0,n.createContext)({isUpsellUnauthModalOpen:!1,openUpsellUnauthModal:()=>{},closeUpsellUnauthModal:()=>{}}),Object.freeze({IS_SEASONAL:"seasonal",TERMS:"terms",COUNTRY:"country",EDITORIAL_INDEX:"editorial",SHOULD_MOCK:"shouldMock",EMPTY_HERO_BANNER_MOCK:"emptyHeroBanner",TRENDS_PRESET:"trendsPreset",ADVERTISER_ID:"advertiserId",END_DATE:"endDate",SELECTED_END_DATE:"selectedEndDate",AGE_BUCKET:"ageBucket",GENDER:"gender",LOOK_BACK_WINDOW:"lookbackWindow",COUNTS_TYPE:"countsType",DATE_RANGE:"dateRange",AGGREGATION_LEVEL:"aggregationLevel",SORT_BY:"sortBy",SORT_ORDER:"sortOrder",L1_INTEREST_IDS:"l1InterestIds",L2_INTEREST_IDS:"l2InterestIds",L3_INTEREST_IDS:"l3InterestIds",KEYWORDS_TO_EXCLUDE:"keywordsToExclude",KEYWORDS_TO_INCLUDE:"keywordsToInclude",RANKING_METHOD:"rankingMethod",AGE_DETAILS_PAGE:"ageDetailsPage",GENDER_DETAILS_PAGE:"genderDetailsPage",TOP_TRENDS:"topTrends",MOMENTS:"moments",HAS_PREDICTIONS:"hasPredictions",SHOW_PREDICTION:"showPrediction",URL_PARAM_UTM_VALUES:Object.freeze({UTM_SOURCE:"utm_source",UTM_MEDIUM:"utm_medium",UTM_CAMPAIGN:"utm_campaign",UTM_CONTENT:"utm_content",UTM_TERM:"utm_term",UTM_CREATIVE:"utm_creative"}),EVENT:"event",GRAPH_EVENT:"graphEvent",PRODUCT_CATEGORIES:"product_categories",PAGE_NUMBER:"page",TOPIC_INTEREST_IDS:"topicInterestIds",PARENT_PRODUCT_CATEGORY:"parentProductCategory",SHOW_SIDE_NAV:"showSideNav",VIEW:"view",TAB:"tab",SHOW_UNAUTH_MODAL:"showUnauthModal",NEXT_URL:"nextUrl"}),t(230201),t(935059),t(774838),t(893957);let o=(e,a)=>{let t=(0,n.useRef)(void 0),o=()=>{t.current&&clearTimeout(t.current)};return(0,n.useEffect)(()=>o,[]),n=>{o(),t.current=setTimeout(()=>{e(n)},a)}}},325476:function(e,a,t){t.d(a,{Z:()=>s});var n=t(667294),o=t(312048),l=t(705590),i=t(925201),r=t(341687);let s=function(e,a,t){let s=(0,o.s0)(),{search:d,pathname:_="/"}=(0,o.TH)(),u=(0,n.useMemo)(()=>new URLSearchParams(d),[d]),p=n=>{let o="reset"!==a?(0,r.Z)(window.location.search):{},d=(0,l.Km)({..."resetWithoutRefresh"===a?{}:o,[e]:n});if(!a)return;let u=t?`${t}`:_,p=(0,i.Z)(u,{...d});("push"===a||"resetWithoutRefresh"===a)&&s(p),"replace"===a&&s(p,{replace:!0}),"reset"===a&&(window.location.href=p),"replaceWithoutRefresh"===a&&o[e]!==n&&window.history.replaceState(null,"",p)};return function(a){"function"==typeof a?p(a((0,l.AY)(u.get(e)))):p(a)}}},705590:function(e,a,t){t.d(a,{iF:()=>r,AY:()=>i,Km:()=>l});var n=t(391849);let o=["US","CA","IT+ES+PT+GR+MT","IT","ES","DE+AT+CH","DE","GB+IE","FR","SE+DK+FI+NO","NL+BE+LU","PL+RO+HU+SK+CZ","MX+AR+CO+CL","CO","AR","MX","BR","AU+NZ","JP","ID","IN","MY","PH","TH","SA","EG","TR","KR","AE+SA+KW+QA+OM+BH+EG+IQ+DZ","IL+NG+PK+ZA+TR+MA+IN","CR+DO+EC+GT+PE","CY+CZ+GR+HU+MT+PL+RO+SK"];n.ZP.FILTER_INTEREST_IDS_PARAM_KEY,n.ZP.FILTER_AGE_IDS_PARAM_KEY,n.ZP.FILTER_GENDERS_PARAM_KEY,Object.freeze({UTM_SOURCE:"utm_source"});let l=e=>{let a={};for(let t in e){let n=e[t];null!==t&&""!==t.trim()&&null!=n&&""!==n.toString().trim()&&(a[t]=n)}return a},i=e=>e&&null!=e&&/^\d+$/.test(e.toString())?parseInt(e.toString(),10):e,r=(e,a)=>o.includes(e)?a[e]:void 0},95664:function(e,a,t){t.d(a,{$K:()=>i,dh:()=>n,ry:()=>o,xX:()=>r});let n=e=>/instagram/i.test(e||""),o=e=>n(e)||/facebook/i.test(e||"")||/line/i.test(e||"")||/wechat/i.test(e||""),l="[Pinterest/Android]",i=e=>(e||"").includes("[Pinterest/iOS]")||(e||"").includes(l),r=e=>(e||"").includes(l)},992515:function(e,a,t){function n(e,a){let{sessionTimestamps:t}=e;if(!t||0===t.length)return e.count;let n=Date.now()-864e5*a;return t.filter(e=>e>=n).length}function o(e,a){let t=[...e??[],Date.now()];return t.length>a?t.slice(-a):t}t.d(a,{Z:()=>n,m:()=>o})},262297:function(e,a,t){t.d(a,{Tp:()=>d,Vd:()=>s,iU:()=>r});var n=t(4533),o=t(994507),l=t(992515),i=t(34550);let r=()=>{try{let{count:e,time:a,ts:t,sessionTimestamps:o}=(0,i.M0)().getItem(n.SI)??{};if("number"==typeof e&&"number"==typeof a&&"number"==typeof t){let n=Array.isArray(o)&&o.every(e=>"number"==typeof e)?o:void 0;return{count:e,time:a,ts:t,sessionTimestamps:n}}throw Error("Invalid revisitation data")}catch(e){return(0,o.dm)()}},s=e=>{try{let a=(0,i.M0)();if(!a.accessAllowed)return;a.setItem(n.SI,{...e,ts:Date.now()})}catch(e){}},d=(e,a)=>{let t=e;t&&!(t.count<1)&&t.time?new Date().getTime()-t.time>o.WT&&a(t={...t,count:t.count+1,sessionTimestamps:(0,l.m)(t.sessionTimestamps,o.wW)}):a(t=(0,o.dm)())}},79271:function(e,a,t){t.d(a,{Fw:()=>h,OC:()=>S,ZP:()=>T});var n=t(667294),o=t(230201),l=t(589172),i=t(609252),r=t(774838),s=t(739405),d=t(281213),_=t(358198),u=t(2061),p=t(767415),c=t(177433);let E=0,S=()=>E,g={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Notification:{impressionType:"notificationDetailImpressions",idType:"newsIdStr",eventType:4111},NotificationFeed:{impressionType:"notificationFeedImpressions",idType:"newsIdStr",eventType:4110},EditorialBoard:{impressionType:"editorialBoardImpressions",idType:"boardIdStr",eventType:3700},VaseAnnotation:{impressionType:"vaseAnnotationImpressions",idType:"vaseAnnotationUrlStr",eventType:16444}},m=({events:e,startTime:a,endTime:t})=>e?.filter(e=>e>=a&&e<=t)||[];function T({carouselData:e,closeupImpressionType:a,closeupNavigationType:t,componentType:S,contextLogData:T,clientTrackingParams:h,duploShouldTrackPinEvents:O,elementType:b,impressionAuxFields:I,inImpressionExp:v,impressionType:y,impressionsFramework:w,isPaused:N,loggingId:L,objectIdStr:P,slotIndex:C,trackCarousel:A,viewData:R,viewParameter:D,viewType:f,isPromoted:M,storyPinProductEventData:U}){let{logContextEvent:G}=(0,o.u)(),{logMrcVideoAdEventOnPlay:k}=(0,d.H)(),{addImpression:x}=(0,_.WW)()||{},{logStat:H}=(0,u.Yg)(),F=w||i.Z,W=(0,n.useRef)(null),B=(0,n.useRef)(e=>{});B.current=n=>{let o=g[y],l=o.idType,i={clientTrackingParams:h,endTime:n.endTime,[l]:L,slotIndex:C,time:n.startTime,renderDuration:n.endTime-n.startTime,type:a,...I,forcedExit:"removed"===n.forcedExit?0:void 0};if("Pin"===y){E+=1;let e=[],a=n.visibleEvents||new Map,t=n.hiddenEvents||new Map;(I&&I.isPromoted||M)&&[1,50,80,2,102].forEach(o=>{let l=m({events:a.get(o),startTime:n.startTime,endTime:n.endTime}),i=m({events:t.get(o),startTime:n.startTime,endTime:n.endTime});l.forEach(a=>{e.push({type:o,time:a||0,visible:!0})}),i.forEach(a=>{e.push({type:o,time:a||0,visible:!1})})}),i={...i,pinCellWidth:n.pinCellWidth||0,pinCellHeight:n.pinCellHeight||0,windowWidth:window?.innerWidth,windowHeight:window?.innerHeight,visibleEvents:e.sort((e,a)=>e.time-a.time)},I?.nearDupSignature&&x&&S&&[13007,13176,68].includes(S)&&x(I.nearDupSignature)}let r={component:S,object_id_str:P,view_type:f,view_data:R||{},view_parameter:D};if(A)e&&A&&G({event_type:7352,event_data:{pinCarouselSlotImpressions:[{...i,..."canonical"===e.type?{carouselDataId:Number(e.carouselId??0),slotIndex:e.index,carouselSlotId:e.carouselSlots?.[e.index??0]&&Number(e.carouselSlots[e.index??0].slotId)}:{carouselDataId:Number(e.id??0),carouselSlotId:e.carousel_slots?.[e.index??0]&&Number(e.carousel_slots[e.index??0].id),slotIndex:e.index}}]},...r,aux_data:{...T}});else{let e={clientTrackingParams:h,event_type:o.eventType,...r,element:b,event_data:{[o.impressionType]:"Story"===y?i:[i],...U?{storyPinProductEventData:U}:{}},aux_data:{closeup_navigation_type:t,...T}};G(e),k(e)}O&&H("log_pin_impression")};let{expName:q,group:K}=(0,l.Z)({skipActivation:!0}),Y=(0,s.ZP)(),V=(0,c.Zv)(),{isAuthenticated:Z}=(0,r.B)(),$=(0,n.useCallback)(()=>{let e=!1;try{let{current:a}=W;if(a instanceof HTMLElement&&(!M||a.getElementsByTagName("img").length>0)){let t=F.start(a);t.onExitViewport(B.current).setDebugId(L||"unknown"),O&&t.onEnterViewport(()=>{H("log_pin_impression_track_enter_viewport")}),e=!0,K&&(0,p.nP)("webapp.masonry.trackImpression",{tags:{callsite:"app_packages_useImpressionTracker",deviceType:Y,experimentName:q,group:K,handlerId:V,isAuthenticated:Z,slotIndex:C??"unknown"}})}}catch{window.console.error('Can only track impressions for type "HTMLElement"')}O&&H("log_pin_impression_track",{didStartTracking:e})},[W.current]);return(0,n.useEffect)(()=>(v&&!F.inExperiment&&F.setExperimentStatus(!0),N||$(),()=>{let{current:e}=W;e instanceof HTMLElement&&(!M||e.getElementsByTagName("img").length>0)&&F.stop(e)}),[N,$]),W}let h=({children:e,...a})=>e({impressionTrackerRef:T(a)})},331357:function(e,a,t){t.d(a,{J:()=>l,U:()=>S});var n=t(27399),o=t(767415);let l="nic_v4",i=`${l}=1a`,r=`${l}=1b`,s=[i,r],d=["invite_code","invite","board_invite_code","sender"],_=null,u=e=>!!d.find(a=>e.includes(a)),p=e=>{let a;return e.pathname.includes("/pin/")&&!u(e.search)&&(a=e.search,!s.find(e=>a.includes(e)))},c=async e=>{let{resource_response:a}=await n.Z.create("InviteSocialTrackingParamNonInviteResource",{user_id:e}).callCreate();if(!a)return(0,o.nP)(`${l}.social_tracking_pin_non_invite.no_resource_response`),"";{let e=encodeURIComponent(a.data);return(0,o.nP)(`${l}.social_tracking_pin_non_invite.encrypted.${e?"true":"false"}`),e}},E=(e,a,t=!1,n)=>{if(!p(e))return;let s=t?"mweb":"web";if(!a)return void(0,o.nP)(`${s}.${l}.social_tracking_pin_non_invite.insert.no_encrypted_id`);(0,o.nP)(`${s}.${l}.social_tracking_pin_non_invite.insert.attempt`);try{let d=((e,a,t)=>{let n=e.search?"&":"?";return e.pathname+e.search+(n+(t?r:i)+a)})(e,a,t||!1);(0,o.nP)(`${s}.${l}.social_tracking_pin_non_invite.insert.success`),n(d)}catch{(0,o.nP)(`${s}.${l}.social_tracking_pin_non_invite.insert.caught_exception`)}},S=(e,a,t,n,i)=>{let r=t?"mweb":"web";(0,o.nP)(`${r}.${l}.social_tracking_pin_non_invite.attempt`);try{let s;!t&&n&&p(e)?((0,o.nP)(`${r}.${l}.social_tracking_pin_non_invite.search_string_eligible`),((e,a,t=!1,n)=>{_?E(e,_,t,n):(async()=>{let o=await c(a);_=o,E(e,o,t,n)})()})(e,a,t,i)):(s=e.search,!u(s)&&!s.includes("sender")&&s.includes(l)&&(0,o.nP)(`${r}.${l}.social_tracking_pin_non_invite.search_string_land`))}catch{(0,o.nP)(`${r}.${l}.social_tracking_pin_non_invite.caught_exception`)}}},456871:function(e,a,t){t.d(a,{Z:()=>u});var n=t(312048),o=t(331357),l=t(173874),i=t(774838),r=t(843716),s=t(900907),d=t(986523),_=t(767415);function u(){let e,{isBot:a,isSocialBot:t,referrerFromCookie:u,referrerFromHeader:p,countryFromHostName:c,countryFromIp:E,regionFromIp:S,isAuthenticated:g}=(0,i.B)(),m=(0,n.TH)(),T=(0,d.Z)(),h=new URLSearchParams(m.search),O=!a&&!!h.get("utm_pai"),b=h.get("utm_source"),I=!a&&!t&&(0,l.hasInviteCode)(m),v=(0,s.Z)({countryFromHostName:c||"",countryFromIp:E||"",regionFromIp:S||"",isAuthenticated:g}),y=p||v&&u||"";e=T||!v?y:(0,r.an)(y);let w=!1,N=!a&&!t&&b&&["email",String(31)].includes(b),L=!a&&!t&&b&&["fb"].includes(b),P="offsite"===b,C=!a&&!t&&!!(e&&(/facebook/.test(e)||/fb/.test(e))),A=!a&&!t&&!!(e&&(/twitter/.test(e)||/tw/.test(e)));I&&(0,_.nP)("unauth.entry_channel.invite_code",{sampleRate:1}),N&&(0,_.nP)("unauth.entry_channel.email_utm_source",{sampleRate:1}),L&&(0,_.nP)("unauth.entry_channel.social_media_utm_source_fb",{sampleRate:1}),P&&(0,_.nP)("unauth.entry_channel.offsite_utm_source",{sampleRate:1}),C&&(0,_.nP)("unauth.entry_channel.social_media_referer_fb",{sampleRate:1}),A&&(0,_.nP)("unauth.entry_channel.social_media_referer_twitter",{sampleRate:1}),w=(0,r.Xn)(e);let R=!a&&w,D=!!h.get(o.J),f=!!h.get("twa_type")||e&&e.startsWith("android-app://com.pinterest.twa"),M=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","utm_admin","utm_id","utm_mail","utm_swu"].some(e=>null!==h.get(e))||!!e||D||f;return{isPaid:O,isInvite:I,utmSource:b,referrer:e,isSocial:I,isDirect:!a&&!O&&!I&&!R&&!M,isSEO:R,isBrowserStorageAllowed:v,isOffsite:P,isBot:a||t}}},843716:function(e,a,t){t.d(a,{Xn:()=>S,Yf:()=>h,an:()=>g});var n=t(173874),o=t(138482),l=t(99737);let i="BING",r="GOOGLE",s="YAHOO",d="YANDEX",_="RAKUTEN",u="NAVER",p="AMP_CACHE",c="DUCKDUCKGO",E=[r,i,s,d,_,u,p,c];function S(e){return E.includes(function(e){let{hostname:a}=(0,l.Z)(e,!0);if(a&&e){if(a.includes("google.")||e.includes("android-app://com.google.android.googlequicksearchbox"))return r;else if(a.includes("bing."))return i;else if(a.includes("yahoo."))return s;else if(a.includes("yandex."))return d;else if(a.includes("rakuten."))return _;else if(a.includes("naver."))return u;else if(a.includes("duckduckgo."))return c;else if(a.includes(".cdn.ampproject.org"))return p}return""}(e))}function g(e){return e||"undefined"!=typeof document&&document.referrer||""}let m=e=>"/"!==e[e.length-1]?`${e}/`:e,T=e=>{let a=m(e),t=(0,n.createRouterLocation)({url:a});return(0,n.isCloseupPage)(t)?"PIN":(0,n.isBoardPage)(t)?"BOARD":(0,o.Z)(t)?"PROFILE":(0,n.isAnyTodayPage)(t)?"TODAY":(0,n.isAnyIdeasPage)(t)?"IDEA":(0,n.isAnyShoppingPage)(t)?"SHOPPING":"UNKNOWN"},h=({country:e,language:a,isBot:t,hostname:n,pathname:o})=>({domain:n,country:e,language:a,currentUrl:o,pageType:T(o),referrer:document.referrer,isBot:t,links:(({selector:e,skipExternal:a})=>{let t=Array.from(document.querySelectorAll(e)),n={pin:[],board:[],user:[],today:[],idea:[],shopping:[]},o=new Set;return t.forEach(e=>{let t=e.getAttribute("href");if(!t||t.startsWith("#")||a&&t.startsWith("http")&&!t.includes(window.location.hostname))return;let l=m(t);if(o.has(l))return;o.add(l);let i=T(l);"PIN"===i?n.pin.push(l):"BOARD"===i?n.board.push(l):"PROFILE"===i?n.user.push(l):"TODAY"===i?n.today.push(l):"IDEA"===i?n.idea.push(l):"SHOPPING"===i&&n.shopping.push(l)}),n})({selector:"a[href]",skipExternal:!0})})},434291:function(e,a,t){t.d(a,{m:()=>o,r:()=>l});var n=t(815271);function o(e,a){(0,n.Z)("ðŸŽ¯ ENGAGEMENT_SCORE_CALCULATED",{trigger:e,...a})}function l(e,a){(0,n.Z)("desktop"===e?"DESKTOP_UPSELL_DECISION":"MOBILE_UPSELL_DECISION",a)}},116412:function(e,a,t){t.d(a,{U:()=>o,a:()=>l});var n=t(935833);function o({PES:e,NUS:a,conversionIntentLevel:t,triggerAction:o,deviceType:l}){(0,n.My)("engagement_score.calculated",{engagement_score:e,upsell_negative_score:a,user_intent_bucket:t,upsell_type_tag:"conversion",trigger_action:o,device_type:l})}function l({upsellType:e,decision:a,intentLevel:t,PES:o,NUS:l,experimentVariant:i}){(0,n.My)("upsell.decision_with_intent",{upsell_type:e,decision:a,intent_level:t,pes:o,nus:l,experiment_variant:i})}},184285:function(e,a,t){t.d(a,{HZ:()=>T,ZP:()=>C,e_:()=>P,pT:()=>v});var n=t(667294),o=t(581722),l=t(312048),i=t(15881),r=t(95664),s=t(79271),d=t(456871),_=t(774838),u=t(418282),p=t(270922),c=t(739405),E=t(658375),S=t(767415);let g=Date.now(),m=()=>(0,o.v9)(e=>e.upsell?.mWebSignupModal.modal.isShown??!1),T=()=>(0,o.v9)(e=>e.upsell?.modal),h=()=>(0,s.OC)(),O=()=>Date.now()-g,b=()=>(0,o.v9)(e=>e.upsell?.mWebSignupModal.isUnauthSharingModalsShown??!1),I=()=>(0,o.v9)(e=>!!e.upsell?.mWebSignupModal.modalHasShown),v=()=>(0,o.v9)(e=>e.upsell?.mWebSignupModal),y=()=>{let e=(0,_.B)(),a=(0,d.Z)(),t=(0,c.ZP)(),o=(0,l.TH)();return(0,n.useMemo)(()=>(0,p.T9)(e,a,t,o.pathname),[e,a,t,o.pathname])},w=Object.freeze(["CO","ID"]),N=e=>w.includes(e),L=e=>{if(!(0,r.ry)(e))return!1;let a=(0,u.Nl)();return a.getItem(i.QV)||((0,S.nP)("mobile_signup_modal.rules.suppress_for_social_in_app_browser"),a.setItem(i.QV,"1")),!0},P=({isModalShown:e,isUnauthSharingModalsShown:a,modalHasShown:t,country:n,userAgent:o})=>!e&&!(a||t&&N(n)||(0,E.P)()||L(o));function C(){let e=m(),a=(0,o.v9)(e=>e.upsell?.mWebSignupModal.modal),t=(0,o.v9)(e=>e.upsell?.mWebSignupModal.upsellEligibleNavigationCount),l=b();return{isModalShown:e,modal:a,upsellEligibleNavigationCount:t,isUnauthSharingModalsShown:l,modalHasShown:I(),sessionContext:y(),isUpsellEnabledGlobally:(()=>{let e=m(),a=b(),t=I(),o=y();return(0,n.useCallback)(()=>!e&&!(({isUnauthSharingModalsShown:e,modalHasShown:a,sessionContext:t})=>{if(!t)return!1;let{country:n,userAgent:o}=t;return e||a&&N(n)||(0,E.P)()||L(o)})({isUnauthSharingModalsShown:a,modalHasShown:t,sessionContext:o}),[e,a,t,o])})(),getPinImpressionCount:h,getSessionDuration:O}}},896399:function(e,a,t){t.d(a,{Fy:()=>s,Vi:()=>d,aJ:()=>r,dn:()=>i,gH:()=>n,kQ:()=>l,mV:()=>o});let n="RECORD_NAVIGATIONAL_PAGE",o="SET_INITIAL_SESSION_CONTEXT",l="UPDATE_LATEST_L1_VERTICAL",i="RESET_UPSELL_TRIGGER_STATE",r="RECORD_SOCIAL_PIN_LANDING_PAGE",s="TRIGGER_SOCIAL_DELAY_MODAL",d="TRIGGER_SOCIAL_SCROLL_MODAL"},432414:function(e,a,t){t.d(a,{ZW:()=>P,Gk:()=>L,YM:()=>C});var n=t(173874),o=t(138482),l=t(434291),i=t(116412),r=t(896399),s=t(730056);let d="dweb_eoq_q3_standard",_="dweb_eoq_q3_advanced",u="mweb_eoq_q3_standard",p="mweb_eoq_q3_advanced",c="mweb_eoq_q4_advanced_ucan",E="mweb_eoq_q4_emergency_ucan",S="mweb_eoq_q4_advanced_non_ucan",g="mweb_eoq_q4_emergency_non_ucan",m="dweb_eoq_q4_advanced_ucan",T="dweb_eoq_q4_emergency_ucan",h="dweb_eoq_q4_advanced_non_ucan",O="dweb_eoq_q4_emergency_non_ucan",b=[{bundleId:"dweb_eoq_q3_standard",experimentKey:d,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}}}},{bundleId:"dweb_eoq_q3_advanced",experimentKey:_,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}}}},{bundleId:"mweb_eoq_q3_standard",experimentKey:u,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}}}},{bundleId:"mweb_eoq_q3_advanced",experimentKey:p,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_advanced_ucan",experimentKey:c,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_emergency_ucan",experimentKey:E,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0},seo:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_advanced_non_ucan",experimentKey:S,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_emergency_non_ucan",experimentKey:g,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0},seo:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"dweb_eoq_q4_advanced_ucan",experimentKey:m,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{seo:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}},default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"dweb_eoq_q4_advanced_non_ucan",experimentKey:h,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{seo:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}},default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"dweb_eoq_q4_emergency_ucan",experimentKey:T,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:0}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"dweb_eoq_q4_emergency_non_ucan",experimentKey:O,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:0}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}}];function I(e,a){let t=b.filter(t=>{if(!t.active||!t.overrides[e])return!1;switch(t.experimentKey){case d:return a("dweb_eoq_q3_standard").anyEnabled;case _:return a("dweb_eoq_q3_advanced").anyEnabled;case u:return a("mweb_eoq_q3_standard").anyEnabled;case p:return a("mweb_eoq_q3_advanced").anyEnabled;case c:return a("mweb_eoq_q4_advanced_ucan").anyEnabled;case E:return a("mweb_eoq_q4_emergency_ucan").anyEnabled;case S:return a("mweb_eoq_q4_advanced_non_ucan").anyEnabled;case g:return a("mweb_eoq_q4_emergency_non_ucan").anyEnabled;case m:return a("dweb_eoq_q4_advanced_ucan").anyEnabled;case T:return a("dweb_eoq_q4_emergency_ucan").anyEnabled;case h:return a("dweb_eoq_q4_advanced_non_ucan").anyEnabled;case O:return a("dweb_eoq_q4_emergency_non_ucan").anyEnabled;default:return!1}});return t[t.length-1]?.overrides[e]}let v=e=>({id:e.id,evaluate:function({ruleId:e,baseEvaluateFunction:a}){return t=>{let{checkExperiment:n,session:o}=t,l=n&&I(e,n)?.evaluateContextOverride||{},i=l[o?.channel??"default"]||l.default||{};return a((0,s.Z)(t,i))}}({ruleId:e.id,baseEvaluateFunction:e.evaluate}),getNextState:function({ruleId:e,baseNextStateFunction:a}){return({action:t,state:n,decision:o})=>{let l=a({action:t,state:n,decision:o});if(!("payload"in t&&"object"==typeof t.payload&&null!==t.payload&&"checkExperiment"in t.payload))return l;let i=n.initialSessionContext||("sessionContext"in t.payload?t.payload.sessionContext:void 0),r=I(e,t.payload.checkExperiment)?.stateOverride||{},d=r[i?.channel??"default"]||r.default||{};return 0===Object.keys(d).length?l:(0,s.Z)(l,d)}}({ruleId:e.id,baseNextStateFunction:e.getNextState})});var y=t(224841);let w=["enabled","enabled_no_legal","enabled_copy_2"],N=(e,a)=>{let t={enabled_1:["high","medium"],enabled_2:["high"],enabled_3:["medium"],enabled_4:["medium","low"]}[a];return!!t&&t.includes(e||"unknown")},L={shouldShowRelatedPinsGradientUpsell:v({id:"desktop_related_pins_gradient_upsell_trigger",evaluate:({relatedPinsGradientUpsellEverShown:e,checkExperiment:a})=>{if(e)return!1;let t=a?.("ce_dweb_unauth_related_pins_limit");return!!t?.anyEnabled},getNextState:({state:e})=>({...e,showRelatedPinsGradientUpsell:!0,relatedPinsGradientUpsellEverShown:!0})}),shouldShowCloseupNavigationalModal:v({id:"closeup_navigational_modal_trigger",evaluate:({pinViewCount:e,navigationalPagesUpsellSeen:a,checkExperiment:t})=>!t?.("pc_no_navigational_upsell").anyEnabled&&(e??0)>=4&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"navigation_1",container:"closeup",reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0})}),shouldShowSaveModal:v({id:"save_modal_trigger",evaluate:()=>!0,getNextState:({action:e,state:a})=>({...a,pinSaveCount:a.pinSaveCount+1,pinId:e.payload.pinId,attributionLabel:e.payload.attributionLabel,showSaveModal:!0,modal:{isShown:!0,displayProps:{attributionLabel:e.payload.attributionLabel,container:"save",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",savePinId:e.payload.pinId,signupFlow:{type:"signup"},source:"saveButtonExp"}}})}),shouldShowNavigationalModal:v({id:"desktop_navigational_modal_trigger",evaluate:({uniqueNavigationalPagesSeen:e=[],navigationalPagesUpsellSeen:a,navigationalPagesViewThresholdDesktop:t,checkExperiment:n})=>!n?.("pc_no_navigational_upsell").anyEnabled&&e.length>=(t??4)&&!a,getNextState:({state:e,action:a})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:`navigation_${a.payload.containerPage}`,container:a.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0})}),shouldShowNavigationalModalIntentBased:v({id:"desktop_navigational_modal_intent_trigger",evaluate:({navigationalPagesUpsellSeen:e,engagementScore:a,checkExperiment:t})=>{let n=t?.("engagement_score_v0_dweb");if(!n?.anyEnabled||e)return!1;let{conversionIntentLevel:o,PES:r,NUS:s}=a||{},d=N(o,n.group);return(0,l.r)("desktop",{variant:n.group,decision:d?"SHOW":"SKIP",intentLevel:o,PES:r||0,NUS:s||0,reason:d?`Intent ${o} in allowed list`:`Intent ${o} NOT in allowed list`}),(0,i.a)({upsellType:"navigation_desktop",decision:d?"show":"skip",intentLevel:o||"unknown",PES:r||0,NUS:s||0,experimentVariant:n.group}),d},getNextState:({state:e,action:a})=>{let{conversionIntentLevel:t,PES:n,NUS:o}=e.engagementScore||{};return{...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:`navigation_intent_${t}_pes_${n||0}_nus_${o||0}`,container:a.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0}}}),shouldShowSignupModalOnCloseUpClick:v({id:"closeup_modal_trigger",evaluate:({modal:e,clickCloseUp:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_closeup",container:"pinWash",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickCloseUp:!0})}),shouldShowSignupModalOnClickContextMenuSaveButton:v({id:"context_menu_save_button_trigger",evaluate:({modal:e,clickContextMenuSaveButton:a})=>!e?.isShown&&!a,getNextState:({action:e,state:a})=>{let t;return t=["enabled_all_improved","enabled_all","enabled_save"].includes(e.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===e.payload.signupToLoginExpGroup?"saveButton":"defaultSource"}:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:e.payload.pinId},{...a,modal:{isShown:!0,displayProps:t},clickContextMenuSaveButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnClickCloseupSaveButton:v({id:"closeup_save_button_trigger",evaluate:({modal:e,clickCloseUpContextMenuSaveButton:a})=>!e?.isShown&&!a,getNextState:({action:e,state:a})=>{let t;return t=["enabled_all_improved","enabled_all","enabled_save"].includes(e.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===e.payload.signupToLoginExpGroup?"saveButton":"defaultSource"}:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:e.payload.pinId},{...a,modal:{isShown:!0,displayProps:t},clickCloseUpContextMenuSaveButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnContextMenuDownloadClick:v({id:"desktop_context_menu_download_button_trigger",evaluate:({limitReached:e,inImmediateUpsellGroup:a,modal:t})=>!!((e||a)&&!t?.isShown),getNextState:({action:e,state:a})=>{let t;return t=e.payload.inDwebSwapDownloadUpsellExp?{signupFlow:{type:"login"},attributionLabel:`click_${e.payload.attributionLabelSource}_download_button`,container:"lopDownloadUpsell",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"lopDownloadUpsell"}:{signupFlow:{type:"signup"},attributionLabel:`click_${e.payload.attributionLabelSource}_download_button`,container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:e.payload.pinId},{...a,modal:{isShown:!0,displayProps:t},clickContextMenuDownloadButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnCloseupDownloadClick:v({id:"closeup_download_button_trigger",evaluate:({limitReached:e,modal:a})=>!!(e&&!a?.isShown),getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_download_button`,container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:e.payload.pinId}},clickCloseUpContextMenuDownloadButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource})}),shouldShowSignupModalOnFollowButtonClick:v({id:"follow_button_trigger",evaluate:({modal:e,clickFollowButton:a})=>!e?.isShown&&!a,getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:e.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",container:e.payload.isContextualFollowEnabled?"follow":"upsellRules_unspecified_container",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:e.payload.isContextualFollowEnabled?"followButton":void 0}},clickFollowButton:!0})}),shouldShowSignupModalOnFollowingButtonClick:v({id:"following_button_trigger",evaluate:({modal:e,clickFollowingButton:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_following",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowingButton:!0})}),shouldShowSignupModalOnFollowersButtonClick:v({id:"followers_button_trigger",evaluate:({modal:e,clickFollowersButton:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_followers",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowersButton:!0})}),shouldShowLoginModalOnCommentComposerClick:v({id:"comment_composer_trigger",evaluate:({modal:e,clickCommentComposerUpsell:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"tap_unauth_comment_composer",container:"closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"commentComposer"}},clickCommentComposerUpsell:!0})}),shouldShowLoginModalOnRelatedPinOpenLinkClick:v({id:"related_pin_open_link_trigger",evaluate:({modal:e,clickRelatedPinOpenLinkUpsell:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"click_context_menu_related_pin_right_click_open_link_button",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickRelatedPinOpenLinkUpsell:!0})}),shouldShowLoginModalOnPinLinkClick:v({id:"pin_link_trigger",evaluate:({modal:e,pinLinkClickCount:a=0})=>!e?.isShown&&(2===a||a%5==0),getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"pinLinkClickHandler_tier1",container:"hybrid_clickthrough",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickPinLinkCount:e.payload.count})}),shouldShowSocialPinLandingModal:v({id:"social_pin_landing_modal_trigger",evaluate:({inviter:e,socialPinLandingModalShown:a,checkExperiment:t})=>{if(!e||a)return!1;let n=t?.("ce_dweb_unauth_splp_blocking").anyEnabled,o=t?.("ce_dweb_unauth_splp_blocking_no_delay").anyEnabled,l=t?.("ce_dweb_unauth_splp_blocking_3s").anyEnabled;return!!(n||o||l)},getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:e.type===r.Fy?`delay_${e.payload.containerPage}`:`scroll_${e.payload.containerPage}`,container:e.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},socialPinLandingModalShown:!0})}),shouldShowScrollingBox:{id:"desktop_scrolling_box_trigger",evaluate:({checkExperiment:e})=>!e?.("pc_no_navigational_upsell").anyEnabled,getNextState:({state:e})=>e}},P={shouldShowSaveEducationPopover:v({id:"mobile_save_education_popover_trigger",evaluate:({saveEducationPopoverEverShown:e,checkExperiment:a})=>{if(e)return!1;let{group:t}=a?.("ce_mweb_unauth_social_feature_education")||{};return!!t?.startsWith("enabled_group_board")},getNextState:({state:e})=>({...e,showSaveEducationPopover:!0,saveEducationPopoverEverShown:!0})}),shouldShowReplyToSenderSheet:v({id:"mobile_reply_to_sender_sheet_trigger",evaluate:({replyToSenderSheetEverShown:e,checkExperiment:a})=>{if(e)return!1;let{group:t}=a?.("ce_mweb_unauth_social_feature_education")||{};return!!t?.startsWith("enabled_reply_to_sender")},getNextState:({state:e})=>({...e,showReplyToSenderSheet:!0,replyToSenderSheetEverShown:!0})}),shouldAllowUnauthSave:v({id:"mobile_unauth_save_quota_check",evaluate:({isPPMAndroidUnauthExperience:e,isFromUnauthContextMenu:a,currentUnauthSaves:t=0,mobileUnauthSaveThreshold:n})=>!a&&!e&&t<(n??2),getNextState:({action:e,state:a})=>({...a,mWebSignupModal:{...a.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(a.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:e.payload.headingType,trigger:{attributionLabel:"extended_save_out_of_quota"===e.payload.headingType?"click_save_button_with_max_unauth_saves":e.payload.attributionLabel||"click_save_button_on_closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:e.payload.pinId}}})}),shouldShowMainPinImageNavigationalModal:v({id:"mobile_main_pin_image_modal",evaluate:({checkExperiment:e,isUpsellEnabledGlobally:a,isModalCurrentlyShown:t,learningUpsellScenario:n,forceShowModal:o})=>{let l=n&&a&&!t&&(e?.("mweb_unauth_main_learning_pin_full_page").anyEnabled||e?.("mweb_q2_mau_push_pc_advanced").anyEnabled||e?.("mweb_q2_mau_push_pc_advanced_row").anyEnabled||e?.("mweb_q2_mau_push_pc_emergency").anyEnabled||e?.("mweb_q2_mau_push_pc_emergency_row").anyEnabled||e?.("mweb_q2_mau_push_pc_eu_safe").anyEnabled);return n&&(o||!!l)},getNextState:({action:e,state:a})=>({...a,mWebSignupModal:{...a.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(a.mWebSignupModal?.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:"none",trigger:{attributionLabel:"navigation_main_pin_image_click",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:e.payload.pinId}}})}),shouldShowMainPinImageAppUpsell:{id:"mobile_main_pin_app_upsell_purple_banner",getNextState:({state:e})=>e,evaluate:({learningUpsellScenario:e,hasConversionUpsell:a,isLearningAppUpsellShown:t})=>a||!e?{shouldToggleAppUpsell:!1,currentlyShowing:!1,newState:!1}:{shouldToggleAppUpsell:!0,currentlyShowing:t,newState:!t}},shouldShowNavigationUpsell:v({id:"mobile_navigation_upsell",evaluate:({isUpsellEnabledGlobally:e,isModalCurrentlyShown:a,newLocation:t,isNavigationFromSwipe:n,currentNavigationCount:o,hasSeenModal:l,pageThreshold:i,isWashDismissible:r,canShowSignupModalOnRouteChange:s,navigationalPagesViewThresholdMobile:d,checkExperiment:_})=>{if(_?.("pc_no_navigational_upsell").anyEnabled)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let u=d||i||4;if(a)return{shouldShowModal:!1,shouldDismissModal:!0,shouldIncrementCount:!1};if(!(e&&!n))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let p=!!t&&!!_&&(0,y.Z)(_,t);if(!(t&&s?.(t,p)))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};if(!((o??0)>=u)||l)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let c=_?.("mweb_feature_upsell_copy_visual_combination_v3")?.group??"",E=w.includes(c),S=_?.("mweb_feature_upsell_copy_visual_combination_v2"),g=S?.anyEnabled??!1;return{shouldShowModal:!0,shouldDismissModal:!1,shouldIncrementCount:!0,attributionLabel:`navigation_${u}_${o}`,allowCloseOnOutsideClick:r,headingType:E?"mweb_feature_upsell_copy_visual_combination_v3":g?"mweb_feature_upsell_copy_visual_combination_v2":"none"}},getNextState:({state:e,decision:a})=>({...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:a?.headingType??"none",trigger:{attributionLabel:a?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!!a?.allowCloseOnOutsideClick},pinId:null}}})}),shouldShowNavigationUpsellIntentBased:v({id:"mobile_navigation_upsell_intent",evaluate:({isUpsellEnabledGlobally:e,isModalCurrentlyShown:a,newLocation:t,isNavigationFromSwipe:n,hasSeenModal:o,canShowSignupModalOnRouteChange:r,engagementScore:s,checkExperiment:d})=>{let _=d?.("engagement_score_v0_mweb");if(!_?.anyEnabled)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let u=!!t&&!!d&&(0,y.Z)(d,t);if(a)return{shouldShowModal:!1,shouldDismissModal:!0,shouldIncrementCount:!1};if(!e||n||!t||!r?.(t,u))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};if(o)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let{conversionIntentLevel:p,PES:c,NUS:E}=s||{},S=N(p,_.group);if((0,l.r)("mobile",{variant:_.group,decision:S?"SHOW":"SKIP",intentLevel:p,PES:c||0,NUS:E||0,reason:S?`Intent ${p} in allowed list`:`Intent ${p} NOT in allowed list`}),(0,i.a)({upsellType:"navigation_mobile",decision:S?"show":"skip",intentLevel:p||"unknown",PES:c||0,NUS:E||0,experimentVariant:_.group}),!S)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let g=d?.("mweb_feature_upsell_copy_visual_combination_v3")?.group??"",m=w.includes(g),T=d?.("mweb_feature_upsell_copy_visual_combination_v2"),h=T?.anyEnabled??!1;return{shouldShowModal:!0,shouldDismissModal:!1,shouldIncrementCount:!0,attributionLabel:`navigation_intent_${p}_pes_${c||0}_nus_${E||0}`,allowCloseOnOutsideClick:!0,headingType:m?"mweb_feature_upsell_copy_visual_combination_v3":h?"mweb_feature_upsell_copy_visual_combination_v2":"none"}},getNextState:({state:e,decision:a})=>({...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:a?.headingType??"none",trigger:{attributionLabel:a?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!!a?.allowCloseOnOutsideClick},pinId:null}}})}),shouldShowOnLandUpsell:v({id:"mobile_on_land_upsell",evaluate:({checkExperiment:e,isUpsellEnabledGlobally:a,hasSeenNavUpsell:t,location:l,userAgent:i,showUnauthMwebSocialDefaultModalUpsell:r,isSocialInAppBrowser:s,shouldTriggerOnLand:d=!1})=>{let _;if(e?.("pc_no_navigational_upsell").anyEnabled)return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let u=!!l&&!!e&&(0,y.Z)(e,l);if(!a||t||!(l&&((0,n.isCloseupPage)(l)||(0,n.isBoardPage)(l)||(0,o.Z)(l)||(0,n.isSearchPage)(l)||(0,n.hasInviteCode)(l)||u&&(0,n.isAnyIdeasPage)(l))))return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let p=!(s?.(i)&&e?.("mweb_unauth_social_iab_upsell_boost_experiment",{dangerouslySkipActivation:!0}).anyEnabled)&&r;if(!r&&!d)return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let c=p?"":e?.("mweb_feature_upsell_copy_visual_combination_v3")?.group??"",E=w.includes(c),S=p?null:e?.("mweb_feature_upsell_copy_visual_combination_v2"),g=S?.anyEnabled??!1;if("social"==(_=p?"social":E?"mweb_feature_upsell_copy_visual_combination_v3":g?"mweb_feature_upsell_copy_visual_combination_v2":"none")&&e){let a=e("ce_mweb_visual_plp_upsell");if(a.anyEnabled)switch(a.group){case"enabled_1":_="social_visual_1";break;case"enabled_2":_="social_visual_2";break;case"enabled_3":_="social_visual_3"}}return{shouldShowModal:!0,shouldIncrementCount:!0,showUnauthMwebSocialUpsell:p,modalConfig:{reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"navigation_0",navigationTriggeredUpsell:{newLocation:l,oldLocation:l},headingType:_}}},getNextState:({state:e,decision:a})=>{let{modalConfig:t}=a;return{...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:t?.headingType,trigger:{attributionLabel:t?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:null}}}}}),shouldShowSignupModalOnContextMenuDownloadClick:v({id:"mobile_context_menu_download_button_trigger",evaluate:({limitReached:e,inImmediateUpsellGroup:a,modal:t})=>(e||a)&&!t?.isShown,getNextState:({action:e,state:a})=>{let{inMwebDownloadCTAExp:t,showDownloadCloseupIcon:n,attributionLabelSource:o}=e.payload,l={trigger:{attributionLabel:`click_${o}_download_button`,reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},headingType:t||n?"download_limit_reached":"none"};return{...a,mWebSignupModal:{...a.mWebSignupModal,modal:{isShown:!0,displayProps:l,pinId:e.payload.pinId??""}}}}}),shouldShowSignupModalOnFollowButtonClickMobile:v({id:"follow_button_trigger_mobile",evaluate:({mWebSignupModal:e})=>!e?.modal.isShown,getNextState:({action:e,state:a})=>({...a,mWebSignupModal:{...a.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(a.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:e.payload.isContextualFollowEnabled?"follow":"none",trigger:{attributionLabel:e.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0}}}})}),shouldShowFloatingBanner:{id:"mobile_floating_banner_trigger",evaluate:({checkExperiment:e})=>!e?.("pc_no_navigational_upsell").anyEnabled,getNextState:({state:e})=>e}},C={desktop:L,mobile:P}},413211:function(e,a,t){t.d(a,{$S:()=>L,$y:()=>_,AS:()=>c,Aw:()=>eR,BF:()=>eo,Bh:()=>B,Bi:()=>A,C5:()=>el,CC:()=>eF,CH:()=>eM,Dk:()=>ea,Dw:()=>eB,EH:()=>ei,F8:()=>eg,FV:()=>ep,Ff:()=>eP,G5:()=>ed,GY:()=>eO,Gh:()=>S,HK:()=>h,Hm:()=>eu,IS:()=>ek,Ik:()=>R,Jw:()=>eH,K7:()=>E,Li:()=>en,Lu:()=>Q,MZ:()=>eW,Nx:()=>N,OU:()=>u,OX:()=>v,P9:()=>P,Pp:()=>C,Pu:()=>eG,Q4:()=>O,QA:()=>es,QC:()=>ev,QG:()=>I,Qm:()=>eD,Sy:()=>z,TQ:()=>Z,UA:()=>W,Ue:()=>H,V9:()=>F,WE:()=>eE,XE:()=>eI,Yr:()=>G,Zr:()=>M,aj:()=>eU,ap:()=>eT,b9:()=>e_,by:()=>m,dL:()=>er,f$:()=>Y,fC:()=>ew,gU:()=>eK,g_:()=>q,h4:()=>x,ht:()=>eb,i8:()=>b,it:()=>U,jB:()=>X,k7:()=>eL,kd:()=>f,mX:()=>g,o9:()=>eC,pZ:()=>eA,pp:()=>p,qD:()=>eN,qH:()=>ey,qT:()=>T,qq:()=>ex,qs:()=>K,rA:()=>D,sg:()=>$,t:()=>eq,tA:()=>k,tP:()=>w,tW:()=>eS,uV:()=>eh,ub:()=>J,uy:()=>y,v2:()=>em,vY:()=>et,w$:()=>ee,wK:()=>V,xY:()=>ec,yC:()=>ef,z1:()=>j});var n=t(95664),o=t(935833),l=t(184285),i=t(896399),r=t(432414),s=t(817727),d=t(767415);let _="PROCESS_MOBILE_NAVIGATION_CHANGE",u="SET_UPSELL_REASON",p="UPS_EVENT_PIN_VIEW",c="UPS_EVENT_PIN_SAVE",E="UPS_EVENT_DESKTOP_MODAL_SHOW",S="UPS_EVENT_DESKTOP_MODAL_DISMISSED",g="CLICK_CLOSE_UP_CONTEXT_MENU_SAVE_BUTTON",m="CLICK_CLOSE_UP_CONTEXT_MENU_DOWNLOAD_BUTTON",T="TRIGGER_SCROLL_DOWN_UPSELL",h="CLEAR_SCROLL_DOWN_UPSELL",O="DISMISS_BOTTOM_RIGHT_BANNER",b="TRIGGER_SAVE_EDUCATION_POPOVER",I="CLEAR_SAVE_EDUCATION_POPOVER",v="TRIGGER_RELATED_PINS_GRADIENT_UPSELL",y="CLEAR_RELATED_PINS_GRADIENT_UPSELL",w="TRIGGER_REPLY_TO_SENDER_SHEET",N="CLEAR_REPLY_TO_SENDER_SHEET",L="CLICK_CLOSEUP_UPSELL",P="CLICK_CONTEXT_MENU_SAVE_BUTTON_UPSELL",C="CLICK_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",A="CLICK_FOLLOW_BUTTON_UPSELL",R="CLICK_FOLLOWING_BUTTON_UPSELL",D="CLICK_FOLLOWERS_BUTTON_UPSELL",f="CLICK_COMMENT_COMPOSER_UPSELL",M="CLICK_PIN_LINK_UPSELL",U="CLICK_RELATED_PIN_OPEN_LINK_UPSELL",G="SHOW_MOBILE_SIGNUP_MODAL",k="DISMISS_MOBILE_SIGNUP_MODAL",x="SET_MOBILE_SIGNUP_MODAL_TOP_INTEREST",H="INCREMENT_UPSELL_ELIGIBLE_NAVIGATION_COUNT",F="HIDE_UNAUTH_SHARING_MODALS",W="SHOW_UNAUTH_SHARING_MODALS",B="RESTORE_FROM_LOCAL_STORAGE",q="MAIN_PIN_IMAGE_CLICK_MOBILE",K="ON_LAND_UPSELL_MOBILE",Y="SET_LEARNING_UPSELL_VISIBILITY",V="CLICK_MOBILE_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",Z="DISMISS_MOBILE_FLOATING_UPSELL",$="CLICK_FOLLOW_BUTTON_UPSELL_MOBILE",X="INCREMENT_PIN_SAVE_COUNT",Q="DECREMENT_PIN_SAVE_COUNT",j="INCREMENT_UNAUTH_CLICKTHROUGH_COUNT",z="SET_UNAUTH_DOWNLOAD_COUNT",J="UPS_EVENT_PIN_SAVE_MOBILE",ee="SET_REFERRED_APP_UPSELL_STATE",ea=e=>({type:B,payload:{upsellEligibleNavigationCount:e}}),et=e=>({type:u,payload:{upsellReason:e}}),en=(e,a,t,n,o)=>({type:p,payload:{pinId:e,seoUrl:a,componentType:t,viewParameter:n,checkExperiment:o}}),eo=(e,a)=>({type:c,payload:{pinId:e,attributionLabel:a}}),el=()=>({type:S}),ei=()=>({type:O}),er=e=>({type:E,payload:{displayProps:e}}),es=()=>({type:L}),ed=(e,a,t)=>({type:P,payload:{pinId:e,attributionLabelSource:a,signupToLoginExpGroup:t}}),e_=(e,a)=>({type:A,payload:{isIdeaPin:e,isContextualFollowEnabled:a}}),eu=(e,a,t,n)=>({type:g,payload:{pinId:e,attributionLabelSource:a,signupToLoginExpGroup:t,checkExperiment:n}}),ep=()=>({type:R}),ec=()=>({type:D}),eE=()=>({type:f}),eS=e=>({type:M,payload:{count:e}}),eg=()=>({type:U}),em=(e,a)=>({checkExperiment:t,sessionContext:n})=>o=>{o({type:i.gH,payload:{pageUniqueKey:e,containerPage:a,checkExperiment:t,sessionContext:n}})},eT=e=>({type:i.mV,payload:{sessionContext:e}}),eh=e=>({type:i.kQ,payload:{l1Vertical:e}}),eO=(e,a)=>({type:i.aJ,payload:{inviter:e,containerPage:a}}),eb=e=>({checkExperiment:a})=>t=>{t({type:i.Fy,payload:{containerPage:e,checkExperiment:a}})},eI=e=>({checkExperiment:a})=>t=>{t({type:i.Vi,payload:{containerPage:e,checkExperiment:a}})},ev=()=>({type:I}),ey=()=>({checkExperiment:e})=>a=>{a({type:v,payload:{checkExperiment:e}})},ew=()=>({type:y}),eN=()=>({checkExperiment:e,sessionContext:a})=>t=>{let{group:n}=e?.("ce_mweb_unauth_social_feature_education")||{};n?.startsWith("enabled_group_board")?t((({checkExperiment:e})=>a=>{a({type:b,payload:{checkExperiment:e}})})({checkExperiment:e,sessionContext:a})):n?.startsWith("enabled_reply_to_sender")&&t((({checkExperiment:e})=>a=>{a({type:w,payload:{checkExperiment:e}})})({checkExperiment:e,sessionContext:a}))},eL=()=>({type:N}),eP=e=>({type:G,payload:e}),eC=()=>({type:k}),eA=e=>({type:x,payload:{topInterest:e}}),eR=()=>({type:H}),eD=()=>({type:F}),ef=()=>({type:W}),eM=e=>({checkExperiment:a,sessionContext:t})=>(n,l)=>{n({type:_,payload:{...e,checkExperiment:a,sessionContext:t}});let i=l().upsell;(0,s.Z)(i)||(0,o.My)(`mweb.nav.upsell.show.${e.currentNavigationCount}`)},eU=e=>({checkExperiment:a,sessionContext:t})=>(i,s)=>{let _=s().upsell,{country:u,userAgent:p}=t,c=r.YM.mobile.shouldShowOnLandUpsell?.evaluate({checkExperiment:a,isUpsellEnabledGlobally:(0,l.e_)({isModalShown:_.mWebSignupModal.modal.isShown??!1,isUnauthSharingModalsShown:_.mWebSignupModal.isUnauthSharingModalsShown??!1,modalHasShown:!!_.mWebSignupModal.modalHasShown,country:u,userAgent:p}),hasSeenNavUpsell:_.mWebSignupModal.modalHasShown,location:e.location,isPaid:e.isPaid,isSocial:e.isSocial,isDirect:e.isDirect,isSEO:e.isSEO,userAgent:p,showUnauthMwebSocialDefaultModalUpsell:e.showUnauthMwebSocialDefaultModalUpsell,isSocialInAppBrowser:n.ry,session:t});c.shouldShowModal&&c.modalConfig&&((0,o.My)("mweb.nav.upsell.show.0"),c.showUnauthMwebSocialUpsell&&(0,d.nP)("unauth.mweb.social.pin.upsell",{sampleRate:1}),i({type:K,payload:{decision:c,checkExperiment:a}}))},eG=e=>({checkExperiment:a,sessionContext:t})=>(n,l)=>{let i=l().upsell,s=!!i.appUpsells.learningUpsell?.isShown,d=r.YM.mobile.shouldShowMainPinImageNavigationalModal?.evaluate({checkExperiment:a,session:t,isUpsellEnabledGlobally:e.upsellContext.isUpsellEnabledGlobally(),isModalCurrentlyShown:e.upsellContext.isModalShown,learningUpsellScenario:e.learningUpsellScenario}),_=r.YM.mobile.shouldShowMainPinImageAppUpsell?.evaluate({learningUpsellScenario:e.learningUpsellScenario,hasConversionUpsell:!!d,isLearningAppUpsellShown:s});d?(0,o.My)("mweb.nav.upsell.show.main_pin_image_click"):_.shouldToggleAppUpsell?_.currentlyShowing?e.trackInteraction({action:"dismiss",item:"learning-upsell"}):e.trackInteraction({action:"click",item:"learning-upsell"}):e.onImageClick(),n({type:q,payload:{conversionDecision:d,appUpsellDecision:_,checkExperiment:a,pinId:e.pinId}})},ek=({isShown:e,isDismissedByUser:a=!1})=>({type:Y,payload:{isShown:e,isDismissedByUser:a}}),ex=({isDismissedByUser:e=!1}={})=>({type:Z,payload:{isDismissedByUser:e}}),eH=(e,a)=>({type:$,payload:{isIdeaPin:e,isContextualFollowEnabled:a}}),eF=()=>({type:Q}),eW=()=>({type:j}),eB=e=>({type:z,payload:{count:e}}),eq=e=>({checkExperiment:a,sessionContext:t})=>(t,n)=>{let o=n().upsell;r.YM.mobile.shouldAllowUnauthSave?.evaluate({checkExperiment:a,isPPMAndroidUnauthExperience:e.isPPMAndroidUnauthExperience,isFromUnauthContextMenu:e.isFromUnauthContextMenu,currentUnauthSaves:e.unauthSavedPinsStore.pins.length})&&!o.mWebSignupModal.modal.isShown?(e.unauthSavedPinsStore.save({id:e.pinId,nodeId:e.nodeId,imageUrl:e.getPinGifOrImageSrc({imagesUrls:e.imagesUrls,embedSrc:e.embedSrc,embedType:e.embedType,excludeOriginals:!e.isBot&&!e.isSocialBot})}),t({type:X}),e.handleShowNavFooter(t,e.forceShowNavFooter,e.isNavBarHidden,e.setForceShowNavFooter),e.successCallback&&e.successCallback()):t({type:J,payload:{attributionLabel:e.isFromUnauthContextMenu?e.attributionLabel||"click_save_button_on_closeup":"click_save_button_with_max_unauth_saves",headingType:e.isFromUnauthContextMenu?"save":"extended_save_out_of_quota",pinId:e.pinId,checkExperiment:a}})},eK=({isShown:e,appUpsellType:a,isBlocking:t})=>({type:ee,payload:{isShown:e,appUpsellType:a,isBlocking:t}})},817727:function(e,a,t){t.d(a,{Z:()=>n});let n=e=>{let{modal:a,mWebSignupModal:t,appUpsells:n}=e;return!!(a.isShown||t.modal.isShown||n.learningUpsell?.isShown||n.iabAppUpsell?.isShown)}},270922:function(e,a,t){t.d(a,{A4:()=>d,T9:()=>_,qo:()=>s,y1:()=>r});var n=t(95664),o=t(992515),l=t(262297),i=t(969809);let r=e=>e?(0,i.Z)(e.toUpperCase()):"OTHER",s=e=>e.isPaid?"paid":e.isInvite?"invite":e.isSocial?"social":e.isSEO?"seo":e.utmSource?`utm_${e.utmSource}`:"direct",d=e=>e&&"string"==typeof e?(0,n.$K)(e)?"pinterest":(0,n.dh)(e)?"instagram":/wechat|micromessenger/i.test(e)?"wechat":(0,n.ry)(e)||/facebook|fbav|fban|tiktok|twitter|line/i.test(e)?"social":"none":"none",_=(e,a,n,i)=>{let _=e?.countryFromHostName||e?.country||"",u=e?.userAgent?.raw||("undefined"!=typeof navigator?navigator.userAgent:""),p=d(u),c=(e=>{let{isAnyTodayPage:a,isHubOrIdeaPage:n,isBoardSectionPage:o,isBoardPage:l,isCloseupPage:i,isHomePage:r,isSearchPage:s,isTopicPage:d}=t(173874),_=t(138482).Z,u={pathname:e};return a(u)?"today":n(u)?"ideas":o(u)?"section":l(u)?"board":i(u)?"closeup":r(u)?"home":_(u)?"profile":s(u)?"search":d(u)?"topic":""})(i),E=(0,l.iU)(),S=(0,o.Z)(E,14);return{country:_,userAgent:u,referrer:e?.referrerFromHeader||e?.referrerFromCookie||"",unauthID:e?.unauthId||"",region:r(_),channel:s(a),iab:p,isIAB:"instagram"===p||"wechat"===p||"social"===p,landingPageType:c,deviceType:n,revisitationState:E,revisitationCount:S,daysSinceLastVisit:(e=>{let{ts:a}=e;if(!a||0===a)return 0;let t=new Date,n=new Date(a);return Math.max(Math.floor(Number(((t.getTime()-n.getTime())/864e5).toFixed(2))),0)})(E)}}},986523:function(e,a,t){t.d(a,{Z:()=>r});var n=t(667294);let o=()=>()=>{},l=()=>!1,i=()=>!0,r=()=>(0,n.useSyncExternalStore)(o,l,i)},224841:function(e,a,t){t.d(a,{Z:()=>o});var n=t(173874);function o(e,a,t=!1){return!!(0,n.isAnyIdeasPage)(a)&&e?.("lop_eoq_lever_nav_mweb",{dangerouslySkipActivation:t}).anyEnabled}},358198:function(e,a,t){t.d(a,{BW:()=>S,WW:()=>c});var n=t(686659),o=t(667294),l=t(712392),i=t(15881),r=t(213491),s=t(501010),d=t(418282),_=t(767415),u=t(785893);let{Provider:p,getMaybe:c}=(0,r.Z)("CloseupNearDupSigsTracker"),E=({group:e,children:a})=>{(0,o.useEffect)(()=>{(0,n.Z)("CloseupNearDupSigsTrackerContext","/app/www/closeup/CloseupNearDupSigsTrackerContext.tsx")},[]);let t=(0,d.Nl)(),r=(0,o.useRef)([]),s=(0,o.useRef)(new Set),c=(0,o.useRef)([]),E=(0,o.useRef)(new Set),S=(0,o.useRef)([null,[]]),g=(0,o.useMemo)(()=>{switch(e){case"enabled_10":return 10;case"enabled_20":return 20;default:return 35}},[e]),m=(0,l.y1)(()=>{"enabled_skip_sync"!==e&&(t.setItem(i.S4,r.current),t.setItem(i.yb,c.current))},500),T=(0,o.useCallback)(()=>{if("enabled_skip_sync"===e)return;let a=Date.now(),n=t.getItem(i.S4),o=t.getItem(i.yb);if(n)try{Array.isArray(n)&&n.every(e=>"string"==typeof e)&&(r.current=n.slice(-5),s.current=new Set(r.current))}catch(e){(0,_.nP)("closeup_page.near_dup.session_storage_sync.closeup.fail",{sampleRate:1})}if(o)try{Array.isArray(o)&&o.every(e=>"string"==typeof e)&&(c.current=o.slice(-g),E.current=new Set(c.current))}catch(e){(0,_.nP)("closeup_page.near_dup.session_storage_sync.impression.fail",{sampleRate:1})}(0,_.LY)("closeup_page.near_dup.session_storage_sync.success",Date.now()-a,{sampleRate:.1,tags:{status:"success"}})},[r,c,t,e,g]),h=(0,o.useCallback)(e=>{if(E.current.has(e)&&(c.current=c.current.filter(a=>a!==e)),c.current.length>=g){let e=c.current.shift();e&&E.current.delete(e)}E.current.add(e),c.current.push(e)},[g]),O=(0,o.useCallback)(e=>{if(s.current.has(e)&&(r.current=r.current.filter(a=>a!==e)),r.current.length>=5){let e=r.current.shift();e&&s.current.delete(e)}s.current.add(e),r.current.push(e),m()},[m]),b=(0,o.useCallback)(e=>{let[a,t]=S.current;if(a===e)return t;0===r.current.length&&0===c.current.length&&T();let n=Array.from(new Set([...c.current,...r.current]));return S.current=[e,n],n},[T]);(0,o.useEffect)(()=>m,[m]);let I=(0,o.useMemo)(()=>({addImpression:h,addCloseup:O,getTrackedNearDupSigs:b}),[h,O,b]);return(0,u.jsx)(p,{value:I,children:a})},S=({children:e})=>{(0,o.useEffect)(()=>{(0,n.Z)("CloseupNearDupSigsTrackerContext","/app/www/closeup/CloseupNearDupSigsTrackerContext.tsx")},[]);let{checkExperiment:a}=(0,s.Z)(),{anyEnabled:t,group:l}=a("web_closeup_rabbit_hole_dedup");return t&&l?(0,u.jsx)(E,{group:l,children:e}):(0,u.jsx)(p,{value:void 0,children:e})}},2061:function(e,a,t){t.d(a,{Yg:()=>s,ib:()=>_,nF:()=>p,xX:()=>u});var n=t(501010),o=t(774838),l=t(739405),i=t(767415);let r=({checkExperiment:e})=>{let{group:a}=e("auth_mweb_graphql_pin_page",{dangerouslySkipActivation:!0});return{logStat:(e,t)=>(0,i.nP)("webapp.graphql.debug_auth_mweb_graphql_pin_page",{sampleRate:1,tags:{event:e,group:a,...t}})}},s=()=>{let{isAuthenticated:e}=(0,o.B)(),a=(0,l.HG)(),{checkExperiment:t}=(0,n.Z)();return e&&!a?r({checkExperiment:t}):{logStat:()=>{}}},d=0,_=({checkExperiment:e,isAuthMweb:a})=>{if(!a)return;let{logStat:t}=r({checkExperiment:e});(d+=1)<10&&t(`repin_${d}`)};function u({checkExperiment:e,isDesktop:a,isAuthenticated:t}){if(!t)return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1,shouldPrefetchStoryPinFragment:!1};if(a){let{anyEnabled:a}=e("auth_dweb_graphql_pin_page");return{isGraphQLEnabledForRelatedPins:a,isGraphQLEnabledInGeneral:a,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1,shouldPrefetchStoryPinFragment:!1}}{let{anyEnabled:a,group:t}=e("auth_mweb_graphql_pin_page");switch(t){case"control":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!1};case"enabled":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!1};case"enabled_prefetch_story_pin_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!0};case"enabled_prefetch_closeup_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!0,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!1};default:return{isGraphQLEnabledInGeneral:a,isGraphQLEnabledForRelatedPins:a,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1,shouldPrefetchStoryPinFragment:!1}}}}function p(){let{checkExperiment:e}=(0,n.Z)(),a=(0,l.HG)(),{isAuthenticated:t}=(0,o.B)();return u({checkExperiment:e,isDesktop:a,isAuthenticated:t})}},658375:function(e,a,t){t.d(a,{C:()=>i,P:()=>l});var n=t(173874),o=t(767415);let l=()=>!1,i=e=>{(0,n.isDiscoverArticlePage)(e)&&!l()&&(0,o.nP)("mobile_signup_modal.rules.suppress_for_discover_article",{flushImmediate:!0,sampleRate:1})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/39477-fa25870d07325fe2.mjs.map