(self.modernJsonp=self.modernJsonp||[]).push([["46683"],{87980:function(e,t,n){n.d(t,{F9:()=>d,LM:()=>l,VZ:()=>r,cQ:()=>u,rZ:()=>o});var i=n(397345),a=n(705460);let r=()=>"number"==typeof window.innerHeight&&"number"==typeof window.pageYOffset&&!!document.querySelector&&!!document.querySelectorAll,o=e=>e instanceof HTMLDivElement||e instanceof HTMLVideoElement?e.getBoundingClientRect():e.parentElement instanceof HTMLElement?e.parentElement.getBoundingClientRect():null,s=e=>{if(e instanceof HTMLImageElement)return e.src;if(e instanceof HTMLVideoElement)return e.poster||null;let t=(e.style||{}).backgroundImage||"";if(!t.startsWith("url(")||!t.endsWith(")"))return null;let n=t.slice(4,-1);return(n.startsWith('"')&&n.endsWith('"')||n.startsWith("'")&&n.endsWith("'"))&&(n=n.slice(1,-1)),n||null},l=()=>document.querySelector?document.querySelectorAll(i.wc).length:((0,a.H)("missing_document_query_selector"),0),d=()=>{let e=(()=>{if(!document.querySelector)return(0,a.H)("missing_document_query_selector"),null;let e=document.querySelectorAll(i.wc);return e[e.length-1]||null})();if(!e)return!1;let t=window.innerHeight||0,n=window.pageYOffset||0;return e.getBoundingClientRect().top+n>=t},u=(e,t,n)=>{if(!document.querySelector)return(0,a.H)("missing_document_query_selector"),[];let r={foldY:window.innerHeight||0,pageYOffset:window.pageYOffset||0},l=[i.Wf,...e?[i.fF]:[],...t?[i.$N]:[]].join(","),d=[...document.querySelectorAll(l)];if(n){let e=[...document.querySelectorAll('div[data-test-id="board-section"]')],t=e=>{let n=[...e.children];!n.length&&e.style.backgroundImage?d.push(e):n.length&&n.forEach(e=>{t(e)})};e.forEach(e=>{t(e)})}return d.reduce((e,n)=>{if((n instanceof HTMLImageElement||n instanceof HTMLDivElement||n instanceof HTMLVideoElement&&t)&&((e,t)=>{let n=o(e);if(!n)return(0,a.H)("missing_client_rect"),!1;if(n.width<70&&n.height<70){if(e instanceof HTMLImageElement)return!1;let t=s(e);if(t?.endsWith("svg"))return!1}return(({top:e,height:t},{foldY:n,pageYOffset:i})=>{let a=e+i;if(a>=n)return!1;let r=Math.min(t,n-a);return r>.5*t||r>.2*n})(n,t)})(n,r)){let t=s(n);if(t){let i=t.lastIndexOf("/"),a=i>=0?t.slice(i+1):t,r=a.indexOf("?"),o=r>=0?a.slice(0,r):a;return e.concat([{element:n,fileName:o}])}}return e},[])}},397345:function(e,t,n){n.d(t,{$N:()=>l,Kb:()=>i,Wf:()=>o,fF:()=>s,wc:()=>r});let i="pwt-grid-item",a=['div[data-grid-item="true"]',"div.Grid__Item",`div[data-test-id="${i}"]`],r=a.join(","),o=a.map(e=>`${e} img`).join(","),s=a.map(e=>`${e} div[style*=background-image]`).join(","),l=a.map(e=>`${e} video`).join(",")},28692:function(e,t,n){n.d(t,{Z:()=>v,v:()=>p});var i=n(667294),a=n(774303),r=n(87980),o=n(591048),s=n(482070),l=n(484243),d=n(956712),u=n(547314),m=n(23641),c=n(479901),_=n(279794),g=n(767415);let f=(0,a.XV)("GridProfiler"),p=()=>!!window.addEventListener&&!!window.removeEventListener&&(0,r.VZ)();function v({isAtEndOfFeed:e,pinData:t,includeBackgroundImages:n,includeVideos:p=!1,includeSections:v,isPlaceholderGrid:E,stopwatchSetVisuallyCompleteResult:h,stopwatchContext:w}){let I=(0,c.P9)(),[T,N]=(0,i.useState)({status:"DISABLED"});(0,i.useEffect)(()=>{N({status:"LAYOUT",failedCount:0,numOfItemsChecked:0})},[I]),(0,i.useEffect)(()=>{if(f("new status",T),"LAYOUT"===T.status){let e=((e,t)=>{let n=()=>{window.removeEventListener(e,n),t()};return window.addEventListener(e,n),()=>window.removeEventListener(e,n)})("scroll",()=>{(0,l.Z)("scrollDuringLayout")});return()=>{e()}}return()=>{}},[T.status]),(0,_.Z)(()=>{let i=(0,c.Ly)(),l=()=>{},_=e=>{(0,s.Z)(e),w&&w?.abort(),h&&h({result:"ABORT"})};"unknown"!==i?l=m.rt:(i=`${w?.name}`,w?.addBinaryAnnotation&&(l=w?.addBinaryAnnotation));let I=(0,r.cQ)(n,p,v);if(E)return void f("bypassing PWT run due to skeleton pin grid");switch(T.status){case"LAYOUT":{let t=((e,t)=>{if(!t){let t=(0,r.LM)();if(t===e)return f("No new items, so skip the viewport-fill check."),{complete:!1,numOfItemsChecked:e};if(!(0,r.F9)())return f("Viewport may not be filled yet."),{complete:!1,numOfItemsChecked:t}}return{complete:!0}})(T.numOfItemsChecked,e);t.complete?N({status:"TIMING",failedCount:0,pinElements:I}):500*T.failedCount>6e4?((0,u.El)({eventName:`images.${i}.visuallyComplete.maxLayoutAttempt`}),_("visuallyComplete_layoutTimeout"),N({status:"DISABLED"})):N({...T,failedCount:T.failedCount+1,numOfItemsChecked:t.numOfItemsChecked});break}case"TIMING":{let e=(0,o.Cg)(),n=T.pinElements.length,r=[],s=0,m=0,c=0,p=1/0,v=0;if(T.pinElements.forEach(({element:t,fileName:n})=>{let i=e.find(e=>e.name.endsWith(n));i?i.responseEnd?(r.push(i),(0,a.v5)(t,"green"),p=Math.min(p,i.requestStart),v=Math.max(v,i.responseEnd)):(c+=1,(0,a.v5)(t,"blue")):t instanceof HTMLImageElement&&t.complete?(m+=1,(0,a.v5)(t,"red")):(s+=1,(0,a.v5)(t,"greenyellow"))}),s||c)100*T.failedCount>6e4?((0,u.El)({eventName:`images.${i}.visuallyComplete.maxAttempt`,tags:{totalImageCount:n,incompleteCount:s,noTimingCount:m,noTimingResponseEndCount:c}}),_("visuallyComplete_timingTimeout"),N({status:"DISABLED"})):N({...T,failedCount:T.failedCount+1});else{if(f(`All ${r.length} images are fetched`),t&&t.length){var R,A;let e,n,a,r,o,s=(R=t,A=T.pinElements,e=0,n=0,a=0,r=0,o=0,R=R.filter(e=>"pin"===e.type),A.forEach((t,i)=>{let s,l=t.fileName.split(".")[0];s=R[i],l!==s?.image_signature&&(s=R.find(e=>l===e?.image_signature)),void 0===s?o+=1:s.is_promoted||s.recommendation_reason?.reason==="PROMOTED_PIN"||s?.promoter?a+=1:null!==s.story_pin_data_id&&void 0!==s.story_pin_data_id?e+=1:s?.videos?.video_list?n+=1:r+=1}),{storyPinCount:e,videoCount:n,adCount:a,imageCount:r,unknownCount:o});if(Object.entries(s).forEach(([e,t])=>{l(e,t,"I16"),(0,d.XJ)(e,t,"I16")}),(0,u.El)({eventName:`${i}.pinTypes`,tags:s}),"SEARCH_FEED_RENDER"===i){let e=v-p;t[0].display_options?.num_columns_requested===0?(0,g.LY)("full_width_story_image_fetch_time_true",e,{sampleRate:1}):(0,g.LY)("full_width_story_image_fetch_time_false",e,{sampleRate:.05})}}(({imageTimings:e})=>{h&&h({result:"COMPLETE"}),(0,d.cB)(e)})({imageTimings:r}),N({status:"DISABLED"}),(0,u.El)({eventName:`images.${i}.visuallyComplete.complete`,tags:{totalImageCount:n,noTimingCount:m}}),(0,u.$v)({eventName:`images.${i}.visuallyComplete.timing`,value:Math.round(v)})}}}},"LAYOUT"===T.status&&500||"TIMING"===T.status&&100||null)}},482070:function(e,t,n){n.d(t,{Z:()=>d});var i=n(267398),a=n(217472),r=n(712655),o=n(547314),s=n(479901),l=n(617120);function d(e){if(!(0,r.Z)())return;let t=(0,s.Of)();if(t){let n=[...(0,s.pX)(),...t.annotateExperiments||[]],r=(0,s.e)();(0,o.T0)({abortReason:e,pwtName:t.name,annotateExperiments:n}),r.forEach(e=>{(0,o.yi)(e,t?.name)});let d=(0,l.bC)(),u={type:"surface",surface:t.name,id:t.id,navigationType:(0,s.fC)(),isAuthenticated:d.isAuthenticated},m=(0,i.N)({reason:e,annotateExperiments:n,annotations:{},binaryAnnotations:(0,s.fI)(),constraintMap:(0,s.xY)(),endTime:performance.now(),imageTimings:(0,s.h)(),isV4Logger:!0,metricId:u,pwtMeasures:(0,s.zU)(),pwtStaticContext:d,startTime:(0,s.Eq)(),traceId:(0,s.Wj)(),spans:[]});(0,o.qu)(`Abort ${t.name} PWT. Abort reason: ${e}`),(0,o.qu)("Result:",m),(0,a.Z)({metricId:u,pwtStaticContext:d,result:m,isV4Logger:!0,annotateExperiments:n}),(0,s.mn)()}}},344316:function(e,t,n){n.d(t,{Z:()=>o});var i=n(617120);let a=!1,r=null;function o(e){if(a)return;r=e;let t=window.innerHeight,n=window.innerWidth,o=()=>{let e=(0,i.bC)(),s=Math.abs(window.innerHeight-t),l=window.innerHeight!==t,d=window.innerWidth!==n;if("phone"===e.deviceType&&(!d&&l&&s<=150||!l&&!d)||"desktop"===e.deviceType&&!l&&!d){window.removeEventListener("resize",o),a=!1;return}r?.("windowResized"),window.removeEventListener("resize",o),a=!1};window.addEventListener("resize",o),a=!0}},447982:function(e,t,n){n.d(t,{Z:()=>o});var i=n(712655),a=n(547314),r=n(479901);function o(e,t,n){let o;if((0,i.Z)()){switch(n){case"BOOL":o={type:"BOOL",value:"boolean"==typeof t?t:null};break;case"STRING":o={type:"STRING",value:"string"==typeof t?t:null};break;case"I16":case"I32":case"I64":o={type:n,value:"number"==typeof t?t:null};break;default:(0,a.qu)("Invalid binary annotation type");return}if(null===o.value)return void(0,a.qu)("Invalid binary annotation value");(0,r.an)(e,o),(0,a.qu)(`Add binary annotation: { ${e}: ${o.value} }`)}}},886063:function(e,t,n){n.d(t,{Z:()=>l});var i=n(712655),a=n(547314),r=n(479901),o=n(689784),s=n(178355);function l(e,t){if(!(0,i.Z)())return;let n=(0,r.Of)();if(n){let i=(0,r.e)(),l=i.indexOf(e);l>-1&&((0,r.a7)()<t&&(0,r.cg)(t),(0,r.xb)(e,t),(0,a.eR)(i[l],n?.name),(0,a.$v)({eventName:`${n?.name}.constraint.${e}`,value:t}),(0,a.$v)({eventName:`constraint.${e}`,value:t,tags:{handler:(0,s.H)()}}),(0,a.qu)(`Complete constraint: ${e} at ${Math.floor(t)}ms`),(0,o.Z)(e))}else{let n=(0,r.Gf)();n[e]||(n[e]=t)}}},208622:function(e,t,n){n.d(t,{F:()=>d,Z:()=>l});let i=[{handler:"sterling/advertiser/[advertiserId]/audiences.js",config:{dWeb:{auth:{clientNavigation:{name:"STERLING_AUDIENCES_PAGE_USER_NAV",id:224,constraints:["NavigationCompletev4","audiencesTableRendered"]}}}}},{handler:["sterling/advertiser/[advertiserId]/ads/edit.js"],config:{dWeb:{auth:{initialPageLoad:{name:"STERLING_ADSEDIT_MAIN_PAGELOAD",id:204,constraints:["NavigationCompletev4","editFlowRendered"]},clientNavigation:{name:"STERLING_EDIT_FLOW_USER_NAV",id:225,constraints:["NavigationCompletev4","editFlowRendered"]}}}}},{handler:["sterling/advertiser/[advertiserId]/ads/create.js","sterling/advertiser/[advertiserId]/ads/duplicate.js"],config:{dWeb:{auth:{initialPageLoad:{name:"STERLING_ADSCREATE_MAIN_PAGELOAD",id:204,constraints:["NavigationCompletev4","createFlowRendered"]},clientNavigation:{name:"STERLING_ADSCREATE_USER_NAV",id:233,constraints:["NavigationCompletev4","createFlowRendered"]}}}}},{handler:"sterling/advertiser/[advertiserId]/reporting/[entityType].js",config:{dWeb:{auth:{initialPageLoad:{name:"STERLING_REPORTING_DETAILS_PAGELOAD",id:218,constraints:["NavigationCompletev4","reportingTableRendered","reportingMetricsGraphDataFetched"]},clientNavigation:{name:"STERLING_REPORTING_DETAILS_USER_NAV",id:227,constraints:["NavigationCompletev4","reportingTableRendered","reportingMetricsGraphDataFetched"]}}}}},{handler:"sterling/advertiser/[advertiserId].js",config:{dWeb:{auth:{initialPageLoad:{name:"STERLING_REPORTING_OVERVIEW_PAGELOAD",id:219,constraints:["NavigationCompletev4","activeCampaignsTableRendered","accountActivityRendered"]},clientNavigation:{name:"STERLING_REPORTING_OVERVIEW_USER_NAV",id:226,constraints:["NavigationCompletev4","activeCampaignsTableRendered","accountActivityRendered"]}}}}},{handler:["sterling/advertiser/[advertiserId]/bulk_editor/[page].js"],config:{dWeb:{auth:{initialPageLoad:{name:"STERLING_BULKEDITOR_HISTORY_PAGELOAD",id:231,constraints:["NavigationCompletev4","bulkHistoryRendered"]},clientNavigation:{name:"STERLING_BULKEDITOR_HISTORY_USER_NAV",id:232,constraints:["NavigationCompletev4","bulkHistoryRendered"]}}}}}],a=[{handler:["www/pin/[id]/sent.js","www/pin/[id].js"],config:{mWeb:{unauth:{initialPageLoad:{name:"PIN_PAGE_INTERACTIVE",id:113,constraints:["ReduxStoreInitialized","PinPageMainImageRendered"]},clientNavigation:{name:"client_route_push_unauth_pin",id:null,constraints:["PinPageMainImageRendered"]}},auth:{initialPageLoad:{name:"initial_page_load_auth_pin",id:null,constraints:["ReduxStoreInitialized","PinPageMainImageRendered"],annotateExperiments:["auth_mweb_graphql_pin_page"]},clientNavigation:{name:"PIN_CLOSEUP_DETAILS",id:13,constraints:["PinPageMainImageRendered"],annotateExperiments:["auth_mweb_graphql_pin_page","closeup_dweb_side_by_side_redesign_fast_follow"]}}},dWeb:{unauth:{initialPageLoad:{name:"PIN_PAGE_INTERACTIVE",id:113,constraints:["ReduxStoreInitialized","PinPageMainImageRendered"]},clientNavigation:{name:"client_route_push_unauth_pin",id:null,constraints:["PinPageMainImageRendered"]}},auth:{initialPageLoad:{name:"initial_page_load_auth_pin",id:null,constraints:["ReduxStoreInitialized","image","resource","button"],segments:{product_detail_page:{name:"PRODUCT_DETAILS_INTERACTIVE"},product_detail_page_plus:{name:"PRODUCT_DETAILS_PLUS_INTERACTIVE"}}},clientNavigation:{name:"PIN_CLOSEUP_DETAILS",id:13,constraints:["button","image","resource"],segments:{story_pin:{name:"STORY_PIN_CLOSEUP",constraints:["button","resource","image","video"]},product_detail_page:{name:"PRODUCT_DETAILS_RENDER",constraints:["button","description","image","shopButton","thumbnailsLoaded"]},product_detail_page_plus:{name:"PRODUCT_DETAILS_PLUS_RENDER",constraints:["button","description","image","shopButton","thumbnailsLoaded"]}}}}}}},{handler:["www/index.js","www/homefeed.js"],config:{unified:{auth:{initialPageLoad:{name:"HOME_FEED_PINTERACTIVE",id:19,constraints:["ReduxStoreInitialized","VisuallyComplete"],annotateExperiments:["web_sw_with_early_hydration","web_install_sw_on_unauth_landing","web_sw_without_workbox"]},clientNavigation:{name:"HOME_FEED_RENDER",id:2,constraints:["VisuallyComplete"]}}}}},{handler:"www/search/[scope].js",config:{unified:{auth:{clientNavigation:{name:"SEARCH_FEED_RENDER",id:3,constraints:["VisuallyComplete"]}}}}},{handler:"www/search.js",config:{mWeb:{auth:{clientNavigation:{name:"SEARCH_TAB_RENDER",id:25,constraints:["RenderSearchLandingPageBubbles"]}}}}},{handler:"www/[username]/[slug].js",config:{unified:{unauth:{initialPageLoad:{name:"BOARD_PAGE_INTERACTIVE",id:114,constraints:["ReduxStoreInitialized","VisuallyComplete"]}},auth:{initialPageLoad:{name:"initial_app_load_auth_board",id:null,constraints:["ReduxStoreInitialized","VisuallyComplete"]},clientNavigation:{name:"client_route_push_auth_board",id:null,constraints:["VisuallyComplete"]}}}}},{handler:"www/for-you/[boardId].js",config:{unified:{auth:{initialPageLoad:{name:"AUTOMAGICAL_BOARD_PAGE_INTERACTIVE",id:129,constraints:["ReduxStoreInitialized","VisuallyComplete"]}}}}},{handler:"www/ideas/[interest]/[id].js",config:{unified:{unauth:{initialPageLoad:{name:"TOPIC_PAGE_INTERACTIVE",id:119,constraints:["ReduxStoreInitialized","idea_module_loaded"]}}}}},{handler:"www/business/hub.js",config:{dWeb:{auth:{initialPageLoad:{name:"BIZHUB_PINTERACTIVE",id:607,constraints:["ReduxStoreInitialized"]},clientNavigation:{name:"BIZHUB_PAGE_RENDER",id:608,constraints:["NavigationCompletev4"]}}}}},{handler:"www/pin/[id]/visual-search.js",config:{dWeb:{auth:{initialPageLoad:{name:"VISUAL_SEARCH_PAGE_RENDER",id:44,constraints:["VisualSearchImageRender","VisualSearchFeedRender"]},clientNavigation:{name:"VISUAL_SEARCH_PAGE_RENDER",id:44,constraints:["VisualSearchImageRender","VisualSearchFeedRender"]}}}}},{handler:["www/[username].js","www/[username]/_boards.js","www/[username]/_created.js","www/[username]/_saved.js","www/[username]/_pins.js","www/[username]/_profile.js"],config:{unified:{auth:{initialPageLoad:{name:"OTHER_PROFILE_PAGE_LOAD",id:122,constraints:["ReduxStoreInitialized","VisuallyComplete"],segments:{self_profile:{name:"SELF_PROFILE_PAGE_LOAD"},other_profile_no_pins:{name:"OTHER_PROFILE_NO_PINS_PAGE_LOAD"},own_profile_no_pins:{name:"OWN_PROFILE_NO_PINS_PAGE_LOAD"},own_profile:{name:"OWN_PROFILE_PAGE_LOAD"}}},clientNavigation:{name:"OTHER_PROFILE",id:15,constraints:["VisuallyComplete"],segments:{self_profile:{name:"SELF_PROFILE"},own_profile:{name:"OWN_PROFILE"},own_profile_no_pins:{name:"OWN_PROFILE_NO_PINS"},other_profile_no_pins:{name:"OTHER_PROFILE_NO_PINS"}}}},unauth:{initialPageLoad:{name:"USER_PAGE_INTERACTIVE",id:115,constraints:["ReduxStoreInitialized","VisuallyComplete"]}}}}},{handler:"www/business/catalogs/[catalog_id]/data-sources.js",config:{dWeb:{auth:{clientNavigation:{name:"MERCHANT_CATALOGS_DATA_SOURCES_USER_NAV",id:228,constraints:["NavigationCompletev4"]}}}}},{handler:"www/business/catalogs/[catalog_id]/product-groups.js",config:{dWeb:{auth:{clientNavigation:{name:"MERCHANT_CATALOGS_PRODUCT_GROUPS_USER_NAV",id:229,constraints:["NavigationCompletev4"]}}}}},{handler:"www/business/catalogs/[catalog_id]/listings.js",config:{dWeb:{auth:{clientNavigation:{name:"MERCHANT_CATALOGS_LISTINGS_USER_NAV",id:230,constraints:["NavigationCompletev4"]}}}}},{handler:"www/business/catalogs/[catalog_id]/products.js",config:{dWeb:{auth:{clientNavigation:{name:"MERCHANT_CATALOGS_LISTINGS_USER_NAV",id:230,constraints:["NavigationCompletev4"]}}}}},{handler:"www/collage-creation-tool.js",config:{dWeb:{auth:{initialPageLoad:{name:"COLLAGE_CREATION_PAGE_LOAD",id:130,constraints:["ReduxStoreInitialized","VisuallyComplete"]},clientNavigation:{name:"COLLAGE_CREATION_USER_NAV",id:53,constraints:["VisuallyComplete"]}}}}}];var r=n(547314),o=n(178355);let s=[...a,...i];function l({isAuthenticated:e,isInitialPageLoad:t,isMobile:n}){let i=(0,o.H)(),a=s.find(e=>Array.isArray(e.handler)?e.handler.includes(i):i===e.handler),l=a?.config,d=l?.unified;if(d||(d=n?l?.mWeb:l?.dWeb),d){let n=e?d.auth:d.unauth;if(n){if(t&&n.initialPageLoad)return(0,r.qu)("Found isInitialPageLoad config"),(0,r.qu)(n.initialPageLoad),{...n.initialPageLoad};else if(!t&&n.clientNavigation)return(0,r.qu)("Found clientNavigation config"),(0,r.qu)(n.clientNavigation),{...n.clientNavigation}}}return(0,r.qu)(`No config found for ${i} :(`),null}let d=({isAuthenticated:e,isInitialPageLoad:t,isMobile:n,segment:i})=>{let a=l({isAuthenticated:e,isInitialPageLoad:t,isMobile:n});return("DEFAULT"===i?a?.name:a?.segments?.[i]?.name)??null}},956712:function(e,t,n){n.d(t,{mn:()=>E,XJ:()=>o.Z,aA:()=>h,ZP:()=>T,Lg:()=>I,cB:()=>w});var i=n(482070),a=n(970414),r=n(344316),o=n(447982),s=n(484243),l=n(774254),d=n(712655),u=n(886063),m=n(208622),c=n(547314),_=n(448021),g=n(479901),f=n(689784),p=n(617120),v=n(178355);function E(){(0,c.qu)("Reset PWT configs"),(0,g.mn)(),(0,_.kA)()}function h(e){if(!(0,d.Z)())return;let t=(0,g.Of)(),n=(0,g.e)();t?((0,c.DM)(e,t.name),n.includes(e)||((0,g.gM)(e),(0,c.qu)(`Add constraint: ${e}`))):(0,c.jn)({errorName:"add_constraint_while_no_PWT_in_progress",errorDetailsTag:e})}function w(e){if(!(0,d.Z)())return;let t=(0,g.Of)(),n=(0,g.e)();if(t&&n.includes("VisuallyComplete"))if((0,c.qu)("Set visually complete result"),(0,c.qu)("Image resource timings: ",e),(0,g.TF)(e),0===e.length)(0,i.Z)("visuallyComplete_noImages");else{let t=Math.max(...e.map(e=>e.responseEnd||0));performance.mark("complete_constraint__VisuallyComplete",{startTime:t}),(0,l.Z)("constraint__VisuallyComplete",(0,g.Eq)(),t)}}function I(e){if(!(0,d.Z)())return;let t=(0,g.Of)(),n=(0,g.pX)(),i=(0,g.fC)();if(t&&t.name.toLowerCase()!==e.toLowerCase()){let a=[...n,...t.annotateExperiments||[]],{isAuthenticated:r,deviceType:o}=(0,p.bC)(),s=(0,m.F)({isAuthenticated:r,isInitialPageLoad:"initial_app_load"===i,isMobile:"phone"===o,segment:e});if(!s){(0,c.qu)(`Segment action name not found for segment: ${e}`),(0,c.jn)({errorName:"segment_action_name_not_found",errorDetailsTag:e});return}(0,c.T0)({abortReason:"segmentChange",pwtName:t.name,annotateExperiments:a});let{segments:l,constraints:d}=t,u=l?.[e],_=u?.constraints;if(_){let e=new Set(_),t=new Set(d);[...(0,g.e)()].forEach(t=>{e.has(t)||(0,f.Z)(t)}),_.forEach(e=>{t.has(e)||h(e)}),(0,g.Gp)(e)}t.name=s,(0,c.qu)(`Set segment to ${e}. PWT action name: ${s}`),(0,c.sd)({pwtName:t.name,annotateExperiments:[...n,...t.annotateExperiments||[]]})}else(0,c.jn)({errorName:"set_segment_while_no_PWT_in_progress",errorDetailsTag:e})}function T({requestContext:e}){try{var t;if(!(0,d.Z)())return void(0,c.El)({eventName:"unsupportedPWTBrowser"});(0,c.El)({eventName:"supportedPWTBrowser"}),(0,r.Z)(i.Z),t=i.Z,a.Z.onSessionPause(()=>t("sessionPaused"));let n=new PerformanceObserver(e=>{e&&e.getEntries&&e.getEntries().forEach(e=>{if(e&&e.name&&!e.name.startsWith("--")){if(e.name.includes("complete_constraint__"))(0,u.Z)(e.name.split("complete_constraint__")[1]||"",e.startTime);else if(e.name.startsWith("pwt__")){let t=e.name.slice(5);(0,_.lj)()[t]||(0,_.fd)(t,{name:t,entryType:e.entryType,startTime:e.startTime,duration:e.duration})}}})});n.observe&&n.observe({type:"mark",buffered:!0});let o=new PerformanceObserver(e=>{e&&e.getEntries&&e.getEntries().forEach(e=>{if(e&&e.name&&!e.name.startsWith("--")){let t=(0,g.zU)();if(e.name.startsWith("pwt__")){let n=e.name.slice(5);t[n]||(t[n]={name:n,entryType:e.entryType,startTime:e.startTime,duration:e.duration})}}})});o.observe&&o.observe({type:"measure",buffered:!0});let m=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{let{rtt:t}=window.navigator.connection||{};if(t&&"number"==typeof t){let n=e.responseEnd-t/2;n>0&&(0,s.Z)("client_chunkEndTime",n)}(0,l.Z)("dom_complete",e.startTime,e.domComplete),(0,l.Z)("dom_interactive",e.startTime,e.domInteractive),(0,l.Z)("dom_content_loaded_event_end",e.startTime,e.domContentLoadedEventEnd),(0,l.Z)("load_event_end",e.startTime,e.loadEventEnd),(0,l.Z)("response_start",e.startTime,e.responseStart),(0,l.Z)("response_duration",e.responseStart,e.responseEnd)})});m.observe&&m.observe({type:"navigation",buffered:!0});let f=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{!(0,g.Yb)()[e.identifier]&&((0,g._A)(e.identifier,e),(e.identifier.includes("MainPinImage")||e.identifier.includes("closeupImage"))&&((0,l.Z)(`element_timing_${e.identifier}`,0,e.renderTime),(0,s.Z)(`element_timing_${e.identifier}`,e.renderTime)))})});f.observe({type:"element",buffered:!0});let p=[];e.experimentsClient?.checkExperiment("web_soft_navigation_origin_trial")?.anyEnabled&&(p=function(){let e=[];try{let t=new PerformanceObserver(e=>{for(let t of e.getEntries()){let e=t.navigationId;e&&(0,c.$v)({eventName:"soft_navigation",value:t.duration,tags:{navigationId:String(e),handler:(0,v.H)()}})}});t.observe({type:"soft-navigation",includeSoftNavigationObservations:!0,buffered:!0}),e.push(t);let n=new PerformanceObserver(e=>{for(let t of e.getEntries()){let e=t.navigationId;e&&(0,c.$v)({eventName:"soft_navigation.first_contentful_paint",value:t.startTime,tags:{navigationId:String(e),handler:(0,v.H)()}})}});n.observe({type:"first-contentful-paint",includeSoftNavigationObservations:!0,buffered:!0}),e.push(n);let i=new PerformanceObserver(e=>{for(let t of e.getEntries()){let e=t.navigationId;e&&(0,c.$v)({eventName:"soft_navigation.largest_contentful_paint",value:t.startTime,tags:{navigationId:String(e),size:String(t.size??0),handler:(0,v.H)()}})}});i.observe({type:"largest-contentful-paint",includeSoftNavigationObservations:!0,buffered:!0}),e.push(i);let a=new PerformanceObserver(e=>{for(let t of e.getEntries()){let{navigationId:e,renderTime:n,loadTime:i,size:a}=t;e&&(0,c.$v)({eventName:"soft_navigation.interaction_contentful_paint",value:n??i??t.startTime,tags:{navigationId:String(e),size:String(a??0),handler:(0,v.H)()}})}});a.observe({type:"interaction-contentful-paint",includeSoftNavigationObservations:!0,buffered:!0}),e.push(a);let r=new PerformanceObserver(e=>{for(let t of e.getEntries()){let{navigationId:e,value:n}=t;e&&(0,c.yI)({eventName:"soft_navigation.layout_shift",value:(n??0)*1e3,tags:{navigationId:String(e),handler:(0,v.H)()}})}});r.observe({type:"layout-shift",includeSoftNavigationObservations:!0,buffered:!0}),e.push(r);let o=new PerformanceObserver(e=>{for(let t of e.getEntries()){let e=t.navigationId;e&&(0,c.$v)({eventName:"soft_navigation.event_timing",value:t.duration,tags:{navigationId:String(e),name:t.name,handler:(0,v.H)()}})}});o.observe({type:"event-timing",includeSoftNavigationObservations:!0,buffered:!0}),e.push(o),(0,c.qu)("Soft navigation observers initialized")}catch(e){(0,c.jn)({errorName:e})}return e}()),window.addEventListener("beforeunload",()=>{n.disconnect(),m.disconnect(),f.disconnect(),p.forEach(e=>e.disconnect())})}catch(e){(0,c.jn)({errorName:e instanceof Error?e.message:String(e)})}(0,g.Em)(e.experimentsClient?.checkExperiment("web_log_generic_feed_pwt")?.anyEnabled??!1)}},23641:function(e,t,n){n.d(t,{Nx:()=>m,Yl:()=>g,l7:()=>_,qS:()=>f,rt:()=>p,sX:()=>c});var i=n(667294),a=n(482070),r=n(447982),o=n(774254),s=n(712655),l=n(956712),d=n(479901),u=n(689784);let m=(e,t)=>{(0,s.Z)()&&(t?performance.mark(`complete_constraint__${e}`,{startTime:t}):performance.mark(`complete_constraint__${e}`),(0,o.Z)(`constraint__${e}`,(0,d.Eq)(),t??performance.now()))},c=e=>{(0,a.Z)(e)},_=e=>{(0,u.Z)(e)},g=e=>{(0,l.Lg)(e)},f=e=>{(0,i.useEffect)(()=>{(0,l.Lg)(e)},[e])},p=(e,t,n)=>{(0,r.Z)(e,t,n)}},689784:function(e,t,n){n.d(t,{Z:()=>g});var i=n(746868),a=n(267398),r=n(217472),o=n(240083),s=n(447982),l=n(712655),d=n(547314),u=n(448021),m=n(479901),c=n(617120),_=n(178355);function g(e){if(!(0,l.Z)())return;let t=(0,m.Of)();if(t){let n=(0,m.e)().indexOf(e);if(n>-1){if((0,m.O3)(n),(0,d.qu)(`Remove constraint: ${e}. Remaining constraints: [${(0,m.e)().join(", ")}]`),0===(0,m.e)().length){let e=(0,m.a7)(),n=(0,m.Eq)(),l=e-n,g=[...(0,m.pX)(),...t.annotateExperiments||[]];(0,d.fv)({pwtName:t.name,annotateExperiments:g}),(0,d.$v)({eventName:t.name,value:l}),(0,d.$v)({eventName:"complete",value:l,tags:{handler:(0,_.H)()}});let f=(0,c.bC)(),p=(0,m.fI)();if((0,m.nn)()&&(48===t.id||"FEED_RENDER"===t.name)){let e=(0,i.BE)(),t=e?.viewType,n=e?.viewParameter;null==t||void 0===t||p["view.type"]||(0,s.Z)("view.type",t,"I32"),null==n||void 0===n||p["view.parameter"]||(0,s.Z)("view.parameter",n,"I32")}let v={type:"surface",surface:t.name,id:t.id,navigationType:(0,m.fC)(),isAuthenticated:f.isAuthenticated},E=(0,m.Wj)(),h=(0,a.W)({annotateExperiments:g,annotations:{},binaryAnnotations:(0,m.fI)(),constraintMap:(0,m.xY)(),endTime:e,imageTimings:(0,m.h)(),isV4Logger:!0,metricId:v,pwtMeasures:(0,m.zU)(),pwtStaticContext:f,startTime:n,traceId:E,spans:[{name:`Report_PWT_Complete_${t.name}`,startTime:n,endTime:e,annotationMap:{},binaryAnnotationMap:{},id:(0,o.Z)(),parentId:E}]});(0,d.qu)(`All constraints complete. ${t.name} PWT completed at ${Math.floor(e)}ms. PWT duration: ${Math.floor(l)}ms`),(0,d.qu)("Result:",h),(0,r.Z)({metricId:v,pwtStaticContext:f,result:h,isV4Logger:!0,annotateExperiments:g}),(0,m.mn)(),(0,u.kA)()}}else(0,d.jn)({errorName:"constraint_completed_not_in_PWT_constraint_list",pwtName:t.name,errorDetailsTag:e})}else(0,d.jn)({errorName:"remove_constraint_while_no_PWT_in_progress",errorDetailsTag:e}),(0,m.qH)(e)}},279794:function(e,t,n){n.d(t,{Z:()=>a});var i=n(667294);let a=(e,t)=>{let n=(0,i.useRef)(()=>{});(0,i.useEffect)(()=>{n.current=e},[e]),(0,i.useEffect)(()=>{if(null===t)return()=>{};let e=setInterval(()=>n.current(),t);return()=>clearInterval(e)},[t])}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/46683-eccfd4868658c8ad.mjs.map