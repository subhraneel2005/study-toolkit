(self.modernJsonp=self.modernJsonp||[]).push([["81560"],{654471:function(e,t,r){r.r(t),r.d(t,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"TopicImageWithText_topic",selections:[{alias:"background_color",args:null,kind:"ScalarField",name:"backgroundColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:"follower_count",args:null,kind:"ScalarField",name:"followerCount",storageKey:null},{alias:null,args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}],storageKey:'images(spec:"236x")'}],type:"Interest",abstractKey:null};n.hash="b5b71fb4390c1d3835e468a25f687669";let i=n},176923:function(e,t,r){r.r(t),r.d(t,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"TopicRepFragment_topic",selections:[{alias:"is_followed",args:null,kind:"ScalarField",name:"isFollowed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"TopicImageWithText_topic"}],type:"Interest",abstractKey:null};n.hash="e5a0b7dce2aa2313e4cf2c9871cbedf7";let i=n},759271:function(e,t,r){r.d(t,{Z:()=>a});var n=r(501010),i=r(774838),o=r(739405);function a(){let{isAuthenticated:e}=(0,i.B)(),t=(0,o.ml)(),{checkExperiment:r}=(0,n.Z)();return{mWebCloseupRedesignEnabled:e&&t&&r("mweb_closeup_redesign").anyEnabled,mWebCloseupRedesignExpGroup:r("mweb_closeup_redesign").group}}},568736:function(e,t,r){function n(e){return[0,24,21,26].includes(e)}function i({articleType:e,id:t,title:r}){let n=r.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\’'"]/g,"").trim().replace(/\s+/g,"-");return"today"===e?`/today/shop/${n}/${t}/`:`/discover/article/${n}/${t}/`}r.d(t,{x:()=>i,y:()=>n})},758714:function(e,t,r){r.d(t,{DW:()=>o,I:()=>i,Rn:()=>l,e3:()=>c,fO:()=>h,oo:()=>n,rj:()=>p,rk:()=>d,t7:()=>s,zI:()=>a});let n=e=>{let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t&&[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]},i=.18,o=(e,t,r)=>.2126*(e/255)**2.2+.7151*(t/255)**2.2+.0721*(r/255)**2.2,a=e=>{let t=e.replace("#",""),r=parseInt(t.substr(0,2),16);return(299*r+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3<155},l=({hexColor:e,saturationMultiplier:t,brightnessMultiplier:r,minSaturationClamp:i,mixVal:o=1,minBrightnessClamp:a=0})=>{let l=n(e);null===l&&(l=[229,229,224]);let s=((e,t,r)=>{let n=Math.max(e/=255,t/=255,r/=255),i=n-Math.min(e,t,r),o=0;return 0!==i&&(o=(n===e?(t-r)/i+6*(t<r):n===t?(r-e)/i+2:(e-t)/i+4)*60)<0&&(o+=360),{h:o,s:0===n?0:i/n,b:n}})(...l),d=(e,t,r)=>Math.max(t,Math.min(e,r));s.s=d(s.s*(1+t),i,1),s.b=d(s.b*(1+r),a,1);let c=(({h:e,s:t,b:r})=>{let n=r*t,i=n*(1-Math.abs(e/60%2-1)),o=r-n,a=0,l=0,s=0;return e<60?(a=n,l=i):e<120?(a=i,l=n):e<180?(l=n,s=i):e<240?(l=i,s=n):e<300?(a=i,s=n):(a=n,s=i),{r:Math.round((a+o)*255),g:Math.round((l+o)*255),b:Math.round((s+o)*255)}})({...s}),u=e=>({r:Math.round(c.r*o+e*(1-o)),g:Math.round(c.g*o+e*(1-o)),b:Math.round(c.b*o+e*(1-o))}),h=u(0),p=u(255);return[[h.r,h.g,h.b],[p.r,p.g,p.b]]};function s(e){if("string"!=typeof e)return{r:0,g:0,b:0,a:0};let t=e.trim(),r="rgba"===t.slice(0,4).toLowerCase(),n=!r&&"rgb"===t.slice(0,3).toLowerCase();if(!r&&!n)return{r:0,g:0,b:0,a:0};let i=t.indexOf("("),o=t.indexOf(")",i);if(-1===i||-1===o)return{r:0,g:0,b:0,a:0};let a=t.slice(i+1,o).split(",").map(e=>e.trim());if(r&&4!==a.length||n&&3!==a.length)return{r:0,g:0,b:0,a:0};let[l,s,d,c]=a,u=Number(l),h=Number(s),p=Number(d),f=r?Number(c):1;return[u,h,p].some(e=>Number.isNaN(e))||r&&Number.isNaN(f)?{r:0,g:0,b:0,a:0}:{r:u,g:h,b:p,a:f}}function d(e,t){let r=e.a+t.a*(1-e.a);return 0===r?{r:0,g:0,b:0,a:0}:{r:Math.round((e.r*e.a+t.r*t.a*(1-e.a))/r),g:Math.round((e.g*e.a+t.g*t.a*(1-e.a))/r),b:Math.round((e.b*e.a+t.b*t.a*(1-e.a))/r),a:r}}let c=e=>`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`,u=e=>e.toString(16).padStart(2,"0"),h=(e,t)=>{let r=n(e);if(!r)throw Error(`Invalid hex color: ${e} for lightenHexByPercentage`);let[i,o,a]=r,l=Math.max(0,Math.min(100,t))/100,s=Math.round(i+(255-i)*l),d=Math.round(o+(255-o)*l),c=Math.round(a+(255-a)*l);return`#${u(s)}${u(d)}${u(c)}`},p=(e,t)=>c(((e,t)=>{let r=n(e);if(!r)throw Error(`Invalid hex color: ${e} for hexToRgba`);let[i,o,a]=r;return{r:i,g:o,b:a,a:Math.max(0,Math.min(1,t))}})(e,t))},654380:function(e,t,r){r.d(t,{HI:()=>a,f8:()=>s,hm:()=>l,sH:()=>o});var n=r(391995),i=r(785893);let o=({children:e})=>(0,i.jsx)(n.xu,{bottom:!0,left:!0,padding:4,position:"absolute",right:!0,children:e}),a=({children:e})=>(0,i.jsx)(n.xu,{padding:2,children:e}),l=({children:e})=>(0,i.jsx)(n.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",position:"absolute",top:!0,width:"100%",children:e}),s=({children:e})=>(0,i.jsx)(n.xu,{left:!0,padding:4,position:"absolute",right:!0,top:!0,children:e})},90325:function(e,t,r){r.d(t,{Ec:()=>d,IA:()=>g,LX:()=>c,Mf:()=>m,SF:()=>l,_e:()=>s,h_:()=>y,l0:()=>a,ml:()=>o,pQ:()=>w,q4:()=>i,zn:()=>n});let n=e=>["feed_card_default","feed_card_video"].includes(e),i=2/3,o=2/3,a=1/3,l="36px",s="28px",d=.4,c=.65,u={0:"start",1:"center",2:"end"},h={web:{0:"16",1:"20",2:"24",3:"24"},mweb:{0:"12",1:"16",2:"18",3:"20"}},p={1:"italics",0:"normal"},f={1:"bold",0:"normal"},m=({color:e,font_style:t,font_weight:r,horizontal_alignment:n,size:i},o)=>({color:e,fontStyle:p[t??0],fontWeight:f[r??1],horizontalAlignment:u[n??0],fontSize:h[o][i??0]+"px"}),g=e=>e<=280?1.25:e>280&&e<=540?.75:e>540&&e<1024?c:d,x={1:"default",2:"subtle",3:"success",4:"error",5:"warning",6:"inverse",7:"dark",8:"light",9:"default"},b=x[8],v={1:"primary",2:"secondary",3:"transparent",4:"primary",5:"light",6:"dark"},_=v[2],w=e=>{if(e){if(e.button_style&&e.button_style in v)return v[e.button_style]||_;if(e.button_background_color){if("#e60023"===e.button_background_color.toLowerCase())return v[1]||_;else if("#0074e8"===e.button_background_color.toLowerCase())return v[4]||_}}return _},y=(e,t)=>{if(e){if(e.title_text_customization?.color&&(e.title_text_customization.color=e.title_text_customization.color.toLowerCase()),e.title_text_customization?.text_color&&e.title_text_customization?.text_color in x)return x[e.title_text_customization?.text_color]||b;if(e.title_text_customization?.color){if("#111111"===e.title_text_customization.color||"#000000"===e.title_text_customization.color)return x[7]||b;else if("#ffffff"===e.title_text_customization.color)return x[8]||b}}if(t)if("white"===t)return x[8]||b;else return x[7]||b;return b}},150147:function(e,t,r){r.d(t,{Z:()=>I});var n=r(686659),i=r(667294),o=r(763387),a=r.n(o),l=r(391995);function s(e,t){return Math.max(0,((t<=0?0:Math.ceil(e/t))-1)*t)}function d(e,t,r){return r<=1?Math.max(0,Math.min(e,t-1)):Math.min(Math.max(0,Math.floor(e/r)*r),s(t,r))}var c=r(24246),u=r(785893);let h="12px";function p({containerRef:e,carouselClassName:t,currentIndex:r=0,itemCount:o,itemHeight:a,itemsPerPage:p,onIndexChange:f,showNavigationArrows:m=!1}){(0,i.useEffect)(()=>{(0,n.Z)("CarouselOverlay","/app/packages/gestaltExtensions/Carousel/CarouselOverlay.tsx")},[]);let g=(0,i.useRef)(null),x=(0,c.Z)(),[b,v]=(0,i.useState)(void 0),[_,w]=(0,i.useState)(0);(0,i.useLayoutEffect)(()=>{let r,n=!1,i=()=>{if(n)return;let o=e.current,a=o?.querySelector(`.${t}`),l=a?.querySelector("li"),s=l?.querySelector('[data-test-id="pinrep-image"]')||l?.querySelector("img");if(s&&o&&a){let e=s.getBoundingClientRect(),t=o.getBoundingClientRect();if(e.height>0){v(e.height),w(e.top-t.top),n=!0;return}}r=setTimeout(i,100)};return i(),()=>{n=!0,r&&clearTimeout(r)}},[e,t]);let y=b??a,S=y?`calc(${y}px / 2 - 18px)`:"calc(50% - 18px)",j=(0,i.useCallback)(()=>{if(p&&p>1){let e=Math.max(0,d(r,o,p)-p);f?.(e)}else{let e=Math.max(0,r-1);f?.(e)}},[r,o,p,f]),k=(0,i.useCallback)(()=>{if(p&&p>1){let e=d(r,o,p),t=Math.min(s(o,p),e+p);f?.(t)}else{let e=Math.min(o-1,r+1);f?.(e)}},[r,o,p,f]),{showPrevious:I,showNext:P}=(()=>{if(!m)return{showPrevious:!1,showNext:!1};if(p&&p>1){let e=d(r,o,p);return{showPrevious:e>0,showNext:e<s(o,p)}}return{showPrevious:r>0,showNext:r<o-1}})();return(0,u.jsxs)(l.xu,{ref:g,dangerouslySetInlineStyle:{__style:{height:y?`${y}px`:"100%",pointerEvents:"none",top:`${_}px`}},left:!0,position:"absolute",right:!0,zIndex:new l.Ry(100),children:[(0,u.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{left:h,pointerEvents:"auto",top:S}},opacity:100*!!I,position:"absolute",children:(0,u.jsx)(l.hU,{accessibilityLabel:x._('View Previous', 'CarouselOverlay.scrollButton.viewPrevious', 'Accessibility label for button to navigate to the previous item in the carousel'),bgColor:"default",dataTestId:"carousel-overlay-previous",icon:"chevron-left",onClick:j,size:"md"})}),(0,u.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",right:h,top:S}},opacity:100*!!P,position:"absolute",children:(0,u.jsx)(l.hU,{accessibilityLabel:x._('View Next', 'CarouselOverlay.scrollButton.viewNext', 'Accessibility label for button to navigate to the next item in the carousel'),bgColor:"default",dataTestId:"carousel-overlay-next",icon:"chevron-right",onClick:k,size:"md"})})]})}let f={bottom:"15px",boxShadow:"0 1px 0px rgba(0, 0, 0, 0.1)",left:0,position:"absolute",right:0};function m({index:e,isActive:t,mode:r,onClick:n,label:i}){return(0,u.jsx)(l.xu,{height:8,width:8,children:(0,u.jsx)(l.iP,{accessibilityLabel:i||`Navigate to slide ${e+1}`,onTap:()=>n(e),rounding:"circle",children:(0,u.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:t?"single"===r?"var(--sema-color-background-default)":"var(--sema-color-background-inverse)":"single"===r?"rgba(255, 255, 255, 0.6)":"var(--sema-color-background-secondary)",transition:"background-color 0.2s ease"}},height:8,rounding:"circle",width:8})})},e)}function g({currentIndex:e,itemCount:t,itemLabels:r,itemsPerPage:o,mode:a,onNavigateToIndex:s}){(0,i.useEffect)(()=>{(0,n.Z)("FallbackScrollMarkers","/app/packages/gestaltExtensions/Carousel/FallbackScrollMarkers.tsx")},[]);let c=o?d(e,t,o):e,h=(0,i.useCallback)(e=>{s(e)},[s]),p=o?Math.ceil(t/o):t,g=o?o<=1?Math.max(0,Math.min(c,t-1)):Math.floor(d(c,t,o)/o):c;return p<=1?null:(0,u.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{..."single"===a&&f}},"data-test-id":"scroll-markers-fallback",display:"flex",justifyContent:"center",zIndex:"single"===a?new l.Ry(100):void 0,children:(0,u.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{display:"grid",gridAutoColumns:"1rem",gridAutoFlow:"column",placeItems:"center"}},width:"fit-content",children:[...Array(p).keys()].map(e=>{let t=o?e*o:e;return(0,u.jsx)(m,{index:t,isActive:e===g,label:r?.[t],mode:a,onClick:h},e)})})})}var x=r(774838);let b=function({mode:e,forceShowNavigationButtons:t,showNavigationButtons:r=!1,showScrollMarkers:n=!1}){let{userAgent:{browserName:i,browserVersion:o}}=(0,x.B)(),a="Chrome"===i&&Number(o.split(".")[0])>=135&&("undefined"==typeof window||void 0===window.Cypress);return"multi"===e?{enableCssScrollButtons:!1,enableCssScrollMarkers:!1,enableFallbackScrollButtons:r,enableFallbackScrollMarkers:n}:a&&void 0===t?{enableCssScrollButtons:r,enableCssScrollMarkers:n,enableFallbackScrollButtons:!1,enableFallbackScrollMarkers:!1}:{enableCssScrollButtons:!1,enableCssScrollMarkers:!1,enableFallbackScrollButtons:r,enableFallbackScrollMarkers:n}};var v=r(893957),_=r(767415);let w=e=>`
  --scroll-button-size: 36px;
  --scroll-button-offset: 1rem;

  &::scroll-button(*) {
    opacity: 0;
    pointer-events: auto;
    position: absolute;
    position-anchor: --${e};
    background-color: var(--sema-color-background-default);
    border: none;
    border-radius: 12px;
    cursor: pointer;
    display: inline-block;
    margin-block-start: calc(var(--carousel-item-height) / 2 - var(--scroll-button-size) / 2);
    height: var(--scroll-button-size);
    line-height: 0;
    vertical-align: middle;
    width: var(--scroll-button-size);
    transition: opacity 50ms cubic-bezier(0, 0, 1, 1), transform 50ms cubic-bezier(0, 0, 1, 1);
  }

  /* Show scroll buttons when hovering on the parent <ul>. */
  &:hover::scroll-button(*) {
    opacity: 1;
    transition: opacity 100ms cubic-bezier(0, 0, 1, 1), transform 100ms cubic-bezier(0, 0, 1, 1);
  }

  &::scroll-button(inline-end) {
    content: url("data:image/svg+xml,%3Csvg aria-hidden='true' role='img' viewBox='0 0 24 24' width='16' height='16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8.7.3 20.42 12 8.71 23.7l-1.42-1.4L17.6 12 7.29 1.7z' /%3E%3C/svg%3E");
    right: anchor(--${e} right);
    margin-inline-end: var(--scroll-button-offset);
    top: anchor(--${e} start);
  }

  &::scroll-button(inline-start) {
    content: url("data:image/svg+xml,%3Csvg aria-hidden='true' role='img' viewBox='0%200%2024%2024' width='16' height='16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m6.41%2012%2010.3-10.3L15.29.3%203.6%2012l11.7%2011.7%201.42-1.4z'/%3E%3C/svg%3E");
    left: anchor(--${e} left);
    margin-inline-start: var(--scroll-button-offset);
    top: anchor(--${e} start);
  }

  /* CSS specificity order matters: hover/focus → active → disabled (most specific last) */
  &::scroll-button(*):is(:hover, :focus-visible) {
    background-color: var(--sema-color-hover-background-default);
    opacity: 1;
  }

  &::scroll-button(*):active {
    background-color: var(--sema-color-pressed-background-default);
    transform: scale(0.90);
  }

  &::scroll-button(*):disabled {
    background-color: var(--sema-color-background-disabled);
    opacity: 0;
    cursor: not-allowed;
    interactivity: inert;
  }

`,y=(e,t="multi",r=1)=>{let n="multi"===t;return`
  scroll-marker-group: after;

  &::scroll-marker-group {
    display: grid;
    grid-auto-columns: 1rem;
    grid-auto-flow: column;
    height: 8px;
    justify-content: center;
    margin-block-start: ${n?"16px":"-1.25rem"};
    position-anchor: --${e};
    position-area: bottom;
    ${n?"position: fixed; align-items: center;":"scroll-snap-type: y mandatory;"}
    transition: all 150ms ease-out;
    @media (prefers-reduced-motion: no-preference) {
      scroll-behavior: smooth;
    }
  }

  > li:nth-child(${r}n + 1)::scroll-marker {
    aspect-ratio: 1;
    border-radius: 50% ;
    background: ${n?"var(--sema-color-background-secondary)":"rgba(255, 255, 255, 0.6)"};
    content: ' ';
    width: 50%;
    box-shadow: ${n?"none":"0 1px 0px rgba(0, 0, 0, 0.1)"};
    animation-timeline: view(x);
    interactivity: auto;
    transition: all 150ms ease-out;
    place-self: center;
  }

  > li:nth-child(${r}n + 1)::scroll-marker:target-current {
    background: ${n?"var(--sema-color-background-inverse)":"var(--sema-color-background-default)"};
  }
`},S=function({cls:e,inset:t,isMobile:r=!1,itemsPerPage:n}){let i="none"===t,o=r?"0rem":"1rem";return`
  .${e} {
    --carousel-edge-padding: ${i?"0":r?"0.5rem":"1rem"};
    --carousel-gap: 0.5rem;
    --calculated-column-width: calc(
      (
        100cqw
        - var(--carousel-edge-padding)
        - (var(--carousel-gap) * (var(--carousel-item-count) + 1))
      ) / var(--carousel-item-count)
    );
    anchor-name: --${e};
    counter-reset: item;
    display: grid;
    gap: var(--carousel-gap);
    grid-auto-flow: column;
    grid-auto-columns: var(--calculated-column-width, var(--carousel-item-width, min-content));
    list-style-type: none;
    margin-block: 0rem;
    margin-inline: auto;
    overscroll-behavior-x: contain;
    overflow-y: hidden;
    overflow-x: auto;
    padding-block-start: ${i?"0":o};
    padding-block-end: ${i?"0":o};
    padding-inline: var(--carousel-edge-padding);
    scroll-padding-inline-start: var(--carousel-edge-padding);
    scroll-padding-inline-end: var(--carousel-edge-padding);
    scrollbar-width: none;

    @media (prefers-reduced-motion: no-preference) {
      scroll-behavior: smooth;
    }

    >li {
      block-size: auto;
      overflow: visible;
      display: flex;
      flex-direction: column;
      container-type: scroll-state;
    }

    &.scroll-markers {
      ${i?`padding-block-end: ${o};`:""}
      ${y(e,"multi",n)}
    }

    &.scroll-buttons {
      ${w(e)}
    }
  } `};var j=r(59111),k=r(739405);function I({forceShowNavigationButtons:e,inset:t="default",itemHeight:r,items:o,itemWidth:s,mode:d,onIndexChange:c,accessibilityLabelledBy:h,renderItem:f,selectedIndex:m,showNavigationButtons:x,showScrollMarkers:I}){(0,i.useEffect)(()=>{(0,n.Z)("CSSCarousel","/app/packages/gestaltExtensions/Carousel/CSSCarousel.tsx")},[]);let{enableCssScrollMarkers:P,enableCssScrollButtons:C,enableFallbackScrollMarkers:E,enableFallbackScrollButtons:T}=b({mode:d,forceShowNavigationButtons:e,showScrollMarkers:I,showNavigationButtons:x}),[F,Z]=(0,i.useState)(0),M=(0,i.useRef)(null),A=(0,i.useRef)(null),L=(e=>{let[t,r]=(0,i.useState)(1),n=(0,i.useRef)(null);return(0,v.Z)(()=>{let t=null;if(e.current){let i=()=>{n.current&&cancelAnimationFrame(n.current),n.current=requestAnimationFrame(()=>{(()=>{let t=e.current;if(t){let e=t.offsetWidth,n=t.querySelector("li");if(n){let t=n.offsetWidth;if(t>0&&e>0){let n=Math.max(1,Math.floor((e-32+8)/(t+8)));r(e=>e!==n?n:e)}}}})(),n.current=null})};i(),(t=new ResizeObserver(i)).observe(e.current)}return()=>{n.current&&cancelAnimationFrame(n.current),t&&t.disconnect()}}),t})(M),R=(0,l.JZ)(),{isInteractive:z,onKeyboardFocus:H,onKeyboardBlur:B,onMouseOver:N,onMouseOut:O}=function(){let[e,t]=(0,i.useState)(!1),[r,n]=(0,i.useState)(!1),o=(0,i.useCallback)(e=>{e.target.matches(":focus-visible")&&t(!0)},[]);return{keyboardFocused:e,hovered:r,isInteractive:e||r,onKeyboardFocus:o,onKeyboardBlur:(0,i.useCallback)(()=>{t(!1)},[]),onMouseOver:(0,i.useCallback)(()=>{n(!0)},[]),onMouseOut:(0,i.useCallback)(()=>{n(!1)},[])}}(),{setNavigationIntent:D}=function({scrollerRef:e,itemsLength:t,itemsPerPage:r,mode:n,focusedIndex:o,setFocusedIndex:a,onIndexChange:l}){let s=(0,i.useRef)([]),d=(0,i.useRef)(null),c=(0,i.useRef)(!0),u=(0,i.useRef)(null),h=(0,i.useRef)(-1),p=(0,i.useRef)(0),f=(0,i.useRef)(0),m=(0,i.useRef)(null),g=(0,i.useCallback)(e=>{let{direction:t}=getComputedStyle(e),{scrollLeft:r,scrollWidth:n,clientWidth:i}=e;return"rtl"!==t?r:r<0?-r:n-i-r},[]),x=(0,i.useCallback)(()=>{let t=e.current;if(!t||!s.current.length)return;let i=u.current,d=t.children.length;if(c.current||!i||i.scrollWidth!==t.scrollWidth||i.clientWidth!==t.clientWidth||i.childrenCount!==d||s.current.length!==d){let e=Array.from(t.children);s.current=e.map(e=>e.offsetLeft+e.offsetWidth/2),u.current={scrollWidth:t.scrollWidth,clientWidth:t.clientWidth,childrenCount:e.length},c.current=!1}let x=g(t),b=t.scrollWidth-t.clientWidth,v=x+t.clientWidth/2,w=s.current,y=0,S=1/0;w.forEach((e,t)=>{let r=Math.abs(e-v);r<S&&(S=r,y=t)});let j=y;if("multi"===n&&r>1){let e=Math.floor(y/r)*r,t=Math.max(0,Math.floor((w.length-1)/r)*r),n=Math.min(e,t),i=p.current;if(i!==n){let e=n>i?1:-1,t=(w[i+(e>0?r-1:0)]+w[n+(e>0?0:Math.min(r-1,w.length-n-1))])/2+e*(v>w[w.length-1]-24||v<w[0]+24?6:24),o=x-f.current;(!(e>0?v>=t:v<=t)||e>0&&o<-.5||e<0&&o>.5)&&(n=i)}(x/b>.98||b-x<=8)&&(n=t),p.current=j=n}let k=performance.now(),I=m.current,P=I&&k-I.timestamp<500;j===o||P||(h.current!==j&&((0,_.nP)("closeup.dweb.css_carousel.enabled.carousel_index_change",{sampleRate:1}),h.current=j),a(j),l?.({currentIndex:o,nextIndex:j})),I&&(j===I.targetIndex||k-I.timestamp>500)&&(m.current=null),f.current=x},[o,r,n,l,e,a,g]),b=(0,i.useCallback)(()=>{let e=performance.now(),t=m.current;t&&e-t.timestamp<500||(d.current&&cancelAnimationFrame(d.current),d.current=requestAnimationFrame(()=>{d.current=null,x()}))},[x]),v=(0,i.useCallback)(()=>{c.current=!0,b()},[b]);return(0,i.useLayoutEffect)(()=>{let t=e.current;if(!t)return;let r=Array.from(t.children);s.current=r.map(e=>e.offsetLeft+e.offsetWidth/2),u.current={scrollWidth:t.scrollWidth,clientWidth:t.clientWidth,childrenCount:r.length},c.current=!1;let n="undefined"!=typeof ResizeObserver?new ResizeObserver(v):null,i=new MutationObserver(v);return n&&n.observe(t),i.observe(t,{childList:!0}),t.addEventListener("scroll",b,{passive:!0}),window.addEventListener("resize",v),()=>{t.removeEventListener("scroll",b),window.removeEventListener("resize",v),i.disconnect(),n&&n.disconnect(),d.current&&(cancelAnimationFrame(d.current),d.current=null)}},[b,v,e]),(0,i.useLayoutEffect)(()=>{c.current=!0,b()},[t,r,b]),{setNavigationIntent:(0,i.useCallback)(e=>{m.current={targetIndex:e,timestamp:performance.now()}},[])}}({scrollerRef:M,itemsLength:o.length,itemsPerPage:L,mode:d,focusedIndex:F,setFocusedIndex:Z,onIndexChange:c}),W=(0,i.useCallback)(e=>{let t=M.current;if(!t)return;let r=Array.from(t.children),n=Math.max(0,Math.min(e,r.length-1)),i=r[n];if(i&&"number"==typeof i.offsetLeft){let e=parseInt(getComputedStyle(t).paddingInlineStart,10)||0;t.scrollTo({left:i.offsetLeft-e,behavior:R?"auto":"smooth"})}},[R]),$=(0,i.useCallback)(e=>{D(e),W(e),Z(e),c?.({currentIndex:F,nextIndex:e})},[F,c,W,D]);(0,i.useLayoutEffect)(()=>{void 0!==m&&m!==F&&o.length&&$(m)},[m,F,$,o.length]);let U=(0,i.useCallback)(e=>()=>Z(e),[]),K=(0,i.useCallback)(()=>Z(-1),[]),q=(0,i.useRef)(new Map),V=(0,i.useCallback)(e=>(q.current.has(e)||q.current.set(e,U(e)),q.current.get(e)),[U]);(0,i.useLayoutEffect)(()=>{q.current.clear()},[o]);let Y=(0,k.ZP)(),J=!(0,k.ds)(Y),G="none"===t,Q="single"===d,X=`carousel--mode-${d}`,ee=Q?`
  .${X} {
    anchor-name: --${X};
    container-type: inline-size scroll-state;
    counter-reset: item;
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: 100%;
    height: 100%;
    list-style-type: none;
    overscroll-behavior-x: contain;
    overflow-x: auto;
    scroll-behavior: smooth;
    scroll-snap-type: x mandatory;
    scrollbar-width: none;

    @media (hover) {
      &:not(:hover,
      :focus-within)::scroll-button(*) {
        opacity: 0;
      }
    }

    > li {
      container-type: scroll-state;
      scroll-snap-align: center;
      scroll-snap-stop: always;
      width: 100%;
      height: 100%;
      overflow: hidden;

      & img {
        height: 100%;
        width: 100%;
      }
    }

    &.scroll-markers {
      ${y(X,"single")}
    }

    &.scroll-buttons {
      ${w(X)}
    }
  }
`:S({cls:X,inset:t,isMobile:J,itemsPerPage:L}),et={...r&&{"--carousel-item-height":`${r}px`},...s&&{"--carousel-item-width":`${s}px`}},er=a()(X,{"scroll-markers":P,"scroll-buttons":C});return(0,u.jsxs)(l.xu,{ref:A,"aria-labelledby":h,as:"section",dangerouslySetInlineStyle:{__style:{containerType:"inline-size"}},height:"100%",onBlur:B,onFocus:H,onMouseOut:O,onMouseOver:N,position:"relative",width:"100%",children:[(0,u.jsx)(j.Z,{unsafeCSS:ee}),T&&(0,u.jsx)(p,{carouselClassName:X,containerRef:A,currentIndex:F,itemCount:o.length,itemHeight:r,itemsPerPage:L,onIndexChange:$,showNavigationArrows:e??z}),(0,u.jsx)("ul",{ref:M,className:er,style:et,children:o.map((e,t)=>(0,u.jsx)("li",{children:f({item:e,index:t,isFocused:F===t,onFocus:V(t),onUnfocus:K})},e?.id??e?.entityId??t))}),E&&(0,u.jsx)(l.xu,{marginBottom:G||"multi"!==d?void 0:4,marginTop:G?4:void 0,children:(0,u.jsx)(g,{currentIndex:F,itemCount:o.length,itemsPerPage:L,mode:d,onNavigateToIndex:$})})]})}},446885:function(e,t,r){r.d(t,{Z:()=>p});var n=r(686659),i=r(667294),o=r(391995),a=r(759271),l=r(351736),s=r(609252),d=r(178315),c=r(774838),u=r(40763),h=r(785893);function p({children:e,footerConfig:t,headerConfig:r,height:p,hideOnScroll:f,hideOnScrollState:{isHidden:m,updateHiddenState:g},isFooterHidden:x,noPadding:b,paddingX:v,paddingY:_=d.og,type:w,zIndex:y,isStoryPin:S}){let j,k;(0,i.useEffect)(()=>{(0,n.Z)("FixedContent","/app/packages/layout/FixedContent.tsx")},[]);let{headerLimitedOverflow:I,ignoreObstructions:P,zIndexForGestaltBug:C}=r||{},{appUpsellFooterConfig:E,footerInLego:T,navFooterConfig:F}=t||{},Z=!!E,M="header"===w?"top":"bottom",A=(0,l.vs)(),{isRTL:L}=(0,c.B)(),{mWebCloseupRedesignEnabled:R}=(0,a.Z)(),z=(0,i.useRef)(null),H=(0,i.useRef)(null);(0,i.useEffect)(()=>{try{if(!P){let e=z.current;H.current=I&&e&&Array.isArray(e.children)?e.children[0]:e,H.current instanceof HTMLElement&&s.Z.addObstruction(M,H.current)}}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}return()=>{!P&&H.current instanceof HTMLElement&&s.Z.removeObstruction(M,H.current)}},[P,I,M,A]);let B="top"===M?"relative":"fixed",N=b?0:_,O=(p??d.R$)+(r?.overrideTop||0),D=f||F?{transition:T||R?"transform 300ms ease-in-out, opacity 300ms ease-in-out":"transform 200ms linear",...m||x?{transform:`translateY(${"top"===M?-O:O}px)`,opacity:T||R?0:1}:Object.freeze({})}:{},W=2*!("relative"!==B||r?.noGutter),$=W?-W:0,U=A?l.k7:"rgba(255,255,255,.95)";A&&("header"===w?j=-1:k=-1);let K=T?Z?void 0:p??d.R$:"100%",q=T?d.KJ:void 0,V=r?.isTranslucent&&U||A?U:"var(--sema-color-background-default)",Y=r?.isTransparentBackground&&1?"var(--sema-color-background-transparent)":V,J=(0,i.useMemo)(()=>({height:"footer"===w&&R?`calc(${K} + env(safe-area-inset-bottom))`:K,...R&&"footer"===w?{paddingBottom:`calc(env(safe-area-inset-bottom) + ${4*(N||0)}px)`}:Object.freeze({})}),[R,K,w,N]),G=(0,u.Z)({skipExpActivation:!0});return(0,h.jsx)(o.xu,{ref:z,bottom:"footer"===w,dangerouslySetInlineStyle:{__style:{top:j,bottomStyle:k,...!y||C?{zIndex:C||1}:Object.freeze({}),...I?{background:"transparent",overflow:"hidden",paddingBottom:d.UB,marginBottom:-d.UB,pointerEvents:"none"}:Object.freeze({}),...r?.hasBorder?{borderBottom:d.dS}:Object.freeze({}),...t?.hasTopShadow?{boxShadow:"0 -2px 4px 1px rgba(0, 0, 0, 0.08)"}:Object.freeze({}),...D}},"data-test-id":w,display:Z?"flex":void 0,height:p&&!T?p:void 0,left:!0,marginEnd:T?"auto":$,marginStart:T?"auto":$,onTransitionEnd:()=>{(f||F)&&H.current&&(m||x?s.Z.removeObstruction(M,H.current):s.Z.addObstruction(M,H.current))},position:B,right:!0,top:"header"===w,width:T||"fixed"!==B?void 0:"100%",zIndex:C?void 0:y,children:(0,h.jsx)(o.xu,{alignItems:t?.alignCenter?"center":void 0,dangerouslySetInlineStyle:{__style:{backgroundColor:Y,paddingLeft:L||!G||S?void 0:"8px",paddingRight:L&&G&&!S?"8px":void 0,...J,boxShadow:R&&"footer"===w?`0 10px 0 0 ${Y}, ${d.KJ}`:q,marginBottom:T&&!F?.docked?16:void 0,...I?{pointerEvents:"auto"}:Object.freeze({}),...r?.useRoundedCorners?{zIndex:5,borderTopRightRadius:17,borderTopLeftRadius:17,borderBottomRightRadius:0,borderBottomLeftRadius:0}:Object.freeze({})}},display:T||t?.alignCenter?"flex":void 0,marginEnd:T?"auto":void 0,marginStart:T?"auto":void 0,paddingX:v||4*("footer"===w&&!b)+W,paddingY:N,position:"relative",rounding:T&&!F?.docked?"pill":void 0,width:F?F.footerWidth:Z?void 0:"100%",children:"function"==typeof e?e({updateHiddenState:g}):e})})}},271202:function(e,t,r){r.r(t),r.d(t,{default:()=>c});var n=r(686659),i=r(667294),o=r(391995),a=r(178315),l=r(446885),s=r(763904),d=r(785893);function c({hasBorder:e,headerLimitedOverflow:t,ignoreObstructions:r,isTranslucent:c,isTransparentBackground:u,noGutter:h,overrideTop:p,useRoundedCorners:f,zIndexForGestaltBug:m,isStoryPin:g,...x}){(0,i.useEffect)(()=>{(0,n.Z)("FixedHeader","/app/packages/layout/FixedHeader.tsx")},[]);let{noPadding:b,paddingY:v=a.og,zIndex:_}=x;return(0,d.jsx)(o.Le,{height:t?a.LV+2*(b?0:v)*4:void 0,top:p||0,zIndex:_||void 0,children:(0,d.jsx)(s.Z,{hideOnScroll:x.hideOnScroll,children:n=>(0,d.jsx)(l.Z,{...x,headerConfig:{isTranslucent:c,isTransparentBackground:u,headerLimitedOverflow:t,hasBorder:e,ignoreObstructions:r,noGutter:h,overrideTop:p,zIndexForGestaltBug:m,useRoundedCorners:f},hideOnScrollState:n,isStoryPin:g,type:"header"})})})}},763904:function(e,t,r){r.d(t,{Z:()=>a});var n=r(667294),i=r(730448);function o(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Component{constructor(...e){super(...e),o(this,"state",{isHidden:!!this.props.appUpsellFooterConfig||!!this.props.navFooterConfig?.isDockedNavOnPlp}),o(this,"lastScrollPos",0),o(this,"updateHiddenState",e=>{this.reqAnimationId=window.requestAnimationFrame(()=>{this.setState({isHidden:e})})}),o(this,"handleScroll",(0,i.Z)(()=>{let{appUpsellFooterConfig:e,navFooterConfig:t}=this.props,{isHidden:r}=this.state,n=window.scrollY,i=n-this.lastScrollPos,o="none",{scrollHeight:a,clientHeight:l}=document.documentElement||{};Number.isNaN(a)||Number.isNaN(l)||(o=i<0?n<=Math.abs((window.scrollMinY||0)+Math.max(i,20))?"start":"none":n>=(window.scrollMaxY||a-l)-Math.max(i,20)?"end":"none");let s=55*!t?.isModal;e?i>20&&r&&n>=500?e.shouldShowAfterScroll()&&(this.updateHiddenState(!1),t?.onScroll(!1)):(i<-20&&!r||n<=s)&&(this.updateHiddenState(!0),t?.onScroll(!0)):this.props.navFooterConfig?.isDockedNavOnPlp?"start"===o&&!r||n<=s?(this.updateHiddenState(!0),t?.onScroll(!0)):(n>s||"end"===o)&&r&&(this.updateHiddenState(!1),t?.onScroll(!1)):(i<-20||"start"===o)&&r||n<=s?(this.updateHiddenState(!1),t?.onScroll(!1)):(i>20||"end"===o)&&!r&&(this.updateHiddenState(!0),t?.onScroll(!0)),this.lastScrollPos=n},30))}componentDidMount(){try{(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.addEventListener("scroll",this.handleScroll)}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}}componentWillUnmount(){(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.removeEventListener("scroll",this.handleScroll),this.reqAnimationId&&(window.cancelAnimationFrame(this.reqAnimationId),this.reqAnimationId=null)}componentDidUpdate(e){!e.hideOnScroll&&this.props.hideOnScroll||!e.navFooterConfig?.isDockedNavOnPlp&&this.props.navFooterConfig?.isDockedNavOnPlp?(this.updateHiddenState(!0),window.addEventListener("scroll",this.handleScroll)):(e.hideOnScroll&&!this.props.hideOnScroll||e.navFooterConfig?.isDockedNavOnPlp&&!this.props.navFooterConfig?.isDockedNavOnPlp)&&(this.updateHiddenState(!1),window.removeEventListener("scroll",this.handleScroll))}render(){let{children:e,navFooterConfig:t}=this.props,{isHidden:r}=this.state;return e({isHidden:!t?.forceShow&&r,updateHiddenState:this.updateHiddenState})}}},619481:function(e,t,r){r.d(t,{Z:()=>c});var n=r(667294),i=r(581722),o=r(442279),a=r(501010),l=r(629972),s=r(487038);let d=(e,t,r)=>e.resources[t]?.[r];function c(e){let{name:t,optionsKey:r}=e,c=t===l.fY,u=(0,s.MA)(),h=u?.get(t,r);if(h)throw h;let p=(0,o.createSelector)(e=>d(e,t,r),e=>e?.data),f=(0,o.createSelector)(e=>d(e,t,r),e=>e?.auxData),m=(0,o.createSelector)(e=>d(e,t,r),e=>e?.error),g=(0,o.createSelector)(e=>d(e,t,r),e=>e?.nextBookmark),x=e=>e[t]?.[r],b=(0,a.Z)().checkExperiment("www_resources_reselect").anyEnabled,v=(0,i.v9)(b?g:({resources:e})=>x(e)?.nextBookmark),_=(0,i.v9)(b?p:({resources:e})=>x(e)?.data),w=(0,i.v9)(b?f:({resources:e})=>x(e)?.auxData),y=(0,i.v9)(b?m:({resources:e})=>x(e)?.error),S=(0,n.useRef)({auxData:void 0,data:void 0,error:void 0,isAtEnd:!1,nextBookmark:void 0});if(c)return S.current;let j={auxData:w,data:_,error:y,isAtEnd:v===l.qx,nextBookmark:v};return(j.auxData!==S.current.auxData||j.data!==S.current.data||j.error!==S.current.error||j.isAtEnd!==S.current.isAtEnd||j.nextBookmark!==S.current.nextBookmark)&&(S.current=j),S.current}},748025:function(e,t,r){r.d(t,{Z:()=>o});var n=r(236269),i=r(935833);function o(){let e=navigator.serviceWorker;return e&&e.getRegistration?((0,i.My)("mweb_service_worker.unregister_attempt"),e.getRegistration().then(e=>{if(e)return e.unregister().then(()=>((0,i.My)("mweb_service_worker.unregister_success"),navigator.serviceWorker&&window.caches?window.caches.keys().then(e=>{let t=e.find(e=>e.startsWith("workbox-precaching"));return t?window.caches.delete(t):null}).then(()=>(0,i.My)("mweb_service_worker.clear_app_shell")):Promise.resolve())).catch(e=>{(0,i.tj)("mweb_service_worker.unregister_fail",{error:(0,n.Z)(e,"message")})})})):Promise.resolve()}},574991:function(e,t,r){r.d(t,{J:()=>n,Z:()=>i});let n=-1;function i(e){switch(e){case n:return null;case 0:return"shopping-bag";case 1:return"tag";case 9:return"clock-history";default:return"magnifying-glass"}}},293646:function(e,t,r){r.d(t,{Z:()=>l});var n=r(667294);let i=new Map,o=null,a=e=>{e.forEach(e=>{let t=i.get(e.target);t&&t(e)})};function l({onVisibilityChanged:e,trackFullVisible:t,rootMargin:r}){let l=(0,n.useRef)(null),s=!1,d=()=>{let t;l.current instanceof HTMLElement&&(t=l.current,i.has(t))&&s&&(e(!1),s=!1)},c=(0,n.useCallback)(r=>{l.current instanceof HTMLElement&&((e,t="-64px 0px 0px 0px",r)=>{let n={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:t,threshold:[0,.5,1]};o=o||new window.IntersectionObserver(a,n),i.set(e,r),o.observe(e)})(l.current,r,r=>{if(!i.has(l.current))return;let n=t?r.intersectionRatio>=1:r.intersectionRatio>=.5,o=t?0===r.intersectionRatio:!n;!s&&n?(s=r.intersectionRatio>0||r.isIntersecting)&&e(!0):s&&o&&d()})},[l.current]);return(0,n.useEffect)(()=>(c(r),()=>{if(l.current instanceof HTMLElement){var e;d(),e=l.current,o.unobserve(e),i.delete(e)}}),[c]),l}},838350:function(e,t,r){r.d(t,{Z:()=>n});function n({top:e,right:t,bottom:r,left:n,windowHeight:i,windowWidth:o,threshold:a=0}){return e>=0+a&&n>=0+a&&r<=i-a&&t<=o-a}},610142:function(e,t,r){r.d(t,{Zt:()=>W,iK:()=>U,ZP:()=>V});var n=r(686659),i=r(667294),o=r(581722),a=r(312048),l=r(391995),s=r(647636),d=r(261954),c=r(309947),u=r(806513),h=r(24246),p=r(426161),f=r(774838),m=r(619481),g=r(661376),x=r(70625),b=r(739405),v=r(662911);let _=new Map;var w=r(31425),y=r(596663),S=r(471310),j=r(989045),k=r(966039),I=r(759302),P=r(285676),C=r(956701),E=r(914253),T=r(228612),F=r(836643),Z=r(645479),M=r(633101),A=r(734802),L=r(589247),R=r(384296),z=r(9065),H=r(785893);function B(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let N=(0,z.Z)(()=>r.e("65300").then(r.bind(r,827555)),void 0,e=>827555,"app-www-businessNux-BizNuxHomefeedLoader",e=>["65300"]),O=(0,z.Z)(()=>r.e("68443").then(r.bind(r,173842)),void 0,e=>173842,"app-www-save-board-MoreIdeasFeed-MoreIdeasFeed",e=>["68443"]);class D extends i.PureComponent{constructor(...e){super(...e),B(this,"state",{refreshing:!1,unauthLandingPinStateForAuthHomefeed:this.props.authHomefeedComponentDidUpdate?{pinId:(()=>{let{plpImageRenderData:e}=(0,k.HW)(),[t]=e;return t?t.pin_id:null})(),feedItem:null}:null}),B(this,"backOnlineAutoFetchResource",()=>{this.props.pagination.loadNext()}),B(this,"handlePullToRefresh",()=>{this.props.pagination.refetch(),this.setState({refreshing:!0})}),B(this,"gridContainerRef",(0,i.createRef)()),B(this,"renderFeedPin",(e,t)=>{let{feedItemProps:r,location:n,performanceOptimization:i,showSeoMetadata:o,surface:a,trafficSource:l,getReduxPin:s}=this.props,{auxData:d,componentType:c,feedback:u,imageOnly:h,impressionData:p,objectIdStr:f,oneTapSave:m,onFeedItemClick:g,onPinLinkClick:x,shouldAllowProductPriceIndicator:b,showSeoMetadata:v,viewData:_,viewParameter:w,viewType:y}=r||{},S=(n.search||"").includes("force_seo"),j=!!i?.lazyLoadBelowFoldIndex&&t>i.lazyLoadBelowFoldIndex,k=!!i?.priorityFetchAboveFoldIndex&&t<=i.priorityFetchAboveFoldIndex,I=s(e.id);return(0,H.jsx)(P.r,{auxData:d,componentType:c||0,duploFeedItemProps:{onPinClick:g,onPinLinkClick:x,showSeoMetadata:o||S||v},duploLazyLoadImage:j,duploOneTapSave:m,duploPriorityFetchImage:k,duploShouldAllowProductPriceIndicator:b,feedback:u,imageOnlyOption:h?"image-only":"default",impressionData:p,objectIdStr:f,pinId:e.id,pinKey:I?{type:"Legacy",data:I}:null,seoDrawerPinType:this.props.seoDrawerPinType,shouldShowSeoDrawerNewfields:this.props.shouldShowSeoDrawerNewfields,shouldShowSeoDrawerOption:this.props.shouldShowSeoDrawerOption,slotIndex:t,surface:a,trackingParams:e.trackingParams,trafficSource:l,viewData:_,viewParameter:w,viewType:y||1})}),B(this,"getBoardId",()=>{let e=this.props.feedKey?.split(":");return e&&e.length>1&&"boardfeed"===e[0]?e[1]:null}),B(this,"hideMoreIdeas",()=>{let{getReduxBoard:e,surface:t,trafficSource:r}=this.props,n=this.getBoardId(),i="board"===r&&["BaseBoardPinGrid","FeaturedBoardPinGrid"].includes(t??"")&&n?e(n):null;return i?.featured_board_metadata?.more_ideas===!1})}componentDidMount(){window.addEventListener("online",this.backOnlineAutoFetchResource),(0,w.IA)(this.props.feedKey,this)}componentWillUnmount(){window.removeEventListener("online",this.backOnlineAutoFetchResource),(0,w.do)(this.props.feedKey)}componentDidUpdate(e){let{refreshing:t,unauthLandingPinStateForAuthHomefeed:r}=this.state,{feedItems:n,authHomefeedComponentDidUpdate:i}=this.props,o=t&&e.pagination.isLoadingNext&&!this.props.pagination.isLoadingNext;if(o&&this.setState({refreshing:!1}),i&&r){let t=i({feedItems:n,prevFeedItems:e.feedItems,finishedRefresh:o,unauthLandingPinStateForAuthHomefeed:r});t&&this.setState({unauthLandingPinStateForAuthHomefeed:t})}}render(){let{deviceType:e,emptyState:t,experimentalColumnWidth:r,experimentalGutter:n,feedItemProps:o,feedItems:a,feedItemsAdjustment:c,feedKey:h,feedStoryId:f,getColumnSpanConfig:m,gridConfig:g,i18n:b,pageSize:_,pagination:w,pullToRefresh:k,renderFeedItem:P,serverRender:C,showBizNuxHomefeedLoader:E,trafficSource:T,visuallyCompleteProfilerOptions:F,isLoadingStateEnabled:z,initialLoadingStatePinCount:B,isLoadingAccessibilityLabel:D,isLoadedAccessibilityLabel:W}=this.props,{unauthLandingPinStateForAuthHomefeed:$}=this.state,U=$?.feedItem&&a.length?[$.feedItem,...a]:a,{viewParameter:K,viewType:q}=o||{},{gridMeasurementKey:V}=g||{},Y=h+(V?`|${V}`:""),J="user_search"===T,G=J?window.innerWidth-16:void 0,Q=U.some(e=>"board"===e.type),X={columnWidth:(0,y.SY)({deviceType:e,customMWebColumnWidth:G,experimentalColumnWidth:Q?236:r}),renderItem:({data:e,itemIdx:t})=>{if(P){let r=P(e,t);if("FALLBACK_TO_DEFAULT"!==r)return r}switch(e.type){case"pin":return(0,H.jsx)(Z.Z,{children:this.renderFeedPin(e,t)});case"user":return(0,H.jsx)(R.Z,{truncateName:!0,userId:e.id,userSearchRepStyle:J,viewParameter:K,viewType:q});case"board":let r=this.props.getReduxBoard(e.id);return(0,H.jsx)(v.default,{boardKey:r?{type:"Legacy",data:r}:null,type:"grid",viewParameter:K,viewType:q});case"topic":return(0,H.jsx)(A.Z,{id:e.id,shouldClickthrough:!0,showFollowButton:!0,showFollowerCount:!0,viewParameter:K,viewType:q});case"story":if("number"==typeof K)return(0,H.jsx)(M.Z,{slotIndex:t,storyId:e.id,viewParameter:K,viewType:q||1});return null;case"FEED_BREAK_IN":return c&&"breakIn"===c.type&&c.value.content;default:return null}},gutterWidth:(0,y.s)({experimentalGutter:n,trafficSource:T,deviceType:e}),loadItems:w.loadNext,minCols:J?1:2,...g},ee=!E&&w.isLoadingNext&&0===U.length&&!this.state.refreshing&&!z,et=_&&25>parseInt(_,10),er=c?.type==="fullWidthBreakIn"?[{type:"feed",id:`${Y}_feed_0`,item:U.slice(0,c.value.index)},{type:"fullWidthBreakIn",id:`${Y}_break_in_0`,item:c.value.content},{type:"feed",id:`${Y}_feed_1`,item:U.slice(c.value.index)}]:[{type:"feed",id:Y,item:U}],en="desktop"===e,ei=en&&"flashlight"===T,eo=ei?0:u.qG;return(0,H.jsxs)(l.xu,{"data-test-id":"MobileFeed",children:[(0,H.jsx)(S.Z,{auxData:o?.auxData||null,enabled:!!k,onPull:this.handlePullToRefresh,refreshing:this.state.refreshing,viewParameter:o?.viewParameter||null}),(0,H.jsxs)(l.xu,{ref:this.gridContainerRef,"data-test-id":"grid",marginEnd:eo,marginStart:eo,opacity:this.state.refreshing?50:100,children:[(0,H.jsxs)(p.Z,{includeBackgroundImages:F?.includeBackgroundImages,includeVideos:F?.includeVideos,isAtEndOfFeed:!w.hasNext,isPlaceholderGrid:z&&w.isLoadingNext&&!U.length,itemCount:U.length,pinData:F?.pins,children:[U.length||z&&w.isLoadingNext?(0,H.jsx)(l.xu,{"data-test-id":"feed",marginTop:(0,y.kk)({isDesktop:en}),children:(0,H.jsx)(x.Z.Consumer,{children:e=>(0,H.jsx)(i.Fragment,{children:(0,H.jsx)(L.Z,{children:er.map(t=>"feed"===t.type?(0,H.jsx)(d.default,{cacheKey:Y,getColumnSpanConfig:m,id:C?h:void 0,initialLoadingStatePinCount:B,isFetching:w.isLoadingNext,isLoadedAccessibilityLabel:W??"",isLoadingAccessibilityLabel:D??"",isLoadingStateEnabled:!!z,items:t.item,scrollContainerRef:e,serverRender:C,...X},t.id):"fullWidthBreakIn"===t.type?(0,H.jsx)(l.xu,{children:t.item},t.id):null)})})})}):w.isLoadingNext?(0,H.jsx)(j.Z,{}):t??null,w.isLoadingNext&&"board"===T&&et&&!z&&(0,H.jsx)(l.xH,{accessibilityLabel:b._('Loading', 'Label for loading spinner', 'Label for loading spinner'),show:!0})]}),ee&&(0,H.jsx)(l.xu,{column:12,paddingY:2,children:(0,H.jsx)(I.Z,{partialViewportWidth:ei})}),E&&(0,H.jsx)(N,{gridContainerRef:this.gridContainerRef,homefeedLoading:w.isLoadingNext}),!en&&!w.hasNext&&(0,H.jsx)(s.b9,{placementId:1000251}),f&&!this.hideMoreIdeas()&&(0,H.jsx)(l.xu,{marginBottom:6,children:(0,H.jsx)(O,{storyId:f})})]})]})}}function W({feedItems:e,pagination:t,...r}){(0,i.useEffect)(()=>{(0,n.Z)("Feed","/app/www/Feed.tsx")},[]);let{feedItemsAdjustment:l}=r,s=(0,a.TH)(),d=(0,b.ZP)(),u=(0,h.Z)(),{isAuthenticated:p,isBot:m}=(0,f.B)(),{isBizNuxHomefeedLoadShown:g}=(0,o.v9)(({session:e})=>e),x=e;l?.type==="breakIn"&&(x=(({breakIn:{index:e},items:t})=>t.length<e?t:[...t.slice(0,e),(e=>{let t=_.get(e);if(t)return t;let r=Object.freeze({type:"FEED_BREAK_IN",__typename:"FEED_BREAK_IN",id:`BREAK_IN_${e}`});return _.set(e,r),r})(e),...t.slice(e)])({items:e,breakIn:l.value}));let{experimentalColumnWidth:v,experimentalGutter:w}=(0,c.Z)(),y=(0,E.gC)(),S=(0,T.S6)();return(0,H.jsx)(D,{...r,deviceType:d,experimentalColumnWidth:v,experimentalGutter:w,feedItems:x,getReduxBoard:y,getReduxPin:S,i18n:u,isAuthenticated:p,location:s,pagination:t,showBizNuxHomefeedLoader:!!g,showSeoMetadata:m||!p})}function $({isAtEnd:e,isFetching:t,fetchMore:r,refresh:n,...i}){let a=(0,o.v9)(({feeds:e})=>e[i.feedKey]??[]),l=(0,o.v9)(({desktopStories:e})=>e),{featuredBoardStoryId:s,feedStoryId:d}=(0,F.Z)(a,l),c=(0,o.v9)(({session:e})=>e.firstHomeFeedRequestAfterNux),u=(0,o.I0)();return(0,H.jsx)(W,{...i,featuredBoardStoryId:s,feedItems:a,feedStoryId:d,pagination:{hasNext:!e,isLoadingNext:t,loadNext:()=>r(),refetch:()=>{c?u((0,C.H5)(!1)):n()}}})}function U({resource:{isAtEnd:e,isFetching:t,fetchMore:r,refresh:o},...a}){return(0,i.useEffect)(()=>{(0,n.Z)("Feed","/app/www/Feed.tsx")},[]),(0,H.jsx)($,{...a,fetchMore:r,isAtEnd:e,isFetching:t,refresh:o})}function K({resourceConfig:e,...t}){let r=(0,g.Z)(e);return(0,H.jsx)(U,{...t,resource:r})}function q({resourceRef:e,fetchMore:t,refresh:r,...n}){let{isAtEnd:i}=(0,m.Z)(e);return(0,H.jsx)($,{...n,fetchMore:t,isAtEnd:i,isFetching:!1,refresh:r})}function V({resourceConfig:e,resourceRef:t,fetchMore:r,refresh:o,...a}){return((0,i.useEffect)(()=>{(0,n.Z)("Feed","/app/www/Feed.tsx")},[]),t)?(0,H.jsx)(q,{...a,fetchMore:r??(()=>{}),refresh:o??(()=>{}),resourceRef:t}):(0,H.jsx)(K,{...a,resourceConfig:e})}},31425:function(e,t,r){r.d(t,{IA:()=>o,cV:()=>i,do:()=>a});let n={},i=e=>{n[e]&&n[e].handlePullToRefresh()},o=(e,t)=>{n[e]=t},a=e=>{delete n[e]}},716848:function(e,t,r){r.d(t,{H:()=>n,J:()=>i});let{Provider:n,getMaybe:i}=(0,r(213491).Z)("PinCreateDeleteContext")},775907:function(e,t,r){r.d(t,{Z:()=>s});var n=r(686659),i=r(667294),o=r(391995),a=r(351736),l=r(785893);function s({color:e,image:t,isSelected:r,title:s}){(0,i.useEffect)(()=>{(0,n.Z)("PillRep","/app/www/nux/PillRep.tsx")},[]);let d=(0,a.vs)();return(0,l.jsxs)(o.xu,{alignItems:"center","aria-selected":r,dangerouslySetInlineStyle:{__style:{backgroundColor:d?r?"#fff":"#767676":r?"#111":"#efefef"}},display:"flex",padding:1,rounding:"pill",children:[(0,l.jsx)(o.zd,{height:48,rounding:"circle",width:48,children:t.url&&(0,l.jsx)(o.Ee,{alt:"",color:e,fit:"cover",naturalHeight:t.height??1,naturalWidth:t.width??1,src:t.url})}),(0,l.jsx)(o.xu,{marginEnd:3,marginStart:2,children:(0,l.jsx)(o.xe,{color:r?"inverse":d?"light":"dark",weight:"bold",children:s})})]})}},156386:function(e,t,r){r.d(t,{Z:()=>h});var n=r(686659),i=r(667294),o=r(774838),a=r(739405),l=r(404305),s=r(808712),d=r(9065),c=r(785893);let u=(0,d.Z)(()=>Promise.all([r.e("62707"),r.e("2167")]).then(r.bind(r,913915)),void 0,e=>913915,"UnauthHomePage",e=>["62707","2167"]);function h(){(0,i.useEffect)(()=>{(0,n.Z)("HomePage","/app/www/pages/HomePage.tsx")},[]);let e=(0,a.ZP)(),{isAuthenticated:t}=(0,o.B)();return t?"desktop"===e?(0,c.jsx)(l.Z,{}):(0,c.jsx)(s.Z,{}):(0,c.jsx)(u,{})}},808712:function(e,t,r){r.d(t,{Z:()=>eK});var n=r(686659),i=r(667294),o=r(581722),a=r(312048),l=r(391995),s=r(4533),d=r(11442),c=r(470205),u=r(647636),h=r(714518),p=r(230201),f=r(803212),m=r(599255),g=r(112302),x=r(790810),b=r(351736);let v={borderRadius:"32px 32px 0px 0px",bottom:0,left:0,overflow:"hidden",touchAction:"none",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",zIndex:1,width:"100vw",maxHeight:"100vw",minHeight:"30vh"},_={full:"100vh",default:"50vh",auto:""},w=({size:e,isDarkMode:t})=>(v.height=_[e],v.maxHeight="auto"===e?"90vh":"100vw",v.backgroundColor=t?b.N$:"#FFFFFF",v);var y=r(289935),S=r(24246),j=r(564377),k=r(74972),I=r(785893);let P=({content:e,footer:t,header:r})=>{let[n,o]=(0,i.useState)(!1),a=(0,i.useRef)(null),s=(0,i.useCallback)(()=>{let e=a.current;e&&o(e?.clientHeight<e?.scrollHeight&&e.offsetHeight+e.scrollTop<e.scrollHeight)},[]);return(0,i.useEffect)(()=>{s()},[s]),(0,i.useEffect)(()=>(window?.addEventListener("resize",s),()=>{window?.removeEventListener("resize",s)}),[s]),(0,I.jsxs)(i.Fragment,{children:[(0,I.jsxs)(l.xu,{ref:a,fit:!0,onScroll:s,overflow:"scroll",padding:0,children:[r,(0,I.jsx)(l.xu,{flex:"grow",overflow:"auto",children:e})]}),!!t&&(0,I.jsx)(l.xu,{dangerouslySetInlineStyle:n?{__style:{boxShadow:"var(--sema-space-0) var(--sema-space-negative-50) var(--sema-space-200) var(--sema-space-0) rgb(0 0 0 / 0.12)"}}:void 0,fit:!0,position:"relative",children:t})]})};function C({accessibilityModalLabel:e,allowClickAndDrag:t,allowBackgroundScroll:r=!1,children:o,closeOnOutsideClick:a=!0,footer:s,header:d,isOpen:c,mobileIsSlideUp:u,onDismiss:h,zIndex:p,size:f="auto"}){(0,i.useEffect)(()=>{(0,n.Z)("SheetMobileWithMediaHeader","/app/packages/experiences/gestalt/SheetMobile/SheetMobileWithMediaHeader.tsx")},[]);let m=(0,S.Z)(),g=(0,i.useRef)(null),{setAppFocusState:v}=(0,k.G)(),[C,E]=(0,i.useState)(!1),T=(0,b.vs)();if((0,i.useEffect)(()=>(c?v(!1):v(!0),()=>{c&&v(!0)}),[v,c]),(0,i.useEffect)(()=>(g.current=(0,x.Z)(()=>{g.current&&E(!0)}),()=>{"undefined"!=typeof window&&Object.prototype.hasOwnProperty.call(window,"cancelAnimationFrame")&&g.current&&(window.cancelAnimationFrame(g.current),g.current=null)}),[]),(0,i.useEffect)(()=>{let e=c&&!r;return e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="hidden",e.touchAction="none"}})(),()=>{e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="visible",e.touchAction="auto"}})()}},[c,r]),!c)return null;let F=(({isDarkMode:e,size:t})=>{let r=e?b.N$:"#FFFFFF";return{__style:{...w({size:t,isDarkMode:e}),backgroundColor:r,transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out"}}})({isDarkMode:T,size:f});F.__style.transform=(()=>{if(u||!(()=>{if("undefined"==typeof window)return!1;let e=Math.max(window.visualViewport?.width||0,window.innerWidth,document.documentElement.clientWidth),t=Math.max(window.visualViewport?.height||0,window.innerHeight,document.documentElement.clientHeight);return e<=380||t<=760})())return"";let e=Math.min(1,(Math.max(window.visualViewport?.width||0,window.innerWidth,document.documentElement.clientWidth)-12)/380,(Math.max(window.visualViewport?.height||0,window.innerHeight,document.documentElement.clientHeight)-12)/600);return e=Math.max(.8,e),` scale(${e})`})();let Z=(({size:e,isShowing:t,isDarkMode:r})=>{let n=w({size:e,isDarkMode:r});return n.transition="all 225ms cubic-bezier(0.0,0.0,0.2,1) 500ms",n.transform=t?"translateY(0)":`translateY(${_[e]||"100vh"})`,{__style:n}})({size:f,isShowing:C,isDarkMode:T});return(0,I.jsx)(j.Z,{allowClickAndDrag:t,children:(0,I.jsx)(l.mh,{children:(0,I.jsxs)(l.xu,{"aria-label":e,display:"inlineBlock",height:"100%",position:"relative",role:"dialog",zIndex:p||y.ZM,children:[(0,I.jsx)(l.iP,{accessibilityLabel:m._('Mobile Sheet Mask', 'mweb.sheet_mobile.mask', 'The accessibility label for the mask of mobile sheet'),onTap:()=>{a&&h()},tapStyle:"none",children:(0,I.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, .5)",touchAction:"none",transitionProperty:"opacity",transitionTimingFunction:"ease-out"}},height:"100%",left:!0,position:"fixed",top:!0,width:"100%",zIndex:new l.Ry(1)})}),(0,I.jsx)(l.xu,{color:"default",dangerouslySetInlineStyle:u?Z:F,position:"fixed",children:(0,I.jsx)(l.xu,{direction:"column",display:"flex",justifyContent:"between",maxHeight:Z.__style?.maxHeight||"100vh",position:"relative",width:"100%",children:(0,I.jsx)(P,{content:o,footer:s,header:d})})})]})})})}var E=r(767415);let T=({display_data:e,complete:t,dismiss:r,context_aux_data:n})=>{let o=(0,S.Z)(),{logContextEvent:a}=(0,p.u)(),[s,d]=(0,i.useState)(!0),[c,u]=(0,i.useState)(0),h=()=>{d(!1),r()},x=(0,i.useCallback)((e,t)=>{a({event_type:e,component:15489,element:t,aux_data:{experience_id:n.experience_id,placement_id:n.placement_id,step_number:c+1,step_index:c}})},[n.experience_id,n.placement_id,c,a]);if((0,i.useEffect)(()=>{x(13,18257)},[c,x]),!s)return null;if(!(e.steps&&e.steps.length>0&&e.steps.every(e=>e.title&&e.subtitle&&e.primary_button&&e.image)))return(0,E.nP)(f.ns,{sampleRate:1,tags:{experience_id:n.experience_id,placement_id:n.placement_id,reason:"Required display data not present",platform:4}}),null;let b=e.steps[c];if(!b)return(0,E.nP)(f.ns,{sampleRate:1,tags:{experience_id:n.experience_id,placement_id:n.placement_id,reason:`No step for index ${c}`,platform:4}}),null;let v=window?.innerWidth||375,_=(0,I.jsxs)(i.Fragment,{children:[(0,I.jsx)(l.Le,{top:0,children:(0,I.jsx)(l.xu,{padding:3,position:"absolute",width:"100%",children:(0,I.jsx)(l.hU,{accessibilityLabel:o._('Dismiss', 'experiences.ExperienceModalWindow.modalDismissIconButton', 'Accessibility label for the X icon button to dismiss the modal window'),bgColor:"washLight",icon:"close",iconColor:"default",onClick:()=>{x(123,75),h()},size:"lg"})})}),(0,I.jsx)(l.GH,{contentAspectRatio:.8,height:1.25*v,width:v,children:(0,I.jsx)(l.Ee,{alt:b.image.image_alt,color:b.image.dominant_color||void 0,fit:"cover",naturalHeight:b.image.height,naturalWidth:b.image.width,src:b.image.url})})]}),w=(0,I.jsxs)(l.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",paddingX:2,paddingY:3,children:[b.secondary_button&&(0,I.jsx)(m.Z,{buttonType:"secondary",data:(0,g._)(b.secondary_button,()=>{x(102,13005),h()}),experienceSchema:2}),(0,I.jsx)(m.Z,{buttonType:"primary",data:(0,g._)(b.primary_button,()=>{c<e.steps.length-1?(x(102,13004),u(c+1)):t()}),experienceSchema:2})]});return(0,I.jsx)(C,{accessibilityModalLabel:o._('Multi Step Modal', 'experiences.ExperienceMultiStepModal.accessibilityModalLabel', 'Accessibility label for the multi step modal'),allowClickAndDrag:!1,footer:w,header:_,isOpen:s,mobileIsSlideUp:!0,onDismiss:()=>{x(123,16412),h()},size:"auto",children:(0,I.jsxs)(l.xu,{padding:3,children:[(0,I.jsx)(l.xu,{marginBottom:3,children:(0,I.jsx)(l.qd,{size:"500",children:b.title})}),(0,I.jsx)(l.xv,{children:b.subtitle})]})})};function F({experience:e}){return(0,i.useEffect)(()=>{(0,n.Z)("ExperienceMultiStepModal","/app/packages/experiences/Experiences/ExperienceMultiStepModal/ExperienceMultiStepModal.tsx")},[]),(0,I.jsx)(u.a3,{eligibleSchemas:[2],eligibleTypes:[26],experience:e,children:({complete:t,dismiss:r,experience:{display_data:n}})=>(0,I.jsx)(T,{complete:t,context_aux_data:{experience_id:e?.experience_id,placement_id:e?.placement_id},dismiss:r,display_data:n})})}var Z=r(81342),M=r(664300),A=r(924591),L=r(935059),R=r(271202),z=r(134136),H=r(325705),B=r(501010),N=r(774838),O=r(661376),D=r(825605),W=r(653247),$=r(34550),U=r(112658),K=r(577356),q=r(341687),V=r(739405),Y=r(603284),J=r(2061),G=r(610142),Q=r(31425),X=r(919203),ee=r(726425),et=r(28031),er=r(104999),en=r(730448),ei=r(893957),eo=r(838350),ea=r(454908);let el={__style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}};function es({currentTabIndex:e,tabBoards:t}){(0,i.useEffect)(()=>{(0,n.Z)("MoreIdeasTabs","/app/www/Homefeed/MoreIdeasTabs.tsx")},[]);let r=(0,i.useRef)(null),s=(0,i.useRef)(!1),{width:d,height:c}=(0,et.Z)()||{width:0,height:0},u=(0,i.useRef)([]),h=(0,a.s0)(),p=(0,S.Z)(),f=(0,er.Z)(),m=(0,o.I0)(),g=t.length?[{href:"/",text:(0,I.jsx)(l.xu,{children:p._('All', 'homefeed.moreIdeasTab.homefeedTab', 'Homefeed tab')}),tabType:1},...t.filter(e=>e).map(({id:e,name:t},r)=>({href:`/?boardId=${String(e)}`,text:(0,I.jsx)(l.xu,{dangerouslySetInlineStyle:el,maxWidth:100,overflow:"hidden",children:t}),boardId:e,tabType:2,ref:u.current[r]}))]:null,x=e=>1===e?11081:11082,b=(0,i.useRef)([]),v=(0,i.useCallback)(()=>{u&&u.current&&u.current.length&&u.current.forEach((e,r)=>{if(!e?.current)return;let{id:n,name:i}=t[r]||{},o=e.current.getBoundingClientRect();(0,eo.Z)({left:o.left,right:o.right,top:o.top,bottom:o.bottom,windowHeight:c,windowWidth:d})&&n&&!b.current.includes(n)&&(f({event_type:13,view_type:1,view_parameter:92,component:13184,element:x(2),object_id_str:n,aux_data:{board_id:n,tab_title:i,referrer:19}}),b.current.push(n))})},[u,f,t,c,d]),_=(0,en.Z)(()=>{v()},50);if((0,ei.Z)(()=>{u.current=Array(t.length).fill(void 0).map((e,t)=>u.current[t]||(0,i.createRef)())}),(0,i.useEffect)(()=>{v();let e=r.current;return e&&e.addEventListener("scroll",_),()=>{e?.removeEventListener("scroll",_)}},[v,_]),(0,i.useEffect)(()=>()=>{s.current&&(window.cancelAnimationFrame(s.current),s.current=null)}),!g)return null;let w=g.map(e=>({href:e.href,text:e.text,ref:e.ref}));return(0,I.jsx)(l.xu,{ref:r,"data-test-id":"more-ideas-tabs",fit:!0,marginBottom:1,marginTop:1,overflow:"scrollX",children:(0,I.jsx)(l.mQ,{activeTabIndex:e,onChange:({activeTabIndex:e})=>{let t=g?.[e];if(t){let r;r=t.boardId,m((0,ea.r)(r,e)),f({event_type:101,view_type:1,view_parameter:92,component:13184,element:x(t.tabType),aux_data:{index:e.toString(),board_id:t.boardId,referrer:19},object_id_str:t.boardId})}let{pathname:r,state:n}=g?{pathname:(g[e]||g[0]).href,state:(g[e]||g[0]).locationState||void 0}:{};h(r,{state:n})},tabs:w})})}var ed=r(966039),ec=r(99672),eu=r(179664),eh=r(394382),ep=r(751534);function ef(){(0,i.useEffect)(()=>{(0,n.Z)("PreferencesUpdatedBanner","/app/www/pages/duplo/PreferencesUpdatedBanner.tsx")},[]);let{shouldRefreshHomefeed:e,clearRefreshFlag:t}=(0,eh._T)(),{showToast:r}=(0,K.dI)(),o=(0,S.Z)(),a=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{if(e&&!a.current){a.current=!0;let e=o._('Preferences updated! We\'re refreshing your feed now.', 'PreferencesUpdatedBanner.message', 'Message shown when user returns to homefeed after updating preferences');r(({hideToast:r})=>(0,I.jsx)(A.Z,{duration:3e3,onHide:()=>{r(),t(),a.current=!1},text:e}))}else e||(a.current=!1)},[e,t,r,o]),null}var em=r(228612),eg=r(297621),ex=r(9065),eb=r(520803);function ev(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let e_=(0,ex.Z)(()=>r.e("41881").then(r.bind(r,701426)),void 0,e=>701426,"app-www-pages-duplo-CoreActionsHeader",e=>["41881"]),ew=(0,ex.Z)(()=>r.e("82408").then(r.bind(r,221930)),void 0,e=>221930,"app-www-stories-FullWidthPinStory",e=>["82408"]),ey=(0,ex.Z)(()=>r.e("85946").then(r.bind(r,568737)),{ssr:!1},e=>568737,void 0,void 0),eS=(0,ex.Z)(()=>r.e("93065").then(r.bind(r,878723)),void 0,e=>878723,"app-www-Homefeed-HomefeedMoreIdeasTabContent",e=>["93065"]),ej=(0,ex.Z)(()=>r.e("61436").then(r.bind(r,448599)),void 0,e=>448599,"app-www-stories-LandingPageStory-LandingPageStory",e=>["61436"]),ek=(0,ex.Z)(()=>Promise.all([r.e("91062"),r.e("10192"),r.e("60417")]).then(r.bind(r,321792)),{ssr:!1},e=>321792,void 0,void 0),eI=(0,ex.Z)(()=>Promise.all([r.e("96311"),r.e("77153")]).then(r.bind(r,179007)),{ssr:!1},e=>179007,void 0,void 0),eP=(0,ex.Z)(()=>r.e("48205").then(r.bind(r,538049)),{ssr:!1},e=>538049,void 0,void 0),eC=(0,ex.Z)(()=>Promise.all([r.e("25418"),r.e("36157")]).then(r.bind(r,219875)),{ssr:!1},e=>219875,void 0,void 0),eE=(0,i.lazy)(()=>r.e("79581").then(r.bind(r,6215))),eT=(0,i.lazy)(()=>r.e("87463").then(r.bind(r,223865))),eF=(0,i.lazy)(()=>r.e("18577").then(r.bind(r,646587))),eZ=(0,i.lazy)(()=>r.e("79021").then(r.bind(r,504636))),eM=(0,i.lazy)(()=>r.e("77846").then(r.bind(r,5480))),eA=(0,i.lazy)(()=>r.e("63585").then(r.bind(r,272319))),eL={feedKey:ep.xJ,trafficSource:ep.WV,resourceName:ep.om,feedItemProps:e=>({viewParameter:92,viewType:1,onFeedItemClick:()=>{e.onFeedItemClick&&e.onFeedItemClick()}}),pullToRefresh:!0},eR={first_page_size:"25",page_size:"10"},ez=({webMobileHomeFeedTakoverExperience:e})=>{let{feedKey:t,feedItemProps:r,pullToRefresh:n}=eL,i=(0,a.TH)(),d=(0,a.s0)(),c=(0,eb.Z)(),u=(0,o.v9)(({session:e})=>e.firstHomeFeedRequestAfterNux),h={webMobileHomeFeedTakoverExperience:e,location:i,navigate:d,match:c},p=(0,o.v9)(({feeds:e})=>e[t]??[]),{selectedUseCases:f,selectedPins:m}=(0,eu.u)(),g=(0,ed.rQ)(f,m),x=!u,b=g.length>0?{in_nux:u,nux_signals_map:g}:{in_nux:u},v={...ep.HH,...x?{...eR}:{...b},in_local_navigation:!0,static_feed:!!(i&&(i.pathname.includes("pwt_performance_testing")||void 0!==(0,q.Z)(i.search).pwt_performance_testing))},_=(0,O.Z)({name:ep.om,options:v}),{isAtEnd:w,isFetching:y,fetchMore:S,data:j,refresh:k}=_,P={includeBackgroundImages:!0,includeVideos:!0,pins:Object.values((0,em.JC)())};u&&(0,E.nP)("home_product.homefeed.has_in_nux_flag",{sampleRate:.1,tags:{appType:"mweb"}});let C=(()=>{let{isGraphQLEnabledInGeneral:e}=(0,J.nF)(),{locale:t}=(0,N.B)(),r=(0,em.JC)();return({feedItems:n,prevFeedItems:i,finishedRefresh:o,unauthLandingPinStateForAuthHomefeed:{pinId:a,feedItem:l}})=>{if(!n.length)return null;if(o&&i.length>0){let e=(e,t)=>e.slice(0,t).map(e=>e.id),r=e(i,5),o=e(n,5),a={appType:"mweb",language:t&&t.slice(0,2)||"unknown",locale:t||"unknown"};(0,E.nP)("home_product.homefeed.refresh",{sampleRate:1,tags:a}),JSON.stringify(r)===JSON.stringify(o)&&(0,E.nP)("home_product.homefeed.refresh.no_change",{sampleRate:1,tags:a})}if(a&&!e){if(i.length>0&&i[0]!==n[0])return(0,$.M0)().removeItem(s.uc),{feedItem:null,pinId:null};else if((0===i.length||i[0]===n[0]&&i.length!==n.length||!l)&&r[a]&&!n.slice(0,5).some(({id:e})=>e===a))return{feedItem:{id:a,type:"pin",trackingParams:n[0].trackingParams},pinId:a}}return null}})(),T=j?.length?j[0]:null;if(e&&e.display_data?.in_checklist_education&&e.display_data?.num_columns_requested===2){let e={type:"fullWidthBreakIn",value:{index:0,content:T?.id&&(0,I.jsx)(eg.Z,{storyId:T.id,children:e=>(0,I.jsx)(ew,{slotIndex:0,story:e,viewParameter:3833,viewType:604})})}},i=p.slice(1);return(0,I.jsx)(l.xu,{"data-test-id":"homefeed",children:(0,I.jsx)(G.Zt,{authHomefeedComponentDidUpdate:C,feedItemProps:r&&r(h),feedItems:i,feedItemsAdjustment:e,feedKey:t,pagination:{hasNext:!w,isLoadingNext:y,loadNext:()=>S(),refetch:()=>k()},pullToRefresh:n,trafficSource:ep.WV,visuallyCompleteProfilerOptions:P})})}return x&&!e?.display_data?(0,I.jsx)(l.xu,{"data-test-id":"homefeed-ssr",children:(0,I.jsx)(G.iK,{authHomefeedComponentDidUpdate:C,feedItemProps:r&&r(h),feedKey:ep.xJ,pullToRefresh:n,resource:_,serverRender:!0,trafficSource:ep.WV,visuallyCompleteProfilerOptions:P})}):(0,I.jsx)(l.xu,{"data-test-id":"homefeed",children:(0,I.jsx)(G.iK,{authHomefeedComponentDidUpdate:C,feedItemProps:r&&r(h),feedKey:t,pullToRefresh:n,resource:_,trafficSource:ep.WV,visuallyCompleteProfilerOptions:P})})},eH=(0,ex.Z)(()=>r.e("35273").then(r.bind(r,61949)),{ssr:!1},e=>61949,void 0,void 0),eB=(0,ex.Z)(()=>r.e("43946").then(r.bind(r,846333)),{ssr:!1},e=>846333,void 0,void 0),eN=(0,ex.Z)(()=>r.e("82848").then(r.bind(r,809793)),{ssr:!1},e=>809793,void 0,void 0),eO=(0,ex.Z)(()=>r.e("37213").then(r.bind(r,799997)),{ssr:!1},e=>799997,void 0,void 0),eD=(0,ex.Z)(()=>r.e("18012").then(r.bind(r,25711)),{ssr:!1},e=>25711,void 0,void 0),eW=(0,ex.Z)(()=>r.e("3765").then(r.bind(r,502851)),{ssr:!1},e=>502851,void 0,void 0);class e$ extends i.PureComponent{constructor(...e){super(...e),ev(this,"state",{...(0,ed.HW)(),currentTabIndex:"number"==typeof this.props.selectedTabIndex?this.props.selectedTabIndex:ee.e,showUnlinkTokenExpiredModal:!1,showDeleteAccountSurveyModal:!1,showYipModal:!1,shouldDismissCoreActionsHeader:!1,showQRAppErrorBanner:!1}),ev(this,"renderOptInInterestPicker",()=>{let{everythingFeedExperience:e,isLimitedLogin:t}=this.props,{extraPlpImages:r,extraBlpImages:n}=this.state,i=!t&&e&&504192===e.experience_id,o=i&&e&&e.display_data&&e.display_data.full_screen_modal;return e&&i?(0,I.jsx)(c.Z,{name:"SafeSuspense_HomePage_OptInInterestPicker",children:o?(0,I.jsx)(eW,{experience:e,extraImageInfo:r.length>0?r:n,viewParameter:92,viewType:1}):(0,I.jsx)(eO,{experience:e,viewParameter:92,viewType:1})}):null})}static getDerivedStateFromProps(e){let{selectedTabIndex:t,navigate:r,location:n}=e;return(0,q.Z)(n.search).show_qr_app_error?(r("/",{replace:!0}),{showQRAppErrorBanner:!0}):"number"==typeof t?{currentTabIndex:t}:null}componentDidMount(){let{dispatchViewedSharedPins:e,location:t,i18n:r,showToast:n,navigate:i}=this.props,{sharedPinData:o}=this.state;(0,ec.E)(!1),(0,d.Z)(),o&&Object.keys(o).length>0&&e(o),t.state?.unlinkTokenInvalid&&this.setState({showUnlinkTokenExpiredModal:!0}),t.state?.isCloseAccountReasonOpen&&this.setState({showDeleteAccountSurveyModal:!0}),t.state?.showError&&n(({hideToast:e})=>(0,I.jsx)(A.Z,{duration:5e3,onHide:e,text:r._('We can\u2019t find that idea! Try searching for one just like it.', ' - ', ' -- '),type:"error"})),(0,q.Z)(t.search).show_yip_modal&&(i("/",{replace:!0}),this.setState({showYipModal:!0})),this.props.shouldRefreshHomefeed&&(0,Q.cV)("homefeed")}render(){let{checkExperiment:e,currentUserId:t,currentUsername:r,everythingFeedExperience:n,navigate:o,i18n:a,isAuthenticated:s,isEligibleForCoreActionsHeader:d,isPartner:p,location:f,moreIdeasStory:m,newUserWelcomeStoryExperience:g,webMobileHomeFeedTakoverExperience:x,selectedTabBoardId:b,tabBoards:v,shouldRefreshHomefeed:_}=this.props,{currentTabIndex:w,showUnlinkTokenExpiredModal:y,showDeleteAccountSurveyModal:S,showYipModal:j,shouldDismissCoreActionsHeader:k,showQRAppErrorBanner:P}=this.state,C=(0,q.Z)(f.search),E=C&&C.boardId||b;if(n&&!P)switch(n.experience_id){case 40002:case 10105:return(0,I.jsx)(c.Z,{name:"SafeSuspense_HomePage_Nux",children:(0,I.jsx)(D.Z,{fallback:(0,I.jsx)(W.Z,{accessibilityLabel:this.props.i18n._('Loading new user education', 'Loading spinner', 'Loading spinner')}),children:p?(0,I.jsx)(eN,{experience:n}):(0,I.jsx)(eB,{experience:n})})});case 500681:return(0,I.jsx)(c.Z,{name:"SafeSuspense_HomePage_ContactUpdate",children:(0,I.jsx)(eH,{fallback:(0,I.jsx)(W.Z,{accessibilityLabel:this.props.i18n._('Loading experience', 'loading experience spinner', 'loading experience spinner')})})})}let T=s&&e("mweb_hf_core_actions_header").anyEnabled&&d,A=()=>{this.setState({shouldDismissCoreActionsHeader:!0})};return(0,I.jsx)(Y.Z,{viewParameter:92,viewType:1,children:(0,I.jsx)(U.Z,{view:1,viewParameter:92,children:(0,I.jsxs)(z.default,{dataLayoutShiftBoundaryId:"AuthHomePageContainer",hasFixedHeader:!0,children:[P&&(0,I.jsx)(l.xu,{marginTop:4,children:(0,I.jsx)(eA,{})}),(0,I.jsx)(X.Z,{text:a._('Home', 'HomePage.HiddenAccessibilityHeader', 'Accessibility h1 at home page')}),!!v?.length&&(0,I.jsx)(R.default,{hideOnScroll:s,noPadding:!0,overrideTop:0,children:(0,I.jsx)(l.xu,{paddingY:1,children:(0,I.jsx)(es,{currentTabIndex:w,tabBoards:v||[]})})}),m&&(0,I.jsx)(l.xu,{marginEnd:-4,marginStart:-4,paddingY:2,children:(0,I.jsx)(eg.Z,{storyId:m.id||"",children:e=>(0,I.jsx)(ew,{slotIndex:0,story:e,viewParameter:92,viewType:1},m.id)})}),w!==ee.e&&E&&w<=(v?.length??0)&&(0,I.jsx)(eS,{boardId:E})||(0,I.jsxs)(i.Fragment,{children:[(0,I.jsx)(F,{experience:n}),(0,I.jsx)(u._f,{experience:n,placementId:40001}),(0,I.jsx)(u.b9,{placementId:40001}),(0,I.jsx)(u.nj,{experience:n,placementId:40001}),(0,I.jsx)(h.Z,{placementId:n?.placement_id}),(0,I.jsx)(M.Z,{placementId:1000544}),(0,I.jsx)(Z.Z,{placementId:1000558}),(0,I.jsx)(u.a3,{eligibleIds:[500726,500866,500735,500833,501182,501275,501385,501358,501908,501909,503291],experience:n,children:(0,I.jsx)(D.Z,{children:(0,I.jsx)(eT,{experience:n})})}),n&&(0,I.jsx)(u.a3,{eligibleIds:[507483],experience:n,children:({dismiss:e,experience:{display_data:t}})=>{let r=!("is_blocking"in t)||t.is_blocking;return(0,I.jsx)(ek,{container:e$.name,dismiss:e,isBlockingModal:r})}}),n&&(0,I.jsx)(u.a3,{eligibleIds:[507661],experience:n,children:({dismiss:e,experience:{display_data:t}})=>(0,I.jsx)(eI,{container:e$.name,displayData:t,onDismiss:e})}),n&&(0,I.jsx)(u.a3,{eligibleIds:[507924],experience:n,children:({complete:e,dismiss:t})=>(0,I.jsx)(eP,{onComplete:e,onDismiss:t})}),n&&(0,I.jsx)(u.a3,{eligibleIds:[508387],experience:n,placementId:40001,children:({complete:e,dismiss:t,experience:r})=>(0,I.jsx)(eC,{complete:e,dismiss:t,experience:r})}),n&&(0,I.jsx)(u.a3,{eligibleIds:[505326],experience:n,children:({complete:e,dismiss:t})=>(0,I.jsx)(i.Suspense,{children:(0,I.jsx)(eM,{complete:e,dismiss:t})})}),n&&(0,I.jsx)(u.a3,{eligibleIds:[505801],experience:n,children:({complete:e})=>(0,I.jsx)(i.Suspense,{children:(0,I.jsx)(eZ,{complete:e})})}),g?.display_data?.story&&g.display_data.showUpdatedLandingPageStory&&(0,I.jsx)(ej,{isMoreIdeasTabsVisible:!!v?.length,newUserWelcomeStoryExperience:g}),(0,I.jsxs)(l.xu,{marginTop:2*(!v?.length&&!m),children:[!k&&T&&(0,I.jsx)(e_,{onDismiss:A,username:r||""}),(0,I.jsx)(ez,{webMobileHomeFeedTakoverExperience:x})]})]}),y&&(0,I.jsx)(D.Z,{children:(0,I.jsx)(l.xu,{"data-test-id":"unlink-expired-token",children:(0,I.jsx)(eF,{onDismiss:()=>{o("/",{replace:!0}),this.setState({showUnlinkTokenExpiredModal:!1})}})})}),S&&(0,I.jsx)(D.Z,{children:(0,I.jsx)(eE,{isPartner:p,onDismiss:()=>{o("/",{replace:!0}),this.setState({showDeleteAccountSurveyModal:!1})},userId:t,username:r})}),j&&(0,I.jsx)(c.Z,{name:"YearInPreviewConfirmPublishModal",children:(0,I.jsx)(eD,{onModalDismiss:()=>{this.setState({showYipModal:!1})}})}),this.renderOptInInterestPicker(),w===ee.e&&n&&(0,I.jsx)(u.a3,{eligibleIds:[508418],experience:n,children:()=>_?(0,I.jsx)(ef,{}):(0,I.jsx)(ey,{hasTabBoards:(v?.length??0)>0})})]})})})}}let eU=[];function eK(){(0,i.useEffect)(()=>{(0,n.Z)("HomePage","/app/www/pages/duplo/HomePage.tsx")},[]);let e=(0,S.Z)(),t=(0,o.I0)(),r=(0,L.Z)(),{showToast:l}=(0,K.dI)(),s=(0,a.s0)(),d=(0,a.TH)(),{checkExperiment:c}=(0,B.Z)(),{shouldRefreshHomefeed:h,clearRefreshFlag:p}=(0,eh._T)(),{experience:f}=(0,u.Ow)(40001),{experience:m}=(0,u.Ow)(1000115),{experience:g}=(0,u.Ow)(1000411),x=(0,o.v9)(({feeds:e})=>e.homefeed),b=(0,o.v9)(({homefeedTabUI:e})=>e.activeTabBoardId),v=(0,o.v9)(({homefeedTabUI:e})=>e.activeTabIndex),{isAuth:_,isLimitedLogin:w}=r,y=r.isAuth?r.id:void 0,j=r.isAuth?r.username:void 0,k=!!r.isAuth&&r.isPartner,P=(0,V.HG)(),C=Array.isArray(x)?x:[],E=!P&&C[0]&&"story"===C[0].type?C[0]:null,T=(0,o.v9)(({stories:e})=>E?e[E.id]:null),F=T&&T.story_type&&T.story_type.startsWith("boards_more_ideas_feed_upsell")?T:null,Z=C.find(({type:e})=>"home_feed_tabs"===e)?.tabs,{data:M}=(0,O.Z)(_&&c("mweb_hf_core_actions_header",{dangerouslySkipActivation:!0}).anyEnabled?{name:"UserResource",options:{user_id:r.id,field_set_key:"core_actions_header"}}:null),A=(0,V.ml)();(0,H.Z)(d,l,e);let R={checkExperiment:c,currentUserId:y,currentUsername:j,dispatchViewedSharedPins:e=>t({type:"SET_VIEWED_SHARED_PINS",payload:{pins:e}}),everythingFeedExperience:f,navigate:s,i18n:e,isAuthenticated:_,isEligibleForCoreActionsHeader:M?.is_eligible_for_core_actions_header,isLimitedLogin:w,isMobile:A,isPartner:k,location:d,moreIdeasStory:F,newUserWelcomeStoryExperience:g,selectedTabBoardId:b,selectedTabIndex:v,showToast:l,tabBoards:Z??eU,webMobileHomeFeedTakoverExperience:m,shouldRefreshHomefeed:h,clearRefreshFlag:p};return(0,I.jsx)(e$,{...R})}},751534:function(e,t,r){r.d(t,{EP:()=>s,HH:()=>l,WV:()=>o,om:()=>a,xJ:()=>i});var n=r(647908);let i="homefeed",o="feed_home",a="UserHomefeedResource",l={field_set_key:"mobile_grid_item",prepend:!1},s=(0,n.Z)(l)},454908:function(e,t,r){r.d(t,{r:()=>n});let n=(e,t)=>({type:"SET_ACTIVE_HOMEFEED_TAB",payload:{boardId:e,index:t}})},199024:function(e,t,r){r.d(t,{ZN:()=>a,fv:()=>l,hr:()=>o,lD:()=>s});var n=r(27399);function i(e,t){return n.Z.create("InterestFollowResource",{interest_id:e,interest_list:"favorited",referrer:t})}let o=(e,t)=>({type:"TOPIC_FOLLOW",payload:{id:e,value:t}}),a=(e,t,r)=>async n=>{n(o(e,!0));try{await i(e,r).callCreate(),t({event_type:601,object_id_str:e})}catch(t){n(o(e,!1))}},l=(e,t,r)=>async n=>{n(o(e,!1));try{await i(e,r).callDelete(),t({event_type:602,object_id_str:e})}catch(t){n(o(e,!0))}},s=(e,t="")=>r=>n.Z.create("UpdateFollowedInterestsResource",{referrer:t,updated_interest_follows:e}).callUpdate().then(()=>{Object.keys(e).forEach(t=>{let n=e[t];r(o(t,n))})})},680717:function(e,t,r){r.d(t,{KF:()=>c,ZN:()=>l,fv:()=>d,kE:()=>h,yA:()=>s});var n=r(27399),i=r(47755),o=r(826681);function a(e,t,r,i){return n.Z.create("UserFollowResource",{user_id:e,invite_code:i||void 0,aux_data:t?{pin_id:t}:void 0,client_tracking_params:r})}function l(e,t=null,r,n){return i=>{a(e,t,r,n).callCreate().catch(()=>i((0,o.P_)(e,!1))),i((0,o.P_)(e,!0))}}function s(e,t=null,r,n){return async i=>{i((0,o.P_)(e,!0)),await a(e,t,r,n).callCreate().catch(t=>{throw i((0,o.P_)(e,!1)),t})}}function d(e,t=null,r){return n=>{a(e,t,r).callDelete().catch(()=>n((0,o.P_)(e,!0))),n((0,o.P_)(e,!1))}}function c(e,t=null,r){return async n=>{n((0,o.P_)(e,!1)),await a(e,t,r).callDelete().catch(t=>{throw n((0,o.P_)(e,!0)),t})}}let u=(e,t)=>({type:"USER_BULK_FOLLOW",payload:{ids:e,value:t}}),h=e=>t=>{e.length>0&&((0,i.Z)({url:"/v3/users/follow/",method:"PUT",data:{followee_ids:e}}).catch(()=>t(u(e,!1))),t(u(e,!0)))}},826681:function(e,t,r){r.d(t,{Ge:()=>d,JS:()=>o,P_:()=>a,Q_:()=>h,b8:()=>p,cg:()=>l,h2:()=>c,h6:()=>u});var n=r(47755),i=r(748025);function o(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}let a=(e,t)=>({type:"USER_FOLLOW",payload:{id:e,value:t}}),l=(e,t)=>({type:"USER_FOLLOWING_COUNT",payload:{id:e,following:t}}),s=(e,t)=>({type:"USER_BLOCK",payload:{id:e,value:t}}),d=({id:e,orbacSubjectId:t,blockSource:r,blockContext:i,logContextEvent:o})=>async a=>{a(s(e,!0));let l=await (0,n.Z)({url:"/v3/users/{blocked_user}/block/",urlParams:{blocked_user:e},method:"PUT",data:{orbac_subject_id:t,block_source:r,block_context:i}}).catch(()=>a(s(e,!1)));return o({event_type:54,object_id_str:e}),l},c=(e,t)=>async r=>{r(s(e,!1));let i=await (0,n.Z)({url:"/v3/users/{blocked_user}/block/",urlParams:{blocked_user:e},method:"DELETE"}).catch(()=>r(s(e,!0)));return t({event_type:55,object_id_str:e}),i};function u(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}let h=(e,t)=>()=>(0,n.Z)({url:"/v3/users/state/{state}/",urlParams:{state:e},method:"PUT",data:{value:t}}),p=(e,t,r)=>(o,a)=>{(0,n.Z)({url:"/v3/users/me/",method:"POST"}).then(()=>{r({event_type:48,object_id_str:a().session.userId}),e(),(0,i.Z)()},t)}},836643:function(e,t,r){r.d(t,{Z:()=>i});let n={feed:void 0,featuredBoardStoryId:void 0,feedStoryId:void 0,footerStoryId:void 0,boardShopModuleId:void 0,boardShopModuleIndex:void 0},i=(e,t)=>e?e.reduce(({boardShopModuleId:e,boardShopModuleIndex:r,featuredBoardStoryId:n,feed:i,feedStoryId:o,footerStoryId:a},l,s)=>{let d="story"===l.type&&t[l.id]?.story_type,c="board_ideas_feed"===d,u="board_ideas_preview_detailed"===d,h=!1;if("board_shop_tool_module"===d){let e=t[l.id];h=!!e.custom_properties?.is_full_width}return{feed:i.concat(u||c||h?[]:[l]),featuredBoardStoryId:"featured_boards"===d?l.id:n,feedStoryId:c?l.id:o,footerStoryId:u?l.id:a,boardShopModuleId:h?l.id:e,boardShopModuleIndex:h?s:r}},{boardShopModuleId:void 0,boardShopModuleIndex:void 0,featuredBoardStoryId:void 0,feed:[],feedStoryId:void 0,footerStoryId:void 0}):n},297621:function(e,t,r){r.d(t,{Z:()=>i});var n=r(581722);function i({children:e,storyId:t}){let r=(0,n.v9)(({stories:e})=>e[t]);return r&&e(r)}},734802:function(e,t,r){r.d(t,{Z:()=>I});var n,i,o=r(686659),a=r(667294),l=r(581722),s=r(167912),d=r(391995),c=r(104999),u=r(774838),h=r(338065),p=r(199024),f=r(24246),m=r(720459),g=r(775907),x=r(785893);let b=({backgroundColor:e,decreaseNamePadding:t,isHomefeedTuner:r,isLego:n,isSelected:i,locale:o,nameTextSize:a,renderAsPill:l,showFollowerCount:s,topicName:c,followerCount:u,image:h})=>{let p=(0,f.Z)(),b=(0,m.Z)(),v=(0,x.jsx)(d.JO,{accessibilityLabel:p._('Selected', ' - ', ' -- '),color:"light",icon:n?"check":"circle-check",size:n?12:24});return l?(0,x.jsx)(g.Z,{color:e||"#767676",image:h,isSelected:i??!1,title:c}):(0,x.jsxs)(d.xu,{"aria-selected":i,position:"relative",children:[(0,x.jsx)(d.zd,{rounding:n||r?400:200,children:(0,x.jsxs)(d.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:"100%"}},position:"relative",children:[(0,x.jsx)(d.xu,{bottom:!0,left:!0,padding:n&&i?1:0,position:"absolute",right:!0,rounding:n&&i?400:0,top:!0,children:h.url&&(0,x.jsx)(d.Ee,{alt:c,color:e||"#767676",fit:"cover",naturalHeight:1,naturalWidth:1,src:h.url})}),(0,x.jsx)(d.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:i?"rgba(0,0,0,0.6)":"rgba(0,0,0,0.3)",border:n&&i?"4px solid #767676":"none"}},left:!0,position:"absolute",right:!0,rounding:n?400:void 0,top:!0}),n&&i&&(0,x.jsx)(d.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{border:"2px solid #111"}},left:!0,position:"absolute",right:!0,rounding:400,top:!0})]})}),r?(0,x.jsx)(d.xu,{alignContent:"center",alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,padding:2,position:"absolute",right:!0,top:!0,children:(0,x.jsx)(d.xv,{align:"center",color:"light",size:a,weight:"bold",children:c})}):(0,x.jsxs)(d.xu,{bottom:!0,left:!0,padding:t?1:2,position:"absolute",right:!0,children:[(0,x.jsx)(d.xv,{color:"light",size:a,weight:"bold",children:c}),s&&u>=0&&(0,x.jsx)(d.xu,{paddingY:1,children:(0,x.jsxs)(d.xv,{color:"inverse",size:"100",children:[(0,x.jsx)(d.xv,{color:"inverse",inline:!0,size:"100",weight:"bold",children:b(o,u,{shortform:!0,shortform_maximum_fraction_digits:1})}),p._('followers', ' - ', ' -- ')]})})]}),i&&(0,x.jsx)(d.xu,{margin:2,position:"absolute",right:!0,top:!0,children:n?(0,x.jsx)(d.xu,{alignItems:"center",color:"selected",display:"flex",height:24,justifyContent:"center",rounding:200,width:24,children:v}):v})]})},v=(void 0!==n||(n=r(654471)).hash&&"b5b71fb4390c1d3835e468a25f687669"!==n.hash&&console.error("The definition of 'TopicImageWithText_topic' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),_=({topicRef:e,...t})=>{(0,a.useEffect)(()=>{(0,o.Z)("TopicImageWithText","/app/www/topic/TopicImageWithText.tsx")},[]);let r=(0,s.useFragment)(v,e),n=r.images?{url:r.images.url??"",width:r.images.width??0,height:r.images.height??0,dominant_color:"",type:""}:{dominant_color:"",height:0,type:"",url:"",width:0};return(0,x.jsx)(b,{backgroundColor:r.background_color??"",followerCount:r.follower_count??0,image:n,topicName:r.name??"",...t})},w=({topic:e,topicBlob:t,topicInfoForContextualExp:r,...n})=>{(0,a.useEffect)(()=>{(0,o.Z)("TopicImageWithText","/app/www/topic/TopicImageWithText.tsx")},[]);let i=r||e||t,l=i?.images?.["236x"]||i?.images?.["400x"]||i?.images?.["474x"]||i?.images?.orig||{height:1,url:"",width:1},s=i&&"follower_count"in i&&void 0!==i.follower_count?i.follower_count:-1;return(0,x.jsx)(b,{backgroundColor:i?.background_color||"",followerCount:s,image:l,topicName:i?.name||"",...n})},y=({decreaseNamePadding:e=!1,isHomefeedTuner:t,isLego:r,isSelected:n=!1,markForRefresh:i,nameTextSize:o="lg",onTouch:a,padding:s=2,renderAsPill:f,showFollowButton:m=!1,showFollowerCount:g=!1,shouldClickthrough:b=!1,topic:v,viewParameter:y,viewType:S})=>{let j=(0,l.I0)(),k=(0,c.Z)(),{locale:I}=(0,u.B)(),P=(0,x.jsxs)(d.xu,{"data-test-id":"nux-picker-topic",children:["graphql"!==v.type?(0,x.jsx)(w,{decreaseNamePadding:e,isHomefeedTuner:t,isLego:r,isSelected:n,locale:I,nameTextSize:o,renderAsPill:f,showFollowerCount:g,topic:v.topic,topicBlob:v.topicBlob,topicInfoForContextualExp:v.topicInfoForContextualExp}):(0,x.jsx)(_,{decreaseNamePadding:e,isHomefeedTuner:t,isLego:r,isSelected:n,locale:I,nameTextSize:o,renderAsPill:f,showFollowerCount:g,topicRef:v.topicRef}),!!v&&m&&(0,x.jsx)(d.xu,{paddingY:2,children:(0,x.jsx)(h.Z,{followEventType:601,id:v.id,inline:t,invertColors:t,isFollowed:v.is_followed,onFollow:e=>{j((0,p.ZN)(e,k)),i&&i()},onUnfollow:e=>{j((0,p.fv)(e,k)),i&&i()},pinKey:null,size:"md",textType:t?"AddRemove":"FollowFollowing",unfollowEventType:602,viewParameter:y||void 0,viewType:S||void 0})})]}),C="/";return v&&(C=`/topics/${v.id}`),b&&v.slug?(0,x.jsx)(d.Tg,{href:C,onTap:({event:e})=>{a?.(e)},rounding:200,tapStyle:"compress",children:(0,x.jsx)(d.xu,{padding:s,children:P})}):P},S=(void 0!==i||(i=r(176923)).hash&&"e5a0b7dce2aa2313e4cf2c9871cbedf7"!==i.hash&&console.error("The definition of 'TopicRepFragment_topic' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),j=({topicRef:e,decreaseNamePadding:t=!1,isHomefeedTuner:r,isLego:n,isSelected:i=!1,markForRefresh:o,nameTextSize:a="lg",onTouch:l,padding:d=2,renderAsPill:c,showFollowButton:u=!1,showFollowerCount:h=!1,shouldClickthrough:p=!1,viewParameter:f,viewType:m})=>{let g=(0,s.useFragment)(S,e);return(0,x.jsx)(y,{decreaseNamePadding:t,isHomefeedTuner:r,isLego:n,isSelected:i,markForRefresh:o,nameTextSize:a,onTouch:l,padding:d,renderAsPill:c,shouldClickthrough:p,showFollowButton:u,showFollowerCount:h,topic:{id:g.entityId??"",type:"graphql",is_followed:g.is_followed??!1,topicRef:g},viewParameter:f,viewType:m})},k=({id:e,topic:t,topicBlob:r,topicInfoForContextualExp:n,decreaseNamePadding:i=!1,isHomefeedTuner:o,isLego:a,isSelected:s=!1,markForRefresh:d,nameTextSize:c="lg",onTouch:u,padding:h=2,renderAsPill:p,showFollowButton:f=!1,showFollowerCount:m=!1,shouldClickthrough:g=!1,viewParameter:b,viewType:v})=>{let _=(0,l.v9)(({topics:t})=>t[e]),w=t??_;return(0,x.jsx)(y,{decreaseNamePadding:i,isHomefeedTuner:o,isLego:a,isSelected:s,markForRefresh:d,nameTextSize:c,onTouch:u,padding:h,renderAsPill:p,shouldClickthrough:g,showFollowButton:f,showFollowerCount:m,topic:{id:e,is_followed:!!w?.is_followed,topic:w,topicBlob:r,topicInfoForContextualExp:n,type:"resource"},viewParameter:b,viewType:v})},I=({decreaseNamePadding:e=!1,isHomefeedTuner:t,isLego:r,isSelected:n=!1,markForRefresh:i,nameTextSize:l="lg",onTouch:s,padding:d=2,renderAsPill:c,showFollowButton:u=!1,showFollowerCount:h=!1,shouldClickthrough:p=!1,viewParameter:f,viewType:m,...g})=>((0,a.useEffect)(()=>{(0,o.Z)("TopicRep","/app/www/topic/TopicRep.tsx")},[]),g.topicRef?(0,x.jsx)(j,{decreaseNamePadding:e,isHomefeedTuner:t,isLego:r,isSelected:n,markForRefresh:i,nameTextSize:l,onTouch:s,padding:d,renderAsPill:c,shouldClickthrough:p,showFollowButton:u,showFollowerCount:h,topicRef:g.topicRef,viewParameter:f,viewType:m}):(0,x.jsx)(k,{decreaseNamePadding:e,id:g.id,isHomefeedTuner:t,isLego:r,isSelected:n,markForRefresh:i,nameTextSize:l,onTouch:s,padding:d,renderAsPill:c,shouldClickthrough:p,showFollowButton:u,showFollowerCount:h,topic:g.topic,topicBlob:g.topicBlob,topicInfoForContextualExp:g.topicInfoForContextualExp,viewParameter:f,viewType:m}))}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/81560-a9f7769d82d4b3c9.mjs.map